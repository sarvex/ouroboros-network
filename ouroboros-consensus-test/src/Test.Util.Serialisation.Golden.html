<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DefaultSignatures   #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DeriveAnyClass      #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DeriveGeneric       #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts    #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances   #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase          #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings   #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes          #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards     #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE StandaloneDeriving  #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications    #-}</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-orphans #-}</span><span>
</span><span id="line-15"></span><span class="hs-comment">-- | Golden tests infrastructure.</span><span>
</span><span id="line-16"></span><span class="hs-comment">--</span><span>
</span><span id="line-17"></span><span class="hs-comment">-- Golden tests are implemented using</span><span>
</span><span id="line-18"></span><span class="hs-comment">-- __[tasty-golden](https://github.com/UnkindPartition/tasty-golden)__.</span><span>
</span><span id="line-19"></span><span class="hs-comment">--</span><span>
</span><span id="line-20"></span><span class="hs-comment">-- When adding a new golden test, running the test suite locally will generate</span><span>
</span><span id="line-21"></span><span class="hs-comment">-- the golden files. These files should be checked in as CI will fail if there</span><span>
</span><span id="line-22"></span><span class="hs-comment">-- are missing golden files.</span><span>
</span><span id="line-23"></span><span class="hs-comment">--</span><span>
</span><span id="line-24"></span><span class="hs-comment">-- Failing a golden test suite when the corresponding golden files are not found</span><span>
</span><span id="line-25"></span><span class="hs-comment">-- is done via the @--no-create@ flag, which surprisingly is opt-in. In our</span><span>
</span><span id="line-26"></span><span class="hs-comment">-- @nix@ infrastructure, this flag for CI is set in</span><span>
</span><span id="line-27"></span><span class="hs-comment">-- __[ouroboros-network.nix](/nix/ouroboros-network.nix)__:</span><span>
</span><span id="line-28"></span><span class="hs-comment">--</span><span>
</span><span id="line-29"></span><span class="hs-comment">-- &gt;  # Command-line options for test suites:</span><span>
</span><span id="line-30"></span><span class="hs-comment">-- &gt;  packages.ouroboros-consensus-byron-test.components.tests.test.testFlags =</span><span>
</span><span id="line-31"></span><span class="hs-comment">-- &gt;    lib.mkForce [ &quot;-- &gt;no-create&quot; ];</span><span>
</span><span id="line-32"></span><span class="hs-comment">-- &gt;  packages.ouroboros-consensus-shelley-test.components.tests.test.testFlags =</span><span>
</span><span id="line-33"></span><span class="hs-comment">-- &gt;    lib.mkForce [ &quot;-- &gt;no-create&quot; ];</span><span>
</span><span id="line-34"></span><span class="hs-comment">-- &gt;  packages.ouroboros-consensus-cardano-test.components.tests.test.testFlags =</span><span>
</span><span id="line-35"></span><span class="hs-comment">-- &gt;    lib.mkForce [ &quot;-- &gt;no-create&quot; ];</span><span>
</span><span id="line-36"></span><span class="hs-comment">--</span><span>
</span><span id="line-37"></span><span class="hs-comment">-- In particular, if we introduce golden tests in different suites, we need to add</span><span>
</span><span id="line-38"></span><span class="hs-comment">-- a line in the nix configuration above similar to the previous ones, eg:</span><span>
</span><span id="line-39"></span><span class="hs-comment">--</span><span>
</span><span id="line-40"></span><span class="hs-comment">-- &gt; packages.some-new-package.components.tests.test.testFlags =</span><span>
</span><span id="line-41"></span><span class="hs-comment">-- &gt;    lib.mkForce [ &quot;-- &gt;no-create&quot; ];</span><span>
</span><span id="line-42"></span><span class="hs-comment">--</span><span>
</span><span id="line-43"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Test.Util.Serialisation.Golden</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-44"></span><span>    </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Examples"><span class="hs-identifier">Examples</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier">Labelled</span></a></span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#ToGoldenDirectory"><span class="hs-identifier">ToGoldenDirectory</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#combineExamples"><span class="hs-identifier">combineExamples</span></a></span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#goldenTest_SerialiseDisk"><span class="hs-identifier">goldenTest_SerialiseDisk</span></a></span><span>
</span><span id="line-49"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#goldenTest_SerialiseNodeToClient"><span class="hs-identifier">goldenTest_SerialiseNodeToClient</span></a></span><span>
</span><span id="line-50"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#goldenTest_SerialiseNodeToNode"><span class="hs-identifier">goldenTest_SerialiseNodeToNode</span></a></span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#goldenTest_all"><span class="hs-identifier">goldenTest_all</span></a></span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#labelled"><span class="hs-identifier">labelled</span></a></span><span>
</span><span id="line-53"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#mapExamples"><span class="hs-identifier">mapExamples</span></a></span><span>
</span><span id="line-54"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#prefixExamples"><span class="hs-identifier">prefixExamples</span></a></span><span>
</span><span id="line-55"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#unlabelled"><span class="hs-identifier">unlabelled</span></a></span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Codec.CBOR.Encoding</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Encoding</span></span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Codec.CBOR.FlatTerm</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">TermToken</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Codec.CBOR.FlatTerm</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CBOR</span></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Codec.CBOR.Read</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CBOR</span></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Codec.CBOR.Term</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CBOR</span></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Codec.CBOR.Write</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CBOR</span></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Codec.Serialise</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">encode</span></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Exception</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">SomeException</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">evaluate</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">try</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Bifunctor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">bimap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">first</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier">Data.ByteString</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Strict</span></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Base16</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Base16</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">encode</span></span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier">Data.ByteString.Char8</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Strict8</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier">unpack</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier">Data.ByteString.Lazy</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Lazy</span></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.UTF8</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BS.UTF8</span></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">nub</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Proxy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Proxy</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.TreeDiff</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Expr</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ToExpr</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ansiWlEditExpr</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ediff</span></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">GHC.Stack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">HasCallStack</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/directory-1.3.6.0/src"><span class="hs-identifier">System.Directory</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/directory-1.3.6.0/src"><span class="hs-identifier">createDirectoryIfMissing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/filepath-1.4.2.1/src"><span class="hs-identifier">System.FilePath</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/filepath-1.4.2.1/src"><span class="hs-identifier">takeDirectory</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/filepath-1.4.2.1/src"><span class="hs-operator">(&lt;/&gt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.Prelude</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">forceElemsToWHNF</span></span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-network-api-0.1.0.0/noopt/doc/html/ouroboros-network-api/src"><span class="hs-identifier">Ouroboros.Network.Block</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-network-api-0.1.0.0/noopt/doc/html/ouroboros-network-api/src"><span class="hs-identifier">Serialised</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.Block</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">BlockProtocol</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">CodecConfig</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Header</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-85"></span><span>                     </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-network-api-0.1.0.0/noopt/doc/html/ouroboros-network-api/src"><span class="hs-identifier">HeaderHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SlotNo</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">SomeSecond</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.HeaderValidation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">AnnTip</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.Ledger.Abstract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">LedgerState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.Ledger.Extended</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">ExtLedgerState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-89"></span><span>                     </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">encodeExtLedgerState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.Ledger.Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">BlockQuery</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">QueryVersion</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-91"></span><span>                     </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">nodeToClientVersionToQueryVersion</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.Ledger.SupportsMempool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">ApplyTxErr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">GenTx</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-93"></span><span>                     </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">GenTxId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.Node.NetworkProtocolVersion</span></a></span><span>
</span><span id="line-95"></span><span>                     </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">HasNetworkProtocolVersion</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-96"></span><span>                     </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">SupportedNetworkProtocolVersion</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.Node.Run</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">SerialiseDiskConstraints</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-98"></span><span>                     </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">SerialiseNodeToClientConstraints</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-99"></span><span>                     </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">SerialiseNodeToNodeConstraints</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.Node.Serialisation</span></a></span><span>
</span><span id="line-101"></span><span>                     </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">SerialiseNodeToClient</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">SerialiseNodeToNode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-102"></span><span>                     </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">SerialiseResult</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.Protocol.Abstract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">ChainDepState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.Storage.Serialisation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">EncodeDisk</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-105"></span><span>                     </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">SerialisedHeader</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-106"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.Util.CBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">decodeAsFlatTerm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-107"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.Util.Condense</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Condense</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Test.Tasty</span></span><span>
</span><span id="line-110"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Test.Tasty.Golden.Advanced</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">goldenTest</span></span><span class="hs-special">)</span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Test.Util.Serialisation.Roundtrip.html"><span class="hs-identifier">Test.Util.Serialisation.Roundtrip</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Util.Serialisation.Roundtrip.html#SomeResult"><span class="hs-identifier">SomeResult</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Golden test
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span class="hs-comment">-- | Golden test for CBOR output. When the output doesn't match the golden</span><span>
</span><span id="line-119"></span><span class="hs-comment">-- one, we show an 'ediff' of the 'FlatTerm' output of both.</span><span>
</span><span id="line-120"></span><span class="hs-comment">--</span><span>
</span><span id="line-121"></span><span class="hs-comment">-- Exceptions: when forcing an encoding throws an exception, we 'show' the</span><span>
</span><span id="line-122"></span><span class="hs-comment">-- exception and use that as the output.</span><span>
</span><span id="line-123"></span><span id="local-6989586621679281824"><span class="annot"><a href="Test.Util.Serialisation.Golden.html#goldenTestCBOR"><span class="hs-identifier hs-type">goldenTestCBOR</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-124"></span><span>     </span><span class="annot"><span class="hs-identifier hs-type">TestName</span></span><span>
</span><span id="line-125"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679281824"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-126"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679281824"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Encoding</span></span><span class="hs-special">)</span><span>
</span><span id="line-127"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-comment">-- ^ Path to the file containing the golden output</span><span>
</span><span id="line-128"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TestTree</span></span></span><span>
</span><span id="line-129"></span><span id="goldenTestCBOR"><span class="annot"><span class="annottext">goldenTestCBOR :: TestName -&gt; a -&gt; (a -&gt; Encoding) -&gt; TestName -&gt; TestTree
</span><a href="Test.Util.Serialisation.Golden.html#goldenTestCBOR"><span class="hs-identifier hs-var hs-var">goldenTestCBOR</span></a></span></span><span> </span><span id="local-6989586621679281661"><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281661"><span class="hs-identifier hs-var">testName</span></a></span></span><span> </span><span id="local-6989586621679281660"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679281660"><span class="hs-identifier hs-var">example</span></a></span></span><span> </span><span id="local-6989586621679281659"><span class="annot"><span class="annottext">a -&gt; Encoding
</span><a href="#local-6989586621679281659"><span class="hs-identifier hs-var">enc</span></a></span></span><span> </span><span id="local-6989586621679281658"><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281658"><span class="hs-identifier hs-var">goldenFile</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-130"></span><span>    </span><span class="annot"><span class="annottext">TestName
-&gt; IO ByteString
-&gt; IO ByteString
-&gt; (ByteString -&gt; ByteString -&gt; IO (Maybe TestName))
-&gt; (ByteString -&gt; IO ())
-&gt; TestTree
forall a.
TestName
-&gt; IO a
-&gt; IO a
-&gt; (a -&gt; a -&gt; IO (Maybe TestName))
-&gt; (a -&gt; IO ())
-&gt; TestTree
</span><span class="hs-identifier hs-var">goldenTest</span></span><span>
</span><span id="line-131"></span><span>      </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281661"><span class="hs-identifier hs-var">testName</span></a></span><span>
</span><span id="line-132"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TestName -&gt; IO ByteString
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier hs-var">Strict.readFile</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281658"><span class="hs-identifier hs-var">goldenFile</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(SomeException -&gt; ByteString)
-&gt; (ByteString -&gt; ByteString)
-&gt; Either SomeException ByteString
-&gt; ByteString
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">either</span></a></span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; ByteString
</span><a href="#local-6989586621679281655"><span class="hs-identifier hs-var">exceptionToByteString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
forall a. a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">(Either SomeException ByteString -&gt; ByteString)
-&gt; IO (Either SomeException ByteString) -&gt; IO ByteString
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IO ByteString -&gt; IO (Either SomeException ByteString)
forall e a. Exception e =&gt; IO a -&gt; IO (Either e a)
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">try</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; IO ByteString
forall a. a -&gt; IO a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">evaluate</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281652"><span class="hs-identifier hs-var">actualValue</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span>      </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString -&gt; IO (Maybe TestName)
</span><a href="#local-6989586621679281651"><span class="hs-identifier hs-var">diff</span></a></span><span>
</span><span id="line-135"></span><span>      </span><span class="annot"><span class="annottext">ByteString -&gt; IO ()
</span><a href="#local-6989586621679281650"><span class="hs-identifier hs-var">updateGoldenFile</span></a></span><span>
</span><span id="line-136"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-137"></span><span>    </span><span class="hs-comment">-- Copied from tasty-golden because it isn't exported</span><span>
</span><span id="line-138"></span><span>    </span><span class="annot"><a href="#local-6989586621679281650"><span class="hs-identifier hs-type">updateGoldenFile</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier hs-type">Strict.ByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span>    </span><span id="local-6989586621679281650"><span class="annot"><span class="annottext">updateGoldenFile :: ByteString -&gt; IO ()
</span><a href="#local-6989586621679281650"><span class="hs-identifier hs-var hs-var">updateGoldenFile</span></a></span></span><span> </span><span id="local-6989586621679281649"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281649"><span class="hs-identifier hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-140"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679281648"><span class="annot"><span class="annottext">dir :: TestName
</span><a href="#local-6989586621679281648"><span class="hs-identifier hs-var hs-var">dir</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/filepath-1.4.2.1/src"><span class="hs-identifier hs-var">takeDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281658"><span class="hs-identifier hs-var">goldenFile</span></a></span><span>
</span><span id="line-141"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; TestName -&gt; IO ()
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/directory-1.3.6.0/src"><span class="hs-identifier hs-var">createDirectoryIfMissing</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var">True</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281648"><span class="hs-identifier hs-var">dir</span></a></span><span>
</span><span id="line-142"></span><span>        </span><span class="annot"><span class="annottext">TestName -&gt; ByteString -&gt; IO ()
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier hs-var">Strict.writeFile</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281658"><span class="hs-identifier hs-var">goldenFile</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281649"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-143"></span><span>
</span><span id="line-144"></span><span>    </span><span class="annot"><a href="#local-6989586621679281652"><span class="hs-identifier hs-type">actualValue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier hs-type">Strict.ByteString</span></a></span><span>
</span><span id="line-145"></span><span>    </span><span id="local-6989586621679281652"><span class="annot"><span class="annottext">actualValue :: ByteString
</span><a href="#local-6989586621679281652"><span class="hs-identifier hs-var hs-var">actualValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; ByteString
</span><span class="hs-identifier hs-var">CBOR.toStrictByteString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Encoding
</span><a href="#local-6989586621679281659"><span class="hs-identifier hs-var">enc</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679281660"><span class="hs-identifier hs-var">example</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span>    </span><span class="annot"><a href="#local-6989586621679281655"><span class="hs-identifier hs-type">exceptionToByteString</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">SomeException</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier hs-type">Strict.ByteString</span></a></span><span>
</span><span id="line-148"></span><span>    </span><span id="local-6989586621679281655"><span class="annot"><span class="annottext">exceptionToByteString :: SomeException -&gt; ByteString
</span><a href="#local-6989586621679281655"><span class="hs-identifier hs-var hs-var">exceptionToByteString</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; ByteString
</span><span class="hs-identifier hs-var">BS.UTF8.fromString</span></span><span> </span><span class="annot"><span class="annottext">(TestName -&gt; ByteString)
-&gt; (SomeException -&gt; TestName) -&gt; SomeException -&gt; ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; TestName
forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span>    </span><span class="hs-comment">-- | Use 'ediff' ('ToExpr') to diff the 'FlatTerm' representation.</span><span>
</span><span id="line-151"></span><span>    </span><span class="annot"><a href="#local-6989586621679281651"><span class="hs-identifier hs-type">diff</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier hs-type">Strict.ByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier hs-type">Strict.ByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span>    </span><span id="local-6989586621679281651"><span class="annot"><span class="annottext">diff :: ByteString -&gt; ByteString -&gt; IO (Maybe TestName)
</span><a href="#local-6989586621679281651"><span class="hs-identifier hs-var hs-var">diff</span></a></span></span><span> </span><span id="local-6989586621679281641"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281641"><span class="hs-identifier hs-var">golden</span></a></span></span><span> </span><span id="local-6989586621679281640"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281640"><span class="hs-identifier hs-var">actual</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-153"></span><span>        </span><span id="local-6989586621679281639"><span class="annot"><span class="annottext">Either SomeException [TermToken]
</span><a href="#local-6989586621679281639"><span class="hs-identifier hs-var">actualRes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Either SomeException [TermToken]
 -&gt; Either SomeException [TermToken])
-&gt; IO (Either SomeException [TermToken])
-&gt; IO (Either SomeException [TermToken])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(SomeException -&gt; SomeException)
-&gt; Either SomeException [TermToken]
-&gt; Either SomeException [TermToken]
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679281638"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679281638"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">SomeException</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679281638"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span>                   </span><span class="annot"><span class="annottext">(IO (Either SomeException [TermToken])
 -&gt; IO (Either SomeException [TermToken]))
-&gt; (a -&gt; IO (Either SomeException [TermToken]))
-&gt; a
-&gt; IO (Either SomeException [TermToken])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IO [TermToken] -&gt; IO (Either SomeException [TermToken])
forall e a. Exception e =&gt; IO a -&gt; IO (Either e a)
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">try</span></a></span><span>
</span><span id="line-155"></span><span>                   </span><span class="annot"><span class="annottext">(IO [TermToken] -&gt; IO (Either SomeException [TermToken]))
-&gt; (a -&gt; IO [TermToken])
-&gt; a
-&gt; IO (Either SomeException [TermToken])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[TermToken] -&gt; IO [TermToken]
forall a. a -&gt; IO a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">evaluate</span></a></span><span>
</span><span id="line-156"></span><span>                   </span><span class="annot"><span class="annottext">([TermToken] -&gt; IO [TermToken])
-&gt; (a -&gt; [TermToken]) -&gt; a -&gt; IO [TermToken]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[TermToken] -&gt; [TermToken]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; t a
</span><span class="hs-identifier hs-var">forceElemsToWHNF</span></span><span>
</span><span id="line-157"></span><span>                   </span><span class="annot"><span class="annottext">([TermToken] -&gt; [TermToken])
-&gt; (a -&gt; [TermToken]) -&gt; a -&gt; [TermToken]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; [TermToken]
</span><span class="hs-identifier hs-var">CBOR.toFlatTerm</span></span><span>
</span><span id="line-158"></span><span>                   </span><span class="annot"><span class="annottext">(Encoding -&gt; [TermToken]) -&gt; (a -&gt; Encoding) -&gt; a -&gt; [TermToken]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Encoding
</span><a href="#local-6989586621679281659"><span class="hs-identifier hs-var">enc</span></a></span><span>
</span><span id="line-159"></span><span>                   </span><span class="annot"><span class="annottext">(a -&gt; IO (Either SomeException [TermToken]))
-&gt; a -&gt; IO (Either SomeException [TermToken])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679281660"><span class="hs-identifier hs-var">example</span></a></span><span>
</span><span id="line-160"></span><span>        </span><span class="annot"><span class="annottext">Maybe TestName -&gt; IO (Maybe TestName)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe TestName -&gt; IO (Maybe TestName))
-&gt; Maybe TestName -&gt; IO (Maybe TestName)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either SomeException [TermToken]
</span><a href="#local-6989586621679281639"><span class="hs-identifier hs-var">actualRes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either DeserialiseFailure [TermToken]
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">decodeAsFlatTerm</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281641"><span class="hs-identifier hs-var">golden</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-161"></span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679281636"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679281636"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679281635"><span class="annot"><span class="annottext">[TermToken]
</span><a href="#local-6989586621679281635"><span class="hs-identifier hs-var">goldenFlatTerm</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span>              </span><span class="hs-comment">-- Encoder threw an exception and the golden output was valid</span><span>
</span><span id="line-163"></span><span>              </span><span class="hs-comment">-- CBOR. However, sometimes the 'show'n exception is also valid</span><span>
</span><span id="line-164"></span><span>              </span><span class="hs-comment">-- CBOR. So if the exception and the golden output match, the test</span><span>
</span><span id="line-165"></span><span>              </span><span class="hs-comment">-- passes.</span><span>
</span><span id="line-166"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; ByteString
</span><a href="#local-6989586621679281655"><span class="hs-identifier hs-var">exceptionToByteString</span></a></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679281636"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281641"><span class="hs-identifier hs-var">golden</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe TestName
forall a. Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-167"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; Maybe TestName
forall a. a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(TestName -&gt; Maybe TestName) -&gt; TestName -&gt; Maybe TestName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[TestName] -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">unlines</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-168"></span><span>                </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Exception thrown by encoder doesn't match the golden CBOR output&quot;</span></span><span>
</span><span id="line-169"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Exception:&quot;</span></span><span>
</span><span id="line-170"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; TestName
forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679281636"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-171"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Golden term:&quot;</span></span><span>
</span><span id="line-172"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[TermToken] -&gt; TestName
forall a. Condense a =&gt; a -&gt; TestName
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">condense</span></a></span><span> </span><span class="annot"><span class="annottext">[TermToken]
</span><a href="#local-6989586621679281635"><span class="hs-identifier hs-var">goldenFlatTerm</span></a></span><span>
</span><span id="line-173"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-174"></span><span>
</span><span id="line-175"></span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679281632"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679281632"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="annot"><span class="annottext">DeserialiseFailure
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-176"></span><span>              </span><span class="hs-comment">-- Encoder threw an exception. The golden output was not valid</span><span>
</span><span id="line-177"></span><span>              </span><span class="hs-comment">-- CBOR and the bytestrings match: we expected the exception</span><span>
</span><span id="line-178"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; ByteString
</span><a href="#local-6989586621679281655"><span class="hs-identifier hs-var">exceptionToByteString</span></a></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679281632"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281641"><span class="hs-identifier hs-var">golden</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe TestName
forall a. Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-179"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; Maybe TestName
forall a. a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(TestName -&gt; Maybe TestName) -&gt; TestName -&gt; Maybe TestName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[TestName] -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">unlines</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-180"></span><span>                </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Exception thrown by encoder doesn't match the golden output&quot;</span></span><span>
</span><span id="line-181"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Exception:&quot;</span></span><span>
</span><span id="line-182"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; TestName
forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679281632"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-183"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Golden output:&quot;</span></span><span>
</span><span id="line-184"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; TestName
</span><span class="hs-identifier hs-var">BS.UTF8.toString</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281641"><span class="hs-identifier hs-var">golden</span></a></span><span>
</span><span id="line-185"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679281630"><span class="annot"><span class="annottext">[TermToken]
</span><a href="#local-6989586621679281630"><span class="hs-identifier hs-var">_actualFlatTerm</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679281629"><span class="annot"><span class="annottext">[TermToken]
</span><a href="#local-6989586621679281629"><span class="hs-identifier hs-var">_goldenFlatTerm</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281640"><span class="hs-identifier hs-var">actual</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281641"><span class="hs-identifier hs-var">golden</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe TestName
forall a. Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-189"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; Maybe TestName
forall a. a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(TestName -&gt; Maybe TestName) -&gt; TestName -&gt; Maybe TestName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[TestName] -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">unlines</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-190"></span><span>                </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Golden term /= actual term, diff golden actual:&quot;</span></span><span>
</span><span id="line-191"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CBORBytes -&gt; CBORBytes -&gt; TestName
forall a. ToExpr a =&gt; a -&gt; a -&gt; TestName
</span><a href="Test.Util.Serialisation.Golden.html#diffToExpr"><span class="hs-identifier hs-var">diffToExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; CBORBytes
</span><a href="Test.Util.Serialisation.Golden.html#CBORBytes"><span class="hs-identifier hs-var">CBORBytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281641"><span class="hs-identifier hs-var">golden</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; CBORBytes
</span><a href="Test.Util.Serialisation.Golden.html#CBORBytes"><span class="hs-identifier hs-var">CBORBytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281640"><span class="hs-identifier hs-var">actual</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-192"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679281626"><span class="annot"><span class="annottext">[TermToken]
</span><a href="#local-6989586621679281626"><span class="hs-identifier hs-var">actualFlatTerm</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="annot"><span class="annottext">DeserialiseFailure
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; Maybe TestName
forall a. a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(TestName -&gt; Maybe TestName) -&gt; TestName -&gt; Maybe TestName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[TestName] -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">unlines</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-195"></span><span>                </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Golden output /= actual term:&quot;</span></span><span>
</span><span id="line-196"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Golden output is not valid CBOR:&quot;</span></span><span>
</span><span id="line-197"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; TestName
</span><span class="hs-identifier hs-var">BS.UTF8.toString</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281641"><span class="hs-identifier hs-var">golden</span></a></span><span>
</span><span id="line-198"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Actual term:&quot;</span></span><span>
</span><span id="line-199"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[TermToken] -&gt; TestName
forall a. Condense a =&gt; a -&gt; TestName
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">condense</span></a></span><span> </span><span class="annot"><span class="annottext">[TermToken]
</span><a href="#local-6989586621679281626"><span class="hs-identifier hs-var">actualFlatTerm</span></a></span><span>
</span><span id="line-200"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-201"></span><span>
</span><span id="line-202"></span><span id="local-6989586621679281742"><span class="annot"><a href="Test.Util.Serialisation.Golden.html#goldenTests"><span class="hs-identifier hs-type">goldenTests</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-203"></span><span>     </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span>
</span><span id="line-204"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TestName</span></span><span>
</span><span id="line-205"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281742"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-206"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679281742"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Encoding</span></span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span>  </span><span class="hs-comment">-- ^ Folder containing the golden files</span><span>
</span><span id="line-208"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TestTree</span></span></span><span>
</span><span id="line-209"></span><span id="goldenTests"><span class="annot"><span class="annottext">goldenTests :: TestName -&gt; Labelled a -&gt; (a -&gt; Encoding) -&gt; TestName -&gt; TestTree
</span><a href="Test.Util.Serialisation.Golden.html#goldenTests"><span class="hs-identifier hs-var hs-var">goldenTests</span></a></span></span><span> </span><span id="local-6989586621679281624"><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281624"><span class="hs-identifier hs-var">testName</span></a></span></span><span> </span><span id="local-6989586621679281623"><span class="annot"><span class="annottext">Labelled a
</span><a href="#local-6989586621679281623"><span class="hs-identifier hs-var">examples</span></a></span></span><span> </span><span id="local-6989586621679281622"><span class="annot"><span class="annottext">a -&gt; Encoding
</span><a href="#local-6989586621679281622"><span class="hs-identifier hs-var">enc</span></a></span></span><span> </span><span id="local-6989586621679281621"><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281621"><span class="hs-identifier hs-var">goldenFolder</span></a></span></span><span>
</span><span id="line-210"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[Maybe TestName] -&gt; [Maybe TestName]
forall a. Eq a =&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nub</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe TestName]
</span><a href="#local-6989586621679281620"><span class="hs-identifier hs-var">labels</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe TestName] -&gt; [Maybe TestName] -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">/=</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe TestName]
</span><a href="#local-6989586621679281620"><span class="hs-identifier hs-var">labels</span></a></span><span>
</span><span id="line-211"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; TestTree
forall a. HasCallStack =&gt; TestName -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">(TestName -&gt; TestTree) -&gt; TestName -&gt; TestTree
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Examples with the same label for &quot;</span></span><span> </span><span class="annot"><span class="annottext">TestName -&gt; TestName -&gt; TestName
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281624"><span class="hs-identifier hs-var">testName</span></a></span><span>
</span><span id="line-212"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe TestName
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679281617"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679281617"><span class="hs-identifier hs-var">example</span></a></span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Labelled a
</span><a href="#local-6989586621679281623"><span class="hs-identifier hs-var">examples</span></a></span><span>
</span><span id="line-213"></span><span>    </span><span class="hs-comment">-- If there's just a single unlabelled example, no need for grouping,</span><span>
</span><span id="line-214"></span><span>    </span><span class="hs-comment">-- which makes the output more verbose.</span><span>
</span><span id="line-215"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; a -&gt; (a -&gt; Encoding) -&gt; TestName -&gt; TestTree
forall a. TestName -&gt; a -&gt; (a -&gt; Encoding) -&gt; TestName -&gt; TestTree
</span><a href="Test.Util.Serialisation.Golden.html#goldenTestCBOR"><span class="hs-identifier hs-var">goldenTestCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281624"><span class="hs-identifier hs-var">testName</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679281617"><span class="hs-identifier hs-var">example</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Encoding
</span><a href="#local-6989586621679281622"><span class="hs-identifier hs-var">enc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281621"><span class="hs-identifier hs-var">goldenFolder</span></a></span><span> </span><span class="annot"><span class="annottext">TestName -&gt; TestName -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/filepath-1.4.2.1/src"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281624"><span class="hs-identifier hs-var">testName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-216"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-217"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; [TestTree] -&gt; TestTree
</span><span class="hs-identifier hs-var">testGroup</span></span><span> </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281624"><span class="hs-identifier hs-var">testName</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-218"></span><span>        </span><span class="annot"><span class="annottext">TestName -&gt; a -&gt; (a -&gt; Encoding) -&gt; TestName -&gt; TestTree
forall a. TestName -&gt; a -&gt; (a -&gt; Encoding) -&gt; TestName -&gt; TestTree
</span><a href="Test.Util.Serialisation.Golden.html#goldenTestCBOR"><span class="hs-identifier hs-var">goldenTestCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281615"><span class="hs-identifier hs-var">testName'</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679281614"><span class="hs-identifier hs-var">example</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Encoding
</span><a href="#local-6989586621679281622"><span class="hs-identifier hs-var">enc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281621"><span class="hs-identifier hs-var">goldenFolder</span></a></span><span> </span><span class="annot"><span class="annottext">TestName -&gt; TestName -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/filepath-1.4.2.1/src"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281615"><span class="hs-identifier hs-var">testName'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-219"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679281613"><span class="annot"><span class="annottext">Maybe TestName
</span><a href="#local-6989586621679281613"><span class="hs-identifier hs-var">mbLabel</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679281614"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679281614"><span class="hs-identifier hs-var">example</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Labelled a
</span><a href="#local-6989586621679281623"><span class="hs-identifier hs-var">examples</span></a></span><span>
</span><span id="line-220"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679281615"><span class="annot"><span class="annottext">testName' :: TestName
</span><a href="#local-6989586621679281615"><span class="hs-identifier hs-var hs-var">testName'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe TestName
</span><a href="#local-6989586621679281613"><span class="hs-identifier hs-var">mbLabel</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-221"></span><span>              </span><span class="annot"><span class="annottext">Maybe TestName
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281624"><span class="hs-identifier hs-var">testName</span></a></span><span>
</span><span id="line-222"></span><span>              </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679281612"><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281612"><span class="hs-keyword hs-var">label</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281624"><span class="hs-identifier hs-var">testName</span></a></span><span> </span><span class="annot"><span class="annottext">TestName -&gt; TestName -&gt; TestName
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;_&quot;</span></span><span> </span><span class="annot"><span class="annottext">TestName -&gt; TestName -&gt; TestName
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281612"><span class="hs-keyword hs-var">label</span></a></span><span>
</span><span id="line-223"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-224"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-225"></span><span>    </span><span class="annot"><a href="#local-6989586621679281620"><span class="hs-identifier hs-type">labels</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-226"></span><span>    </span><span id="local-6989586621679281620"><span class="annot"><span class="annottext">labels :: [Maybe TestName]
</span><a href="#local-6989586621679281620"><span class="hs-identifier hs-var hs-var">labels</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Maybe TestName, a) -&gt; Maybe TestName)
-&gt; Labelled a -&gt; [Maybe TestName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe TestName, a) -&gt; Maybe TestName
forall a b. (a, b) -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">Labelled a
</span><a href="#local-6989586621679281623"><span class="hs-identifier hs-var">examples</span></a></span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Examples
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span class="hs-keyword">type</span><span> </span><span id="Labelled"><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-var">Labelled</span></a></span></span><span> </span><span id="local-6989586621679281611"><span class="annot"><a href="#local-6989586621679281611"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679281611"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span id="local-6989586621679281610"><span class="annot"><a href="Test.Util.Serialisation.Golden.html#unlabelled"><span class="hs-identifier hs-type">unlabelled</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679281610"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281610"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-235"></span><span id="unlabelled"><span class="annot"><span class="annottext">unlabelled :: a -&gt; Labelled a
</span><a href="Test.Util.Serialisation.Golden.html#unlabelled"><span class="hs-identifier hs-var hs-var">unlabelled</span></a></span></span><span> </span><span id="local-6989586621679281609"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679281609"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe TestName
forall a. Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679281609"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-236"></span><span>
</span><span id="line-237"></span><span id="local-6989586621679281608"><span class="annot"><a href="Test.Util.Serialisation.Golden.html#labelled"><span class="hs-identifier hs-type">labelled</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679281608"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281608"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-238"></span><span id="labelled"><span class="annot"><span class="annottext">labelled :: [(TestName, a)] -&gt; Labelled a
</span><a href="Test.Util.Serialisation.Golden.html#labelled"><span class="hs-identifier hs-var hs-var">labelled</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((TestName, a) -&gt; (Maybe TestName, a))
-&gt; [(TestName, a)] -&gt; Labelled a
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TestName -&gt; Maybe TestName)
-&gt; (TestName, a) -&gt; (Maybe TestName, a)
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">TestName -&gt; Maybe TestName
forall a. a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span class="hs-keyword">data</span><span> </span><span id="Examples"><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Examples"><span class="hs-identifier hs-var">Examples</span></a></span></span><span> </span><span id="local-6989586621679281784"><span class="annot"><a href="#local-6989586621679281784"><span class="hs-identifier hs-type">blk</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Examples"><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Examples"><span class="hs-identifier hs-var">Examples</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-241"></span><span>      </span><span id="exampleBlock"><span class="annot"><span class="annottext">Examples blk -&gt; Labelled blk
</span><a href="Test.Util.Serialisation.Golden.html#exampleBlock"><span class="hs-identifier hs-var hs-var">exampleBlock</span></a></span></span><span>            </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281784"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-242"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="exampleSerialisedBlock"><span class="annot"><span class="annottext">Examples blk -&gt; Labelled (Serialised blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleSerialisedBlock"><span class="hs-identifier hs-var hs-var">exampleSerialisedBlock</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-network-api-0.1.0.0/noopt/doc/html/ouroboros-network-api/src"><span class="hs-identifier hs-type">Serialised</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281784"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-243"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="exampleHeader"><span class="annot"><span class="annottext">Examples blk -&gt; Labelled (Header blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleHeader"><span class="hs-identifier hs-var hs-var">exampleHeader</span></a></span></span><span>           </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">Header</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281784"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-244"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="exampleSerialisedHeader"><span class="annot"><span class="annottext">Examples blk -&gt; Labelled (SerialisedHeader blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleSerialisedHeader"><span class="hs-identifier hs-var hs-var">exampleSerialisedHeader</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">SerialisedHeader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281784"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-245"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="exampleHeaderHash"><span class="annot"><span class="annottext">Examples blk -&gt; Labelled (HeaderHash blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleHeaderHash"><span class="hs-identifier hs-var hs-var">exampleHeaderHash</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-network-api-0.1.0.0/noopt/doc/html/ouroboros-network-api/src"><span class="hs-identifier hs-type">HeaderHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281784"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-246"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="exampleGenTx"><span class="annot"><span class="annottext">Examples blk -&gt; Labelled (GenTx blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleGenTx"><span class="hs-identifier hs-var hs-var">exampleGenTx</span></a></span></span><span>            </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">GenTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281784"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-247"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="exampleGenTxId"><span class="annot"><span class="annottext">Examples blk -&gt; Labelled (GenTxId blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleGenTxId"><span class="hs-identifier hs-var hs-var">exampleGenTxId</span></a></span></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">GenTxId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281784"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-248"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="exampleApplyTxErr"><span class="annot"><span class="annottext">Examples blk -&gt; Labelled (ApplyTxErr blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleApplyTxErr"><span class="hs-identifier hs-var hs-var">exampleApplyTxErr</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">ApplyTxErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281784"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-249"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="exampleQuery"><span class="annot"><span class="annottext">Examples blk -&gt; Labelled (SomeSecond BlockQuery blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleQuery"><span class="hs-identifier hs-var hs-var">exampleQuery</span></a></span></span><span>            </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">SomeSecond</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">BlockQuery</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281784"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-250"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="exampleResult"><span class="annot"><span class="annottext">Examples blk -&gt; Labelled (SomeResult blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleResult"><span class="hs-identifier hs-var hs-var">exampleResult</span></a></span></span><span>           </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Util.Serialisation.Roundtrip.html#SomeResult"><span class="hs-identifier hs-type">SomeResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281784"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="exampleAnnTip"><span class="annot"><span class="annottext">Examples blk -&gt; Labelled (AnnTip blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleAnnTip"><span class="hs-identifier hs-var hs-var">exampleAnnTip</span></a></span></span><span>           </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">AnnTip</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281784"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="exampleLedgerState"><span class="annot"><span class="annottext">Examples blk -&gt; Labelled (LedgerState blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleLedgerState"><span class="hs-identifier hs-var hs-var">exampleLedgerState</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281784"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="exampleChainDepState"><span class="annot"><span class="annottext">Examples blk -&gt; Labelled (ChainDepState (BlockProtocol blk))
</span><a href="Test.Util.Serialisation.Golden.html#exampleChainDepState"><span class="hs-identifier hs-var hs-var">exampleChainDepState</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">ChainDepState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">BlockProtocol</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281784"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-254"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="exampleExtLedgerState"><span class="annot"><span class="annottext">Examples blk -&gt; Labelled (ExtLedgerState blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleExtLedgerState"><span class="hs-identifier hs-var hs-var">exampleExtLedgerState</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">ExtLedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281784"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-255"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="exampleSlotNo"><span class="annot"><span class="annottext">Examples blk -&gt; Labelled SlotNo
</span><a href="Test.Util.Serialisation.Golden.html#exampleSlotNo"><span class="hs-identifier hs-var hs-var">exampleSlotNo</span></a></span></span><span>           </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span>
</span><span id="line-256"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-257"></span><span>
</span><span id="line-258"></span><span id="local-6989586621679281591"><span class="annot"><a href="Test.Util.Serialisation.Golden.html#emptyExamples"><span class="hs-identifier hs-type">emptyExamples</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Examples"><span class="hs-identifier hs-type">Examples</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281591"><span class="hs-identifier hs-type">blk</span></a></span></span><span>
</span><span id="line-259"></span><span id="emptyExamples"><span class="annot"><span class="annottext">emptyExamples :: Examples blk
</span><a href="Test.Util.Serialisation.Golden.html#emptyExamples"><span class="hs-identifier hs-var hs-var">emptyExamples</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Examples :: forall blk.
Labelled blk
-&gt; Labelled (Serialised blk)
-&gt; Labelled (Header blk)
-&gt; Labelled (SerialisedHeader blk)
-&gt; Labelled (HeaderHash blk)
-&gt; Labelled (GenTx blk)
-&gt; Labelled (GenTxId blk)
-&gt; Labelled (ApplyTxErr blk)
-&gt; Labelled (SomeSecond BlockQuery blk)
-&gt; Labelled (SomeResult blk)
-&gt; Labelled (AnnTip blk)
-&gt; Labelled (LedgerState blk)
-&gt; Labelled (ChainDepState (BlockProtocol blk))
-&gt; Labelled (ExtLedgerState blk)
-&gt; Labelled SlotNo
-&gt; Examples blk
</span><a href="Test.Util.Serialisation.Golden.html#Examples"><span class="hs-identifier hs-type">Examples</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-260"></span><span>      </span><span class="annot"><span class="annottext">exampleBlock :: Labelled blk
</span><a href="Test.Util.Serialisation.Golden.html#exampleBlock"><span class="hs-identifier hs-var">exampleBlock</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Labelled blk
forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-261"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleSerialisedBlock :: Labelled (Serialised blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleSerialisedBlock"><span class="hs-identifier hs-var">exampleSerialisedBlock</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Labelled (Serialised blk)
forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-262"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleHeader :: Labelled (Header blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleHeader"><span class="hs-identifier hs-var">exampleHeader</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Labelled (Header blk)
forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-263"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleSerialisedHeader :: Labelled (SerialisedHeader blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleSerialisedHeader"><span class="hs-identifier hs-var">exampleSerialisedHeader</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Labelled (SerialisedHeader blk)
forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-264"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleHeaderHash :: Labelled (HeaderHash blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleHeaderHash"><span class="hs-identifier hs-var">exampleHeaderHash</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Labelled (HeaderHash blk)
forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-265"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleGenTx :: Labelled (GenTx blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleGenTx"><span class="hs-identifier hs-var">exampleGenTx</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Labelled (GenTx blk)
forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-266"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleGenTxId :: Labelled (GenTxId blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleGenTxId"><span class="hs-identifier hs-var">exampleGenTxId</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Labelled (GenTxId blk)
forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-267"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleApplyTxErr :: Labelled (ApplyTxErr blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleApplyTxErr"><span class="hs-identifier hs-var">exampleApplyTxErr</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Labelled (ApplyTxErr blk)
forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-268"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleQuery :: Labelled (SomeSecond BlockQuery blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleQuery"><span class="hs-identifier hs-var">exampleQuery</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Labelled (SomeSecond BlockQuery blk)
forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-269"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleResult :: Labelled (SomeResult blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleResult"><span class="hs-identifier hs-var">exampleResult</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Labelled (SomeResult blk)
forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-270"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleAnnTip :: Labelled (AnnTip blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleAnnTip"><span class="hs-identifier hs-var">exampleAnnTip</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Labelled (AnnTip blk)
forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-271"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleLedgerState :: Labelled (LedgerState blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleLedgerState"><span class="hs-identifier hs-var">exampleLedgerState</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Labelled (LedgerState blk)
forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-272"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleChainDepState :: Labelled (ChainDepState (BlockProtocol blk))
</span><a href="Test.Util.Serialisation.Golden.html#exampleChainDepState"><span class="hs-identifier hs-var">exampleChainDepState</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Labelled (ChainDepState (BlockProtocol blk))
forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-273"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleExtLedgerState :: Labelled (ExtLedgerState blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleExtLedgerState"><span class="hs-identifier hs-var">exampleExtLedgerState</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Labelled (ExtLedgerState blk)
forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-274"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleSlotNo :: Labelled SlotNo
</span><a href="Test.Util.Serialisation.Golden.html#exampleSlotNo"><span class="hs-identifier hs-var">exampleSlotNo</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Labelled SlotNo
forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-275"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-276"></span><span>
</span><span id="line-277"></span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#combineExamples"><span class="hs-identifier hs-type">combineExamples</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-278"></span><span>     </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679281774"><span class="annot"><a href="#local-6989586621679281774"><span class="hs-identifier hs-type">blk</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-279"></span><span>     </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679281782"><span class="annot"><a href="#local-6989586621679281782"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281782"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281782"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281782"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-280"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Examples"><span class="hs-identifier hs-type">Examples</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281774"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-281"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Examples"><span class="hs-identifier hs-type">Examples</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281774"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-282"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Examples"><span class="hs-identifier hs-type">Examples</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281774"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-283"></span><span id="combineExamples"><span class="annot"><span class="annottext">combineExamples :: (forall a. Labelled a -&gt; Labelled a -&gt; Labelled a)
-&gt; Examples blk -&gt; Examples blk -&gt; Examples blk
</span><a href="Test.Util.Serialisation.Golden.html#combineExamples"><span class="hs-identifier hs-var hs-var">combineExamples</span></a></span></span><span> </span><span id="local-6989586621679281589"><span class="annot"><span class="annottext">forall a. Labelled a -&gt; Labelled a -&gt; Labelled a
</span><a href="#local-6989586621679281589"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679281588"><span class="annot"><span class="annottext">Examples blk
</span><a href="#local-6989586621679281588"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621679281587"><span class="annot"><span class="annottext">Examples blk
</span><a href="#local-6989586621679281587"><span class="hs-identifier hs-var">e2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Examples :: forall blk.
Labelled blk
-&gt; Labelled (Serialised blk)
-&gt; Labelled (Header blk)
-&gt; Labelled (SerialisedHeader blk)
-&gt; Labelled (HeaderHash blk)
-&gt; Labelled (GenTx blk)
-&gt; Labelled (GenTxId blk)
-&gt; Labelled (ApplyTxErr blk)
-&gt; Labelled (SomeSecond BlockQuery blk)
-&gt; Labelled (SomeResult blk)
-&gt; Labelled (AnnTip blk)
-&gt; Labelled (LedgerState blk)
-&gt; Labelled (ChainDepState (BlockProtocol blk))
-&gt; Labelled (ExtLedgerState blk)
-&gt; Labelled SlotNo
-&gt; Examples blk
</span><a href="Test.Util.Serialisation.Golden.html#Examples"><span class="hs-identifier hs-type">Examples</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-284"></span><span>      </span><span class="annot"><span class="annottext">exampleBlock :: Labelled blk
</span><a href="Test.Util.Serialisation.Golden.html#exampleBlock"><span class="hs-identifier hs-var">exampleBlock</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Examples blk -&gt; Labelled blk) -&gt; Labelled blk
forall a. (Examples blk -&gt; Labelled a) -&gt; Labelled a
</span><a href="#local-6989586621679281586"><span class="hs-identifier hs-var">combine</span></a></span><span> </span><span class="annot"><span class="annottext">Examples blk -&gt; Labelled blk
forall blk. Examples blk -&gt; Labelled blk
</span><a href="Test.Util.Serialisation.Golden.html#exampleBlock"><span class="hs-identifier hs-var hs-var">exampleBlock</span></a></span><span>
</span><span id="line-285"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleSerialisedBlock :: Labelled (Serialised blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleSerialisedBlock"><span class="hs-identifier hs-var">exampleSerialisedBlock</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Examples blk -&gt; Labelled (Serialised blk))
-&gt; Labelled (Serialised blk)
forall a. (Examples blk -&gt; Labelled a) -&gt; Labelled a
</span><a href="#local-6989586621679281586"><span class="hs-identifier hs-var">combine</span></a></span><span> </span><span class="annot"><span class="annottext">Examples blk -&gt; Labelled (Serialised blk)
forall blk. Examples blk -&gt; Labelled (Serialised blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleSerialisedBlock"><span class="hs-identifier hs-var hs-var">exampleSerialisedBlock</span></a></span><span>
</span><span id="line-286"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleHeader :: Labelled (Header blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleHeader"><span class="hs-identifier hs-var">exampleHeader</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Examples blk -&gt; Labelled (Header blk)) -&gt; Labelled (Header blk)
forall a. (Examples blk -&gt; Labelled a) -&gt; Labelled a
</span><a href="#local-6989586621679281586"><span class="hs-identifier hs-var">combine</span></a></span><span> </span><span class="annot"><span class="annottext">Examples blk -&gt; Labelled (Header blk)
forall blk. Examples blk -&gt; Labelled (Header blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleHeader"><span class="hs-identifier hs-var hs-var">exampleHeader</span></a></span><span>
</span><span id="line-287"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleSerialisedHeader :: Labelled (SerialisedHeader blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleSerialisedHeader"><span class="hs-identifier hs-var">exampleSerialisedHeader</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Examples blk -&gt; Labelled (SerialisedHeader blk))
-&gt; Labelled (SerialisedHeader blk)
forall a. (Examples blk -&gt; Labelled a) -&gt; Labelled a
</span><a href="#local-6989586621679281586"><span class="hs-identifier hs-var">combine</span></a></span><span> </span><span class="annot"><span class="annottext">Examples blk -&gt; Labelled (SerialisedHeader blk)
forall blk. Examples blk -&gt; Labelled (SerialisedHeader blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleSerialisedHeader"><span class="hs-identifier hs-var hs-var">exampleSerialisedHeader</span></a></span><span>
</span><span id="line-288"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleHeaderHash :: Labelled (HeaderHash blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleHeaderHash"><span class="hs-identifier hs-var">exampleHeaderHash</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Examples blk -&gt; Labelled (HeaderHash blk))
-&gt; Labelled (HeaderHash blk)
forall a. (Examples blk -&gt; Labelled a) -&gt; Labelled a
</span><a href="#local-6989586621679281586"><span class="hs-identifier hs-var">combine</span></a></span><span> </span><span class="annot"><span class="annottext">Examples blk -&gt; Labelled (HeaderHash blk)
forall blk. Examples blk -&gt; Labelled (HeaderHash blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleHeaderHash"><span class="hs-identifier hs-var hs-var">exampleHeaderHash</span></a></span><span>
</span><span id="line-289"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleGenTx :: Labelled (GenTx blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleGenTx"><span class="hs-identifier hs-var">exampleGenTx</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Examples blk -&gt; Labelled (GenTx blk)) -&gt; Labelled (GenTx blk)
forall a. (Examples blk -&gt; Labelled a) -&gt; Labelled a
</span><a href="#local-6989586621679281586"><span class="hs-identifier hs-var">combine</span></a></span><span> </span><span class="annot"><span class="annottext">Examples blk -&gt; Labelled (GenTx blk)
forall blk. Examples blk -&gt; Labelled (GenTx blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleGenTx"><span class="hs-identifier hs-var hs-var">exampleGenTx</span></a></span><span>
</span><span id="line-290"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleGenTxId :: Labelled (GenTxId blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleGenTxId"><span class="hs-identifier hs-var">exampleGenTxId</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Examples blk -&gt; Labelled (GenTxId blk)) -&gt; Labelled (GenTxId blk)
forall a. (Examples blk -&gt; Labelled a) -&gt; Labelled a
</span><a href="#local-6989586621679281586"><span class="hs-identifier hs-var">combine</span></a></span><span> </span><span class="annot"><span class="annottext">Examples blk -&gt; Labelled (GenTxId blk)
forall blk. Examples blk -&gt; Labelled (GenTxId blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleGenTxId"><span class="hs-identifier hs-var hs-var">exampleGenTxId</span></a></span><span>
</span><span id="line-291"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleApplyTxErr :: Labelled (ApplyTxErr blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleApplyTxErr"><span class="hs-identifier hs-var">exampleApplyTxErr</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Examples blk -&gt; Labelled (ApplyTxErr blk))
-&gt; Labelled (ApplyTxErr blk)
forall a. (Examples blk -&gt; Labelled a) -&gt; Labelled a
</span><a href="#local-6989586621679281586"><span class="hs-identifier hs-var">combine</span></a></span><span> </span><span class="annot"><span class="annottext">Examples blk -&gt; Labelled (ApplyTxErr blk)
forall blk. Examples blk -&gt; Labelled (ApplyTxErr blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleApplyTxErr"><span class="hs-identifier hs-var hs-var">exampleApplyTxErr</span></a></span><span>
</span><span id="line-292"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleQuery :: Labelled (SomeSecond BlockQuery blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleQuery"><span class="hs-identifier hs-var">exampleQuery</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Examples blk -&gt; Labelled (SomeSecond BlockQuery blk))
-&gt; Labelled (SomeSecond BlockQuery blk)
forall a. (Examples blk -&gt; Labelled a) -&gt; Labelled a
</span><a href="#local-6989586621679281586"><span class="hs-identifier hs-var">combine</span></a></span><span> </span><span class="annot"><span class="annottext">Examples blk -&gt; Labelled (SomeSecond BlockQuery blk)
forall blk. Examples blk -&gt; Labelled (SomeSecond BlockQuery blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleQuery"><span class="hs-identifier hs-var hs-var">exampleQuery</span></a></span><span>
</span><span id="line-293"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleResult :: Labelled (SomeResult blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleResult"><span class="hs-identifier hs-var">exampleResult</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Examples blk -&gt; Labelled (SomeResult blk))
-&gt; Labelled (SomeResult blk)
forall a. (Examples blk -&gt; Labelled a) -&gt; Labelled a
</span><a href="#local-6989586621679281586"><span class="hs-identifier hs-var">combine</span></a></span><span> </span><span class="annot"><span class="annottext">Examples blk -&gt; Labelled (SomeResult blk)
forall blk. Examples blk -&gt; Labelled (SomeResult blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleResult"><span class="hs-identifier hs-var hs-var">exampleResult</span></a></span><span>
</span><span id="line-294"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleAnnTip :: Labelled (AnnTip blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleAnnTip"><span class="hs-identifier hs-var">exampleAnnTip</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Examples blk -&gt; Labelled (AnnTip blk)) -&gt; Labelled (AnnTip blk)
forall a. (Examples blk -&gt; Labelled a) -&gt; Labelled a
</span><a href="#local-6989586621679281586"><span class="hs-identifier hs-var">combine</span></a></span><span> </span><span class="annot"><span class="annottext">Examples blk -&gt; Labelled (AnnTip blk)
forall blk. Examples blk -&gt; Labelled (AnnTip blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleAnnTip"><span class="hs-identifier hs-var hs-var">exampleAnnTip</span></a></span><span>
</span><span id="line-295"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleLedgerState :: Labelled (LedgerState blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleLedgerState"><span class="hs-identifier hs-var">exampleLedgerState</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Examples blk -&gt; Labelled (LedgerState blk))
-&gt; Labelled (LedgerState blk)
forall a. (Examples blk -&gt; Labelled a) -&gt; Labelled a
</span><a href="#local-6989586621679281586"><span class="hs-identifier hs-var">combine</span></a></span><span> </span><span class="annot"><span class="annottext">Examples blk -&gt; Labelled (LedgerState blk)
forall blk. Examples blk -&gt; Labelled (LedgerState blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleLedgerState"><span class="hs-identifier hs-var hs-var">exampleLedgerState</span></a></span><span>
</span><span id="line-296"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleChainDepState :: Labelled (ChainDepState (BlockProtocol blk))
</span><a href="Test.Util.Serialisation.Golden.html#exampleChainDepState"><span class="hs-identifier hs-var">exampleChainDepState</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Examples blk -&gt; Labelled (ChainDepState (BlockProtocol blk)))
-&gt; Labelled (ChainDepState (BlockProtocol blk))
forall a. (Examples blk -&gt; Labelled a) -&gt; Labelled a
</span><a href="#local-6989586621679281586"><span class="hs-identifier hs-var">combine</span></a></span><span> </span><span class="annot"><span class="annottext">Examples blk -&gt; Labelled (ChainDepState (BlockProtocol blk))
forall blk.
Examples blk -&gt; Labelled (ChainDepState (BlockProtocol blk))
</span><a href="Test.Util.Serialisation.Golden.html#exampleChainDepState"><span class="hs-identifier hs-var hs-var">exampleChainDepState</span></a></span><span>
</span><span id="line-297"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleExtLedgerState :: Labelled (ExtLedgerState blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleExtLedgerState"><span class="hs-identifier hs-var">exampleExtLedgerState</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Examples blk -&gt; Labelled (ExtLedgerState blk))
-&gt; Labelled (ExtLedgerState blk)
forall a. (Examples blk -&gt; Labelled a) -&gt; Labelled a
</span><a href="#local-6989586621679281586"><span class="hs-identifier hs-var">combine</span></a></span><span> </span><span class="annot"><span class="annottext">Examples blk -&gt; Labelled (ExtLedgerState blk)
forall blk. Examples blk -&gt; Labelled (ExtLedgerState blk)
</span><a href="Test.Util.Serialisation.Golden.html#exampleExtLedgerState"><span class="hs-identifier hs-var hs-var">exampleExtLedgerState</span></a></span><span>
</span><span id="line-298"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">exampleSlotNo :: Labelled SlotNo
</span><a href="Test.Util.Serialisation.Golden.html#exampleSlotNo"><span class="hs-identifier hs-var">exampleSlotNo</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Examples blk -&gt; Labelled SlotNo) -&gt; Labelled SlotNo
forall a. (Examples blk -&gt; Labelled a) -&gt; Labelled a
</span><a href="#local-6989586621679281586"><span class="hs-identifier hs-var">combine</span></a></span><span> </span><span class="annot"><span class="annottext">Examples blk -&gt; Labelled SlotNo
forall blk. Examples blk -&gt; Labelled SlotNo
</span><a href="Test.Util.Serialisation.Golden.html#exampleSlotNo"><span class="hs-identifier hs-var hs-var">exampleSlotNo</span></a></span><span>
</span><span id="line-299"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-300"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-301"></span><span>    </span><span id="local-6989586621679281780"><span class="annot"><a href="#local-6989586621679281586"><span class="hs-identifier hs-type">combine</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Examples"><span class="hs-identifier hs-type">Examples</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281774"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281780"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281780"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-302"></span><span>    </span><span id="local-6989586621679281586"><span class="annot"><span class="annottext">combine :: (Examples blk -&gt; Labelled a) -&gt; Labelled a
</span><a href="#local-6989586621679281586"><span class="hs-identifier hs-var hs-var">combine</span></a></span></span><span> </span><span id="local-6989586621679281585"><span class="annot"><span class="annottext">Examples blk -&gt; Labelled a
</span><a href="#local-6989586621679281585"><span class="hs-identifier hs-var">getField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Labelled a -&gt; Labelled a -&gt; Labelled a
forall a. Labelled a -&gt; Labelled a -&gt; Labelled a
</span><a href="#local-6989586621679281589"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Examples blk -&gt; Labelled a
</span><a href="#local-6989586621679281585"><span class="hs-identifier hs-var">getField</span></a></span><span> </span><span class="annot"><span class="annottext">Examples blk
</span><a href="#local-6989586621679281588"><span class="hs-identifier hs-var">e1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Examples blk -&gt; Labelled a
</span><a href="#local-6989586621679281585"><span class="hs-identifier hs-var">getField</span></a></span><span> </span><span class="annot"><span class="annottext">Examples blk
</span><a href="#local-6989586621679281587"><span class="hs-identifier hs-var">e2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-303"></span><span>
</span><span id="line-304"></span><span id="local-6989586621679281584"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679281579"><span id="local-6989586621679281581"><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Examples"><span class="hs-identifier hs-type">Examples</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281584"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-305"></span><span>  </span><span id="local-6989586621679281577"><span class="annot"><span class="annottext">&lt;&gt; :: Examples blk -&gt; Examples blk -&gt; Examples blk
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">(&lt;&gt;)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall a. Labelled a -&gt; Labelled a -&gt; Labelled a)
-&gt; Examples blk -&gt; Examples blk -&gt; Examples blk
forall blk.
(forall a. Labelled a -&gt; Labelled a -&gt; Labelled a)
-&gt; Examples blk -&gt; Examples blk -&gt; Examples blk
</span><a href="Test.Util.Serialisation.Golden.html#combineExamples"><span class="hs-identifier hs-var">combineExamples</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
forall a. Labelled a -&gt; Labelled a -&gt; Labelled a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">(&lt;&gt;)</span></a></span></span><span>
</span><span id="line-306"></span><span>
</span><span id="line-307"></span><span id="local-6989586621679281576"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679281571"><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Examples"><span class="hs-identifier hs-type">Examples</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281576"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-308"></span><span>  </span><span id="local-6989586621679281569"><span class="annot"><span class="annottext">mempty :: Examples blk
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Examples blk
forall blk. Examples blk
</span><a href="Test.Util.Serialisation.Golden.html#emptyExamples"><span class="hs-identifier hs-var">emptyExamples</span></a></span><span>
</span><span id="line-309"></span><span>  </span><span id="local-6989586621679281568"><span class="annot"><span class="annottext">mappend :: Examples blk -&gt; Examples blk -&gt; Examples blk
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">mappend</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Examples blk -&gt; Examples blk -&gt; Examples blk
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">(&lt;&gt;)</span></a></span></span><span>
</span><span id="line-310"></span><span>
</span><span id="line-311"></span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#mapExamples"><span class="hs-identifier hs-type">mapExamples</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-312"></span><span>     </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679281766"><span class="annot"><a href="#local-6989586621679281766"><span class="hs-identifier hs-type">blk</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-313"></span><span>     </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679281772"><span class="annot"><a href="#local-6989586621679281772"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281772"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281772"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-314"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Examples"><span class="hs-identifier hs-type">Examples</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281766"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-315"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Examples"><span class="hs-identifier hs-type">Examples</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281766"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-316"></span><span id="mapExamples"><span class="annot"><span class="annottext">mapExamples :: (forall a. Labelled a -&gt; Labelled a)
-&gt; Examples blk -&gt; Examples blk
</span><a href="Test.Util.Serialisation.Golden.html#mapExamples"><span class="hs-identifier hs-var hs-var">mapExamples</span></a></span></span><span> </span><span id="local-6989586621679281567"><span class="annot"><span class="annottext">forall a. Labelled a -&gt; Labelled a
</span><a href="#local-6989586621679281567"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall a. Labelled a -&gt; Labelled a -&gt; Labelled a)
-&gt; Examples blk -&gt; Examples blk -&gt; Examples blk
forall blk.
(forall a. Labelled a -&gt; Labelled a -&gt; Labelled a)
-&gt; Examples blk -&gt; Examples blk -&gt; Examples blk
</span><a href="Test.Util.Serialisation.Golden.html#combineExamples"><span class="hs-identifier hs-var">combineExamples</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Labelled a -&gt; Labelled a)
-&gt; Labelled a -&gt; Labelled a -&gt; Labelled a
forall a b. a -&gt; b -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Labelled a -&gt; Labelled a
forall a. Labelled a -&gt; Labelled a
</span><a href="#local-6989586621679281567"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Examples blk
forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-317"></span><span>
</span><span id="line-318"></span><span class="hs-comment">-- | Add the given prefix to each labelled example.</span><span>
</span><span id="line-319"></span><span class="hs-comment">--</span><span>
</span><span id="line-320"></span><span class="hs-comment">-- When a label is empty, the prefix is used as the label. If the label is not</span><span>
</span><span id="line-321"></span><span class="hs-comment">-- empty, the prefix and @_@ are prepended.</span><span>
</span><span id="line-322"></span><span id="local-6989586621679281565"><span class="annot"><a href="Test.Util.Serialisation.Golden.html#prefixExamples"><span class="hs-identifier hs-type">prefixExamples</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Examples"><span class="hs-identifier hs-type">Examples</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281565"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Examples"><span class="hs-identifier hs-type">Examples</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281565"><span class="hs-identifier hs-type">blk</span></a></span></span><span>
</span><span id="line-323"></span><span id="prefixExamples"><span class="annot"><span class="annottext">prefixExamples :: TestName -&gt; Examples blk -&gt; Examples blk
</span><a href="Test.Util.Serialisation.Golden.html#prefixExamples"><span class="hs-identifier hs-var hs-var">prefixExamples</span></a></span></span><span> </span><span id="local-6989586621679281564"><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281564"><span class="hs-identifier hs-var">prefix</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall a. Labelled a -&gt; Labelled a)
-&gt; Examples blk -&gt; Examples blk
forall blk.
(forall a. Labelled a -&gt; Labelled a)
-&gt; Examples blk -&gt; Examples blk
</span><a href="Test.Util.Serialisation.Golden.html#mapExamples"><span class="hs-identifier hs-var">mapExamples</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Labelled a -&gt; Labelled a
</span><a href="#local-6989586621679281563"><span class="hs-identifier hs-var">addPrefix</span></a></span><span>
</span><span id="line-324"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-325"></span><span>    </span><span id="local-6989586621679281562"><span class="annot"><a href="#local-6989586621679281563"><span class="hs-identifier hs-type">addPrefix</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281562"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281562"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-326"></span><span>    </span><span id="local-6989586621679281563"><span class="annot"><span class="annottext">addPrefix :: Labelled a -&gt; Labelled a
</span><a href="#local-6989586621679281563"><span class="hs-identifier hs-var hs-var">addPrefix</span></a></span></span><span> </span><span id="local-6989586621679281561"><span class="annot"><span class="annottext">Labelled a
</span><a href="#local-6989586621679281561"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-327"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TestName -&gt; Maybe TestName
forall a. a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281560"><span class="hs-keyword hs-var">label</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679281559"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-328"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679281558"><span class="annot"><span class="annottext">Maybe TestName
</span><a href="#local-6989586621679281558"><span class="hs-identifier hs-var">mbLabel</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679281559"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679281559"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Labelled a
</span><a href="#local-6989586621679281561"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-329"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679281560"><span class="annot"><span class="annottext">label :: TestName
</span><a href="#local-6989586621679281560"><span class="hs-keyword hs-var hs-var">label</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe TestName
</span><a href="#local-6989586621679281558"><span class="hs-identifier hs-var">mbLabel</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-330"></span><span>                </span><span class="annot"><span class="annottext">Maybe TestName
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281564"><span class="hs-identifier hs-var">prefix</span></a></span><span>
</span><span id="line-331"></span><span>                </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679281557"><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281557"><span class="hs-identifier hs-var">lbl</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281564"><span class="hs-identifier hs-var">prefix</span></a></span><span> </span><span class="annot"><span class="annottext">TestName -&gt; TestName -&gt; TestName
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;_&quot;</span></span><span> </span><span class="annot"><span class="annottext">TestName -&gt; TestName -&gt; TestName
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281557"><span class="hs-identifier hs-var">lbl</span></a></span><span>
</span><span id="line-332"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-333"></span><span>
</span><span id="line-334"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Skeletons
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-337"></span><span>
</span><span id="line-338"></span><span class="hs-comment">-- | Convert 'a' to a 'FilePath' that can be used as the directory containing</span><span>
</span><span id="line-339"></span><span class="hs-comment">-- golden output files.</span><span>
</span><span id="line-340"></span><span class="hs-comment">--</span><span>
</span><span id="line-341"></span><span class="hs-comment">-- This class allows overriding the 'Show' in cases where that output is not</span><span>
</span><span id="line-342"></span><span class="hs-comment">-- suitable to be used as a directory.</span><span>
</span><span id="line-343"></span><span class="hs-comment">--</span><span>
</span><span id="line-344"></span><span class="hs-comment">-- For example, the 'Show' output for a hard fork enabled 'NodeToNodeVersion'</span><span>
</span><span id="line-345"></span><span class="hs-comment">-- will contain colons, asterisks, spaces, parentheses, ... and other</span><span>
</span><span id="line-346"></span><span class="hs-comment">-- characters that we don't want to use for a directory name. For instance</span><span>
</span><span id="line-347"></span><span class="hs-comment">-- colons cannot be used in Windows file/folder names.</span><span>
</span><span id="line-348"></span><span class="hs-keyword">class</span><span> </span><span id="ToGoldenDirectory"><span class="annot"><a href="Test.Util.Serialisation.Golden.html#ToGoldenDirectory"><span class="hs-identifier hs-var">ToGoldenDirectory</span></a></span></span><span> </span><span id="local-6989586621679281764"><span class="annot"><a href="#local-6989586621679281764"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-349"></span><span>  </span><span id="toGoldenDirectory"><span class="annot"><a href="Test.Util.Serialisation.Golden.html#toGoldenDirectory"><span class="hs-identifier hs-type">toGoldenDirectory</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679281764"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-350"></span><span>
</span><span id="line-351"></span><span>  </span><span class="hs-keyword">default</span><span> </span><span id="toGoldenDirectory"><span class="annot"><a href="Test.Util.Serialisation.Golden.html#toGoldenDirectory"><span class="hs-identifier hs-type">toGoldenDirectory</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281764"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679281764"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-352"></span><span>  </span><span id="local-6989586621679281555"><span class="annot"><a href="Test.Util.Serialisation.Golden.html#toGoldenDirectory"><span class="hs-identifier hs-var hs-var">toGoldenDirectory</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; TestName
forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span></span><span>
</span><span id="line-353"></span><span>
</span><span id="line-354"></span><span class="hs-comment">-- | Golden tests for all things we serialise to disk and send across the</span><span>
</span><span id="line-355"></span><span class="hs-comment">-- network.</span><span>
</span><span id="line-356"></span><span class="hs-comment">--</span><span>
</span><span id="line-357"></span><span class="hs-comment">-- Exceptions: when an encoder throws an exception, which can happen when</span><span>
</span><span id="line-358"></span><span class="hs-comment">-- serialising a Shelley header in combination with</span><span>
</span><span id="line-359"></span><span class="hs-comment">-- 'CardanoNodeToNodeVersion1', we 'show' the exception and use that as the</span><span>
</span><span id="line-360"></span><span class="hs-comment">-- output.</span><span>
</span><span id="line-361"></span><span id="local-6989586621679281554"><span class="annot"><a href="Test.Util.Serialisation.Golden.html#goldenTest_all"><span class="hs-identifier hs-type">goldenTest_all</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-362"></span><span>     </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">SerialiseDiskConstraints</span></a></span><span>         </span><span class="annot"><a href="#local-6989586621679281554"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-363"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">SerialiseNodeToNodeConstraints</span></a></span><span>   </span><span class="annot"><a href="#local-6989586621679281554"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-364"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">SerialiseNodeToClientConstraints</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281554"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-365"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">SupportedNetworkProtocolVersion</span></a></span><span>  </span><span class="annot"><a href="#local-6989586621679281554"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-366"></span><span>
</span><span id="line-367"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#ToGoldenDirectory"><span class="hs-identifier hs-type">ToGoldenDirectory</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">BlockNodeToNodeVersion</span></a></span><span>   </span><span class="annot"><a href="#local-6989586621679281554"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-368"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#ToGoldenDirectory"><span class="hs-identifier hs-type">ToGoldenDirectory</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">QueryVersion</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">BlockNodeToClientVersion</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281554"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-369"></span><span>
</span><span id="line-370"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span>
</span><span id="line-371"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-372"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">CodecConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281554"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-373"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-374"></span><span>     </span><span class="hs-comment">-- ^ Path relative to the root of the repository that contains the golden</span><span>
</span><span id="line-375"></span><span>     </span><span class="hs-comment">-- files</span><span>
</span><span id="line-376"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Examples"><span class="hs-identifier hs-type">Examples</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281554"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-377"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TestTree</span></span></span><span>
</span><span id="line-378"></span><span id="goldenTest_all"><span class="annot"><span class="annottext">goldenTest_all :: CodecConfig blk -&gt; TestName -&gt; Examples blk -&gt; TestTree
</span><a href="Test.Util.Serialisation.Golden.html#goldenTest_all"><span class="hs-identifier hs-var hs-var">goldenTest_all</span></a></span></span><span> </span><span id="local-6989586621679281553"><span class="annot"><span class="annottext">CodecConfig blk
</span><a href="#local-6989586621679281553"><span class="hs-identifier hs-var">codecConfig</span></a></span></span><span> </span><span id="local-6989586621679281552"><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281552"><span class="hs-identifier hs-var">goldenDir</span></a></span></span><span> </span><span id="local-6989586621679281551"><span class="annot"><span class="annottext">Examples blk
</span><a href="#local-6989586621679281551"><span class="hs-identifier hs-var">examples</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-379"></span><span>    </span><span class="annot"><span class="annottext">TestName -&gt; [TestTree] -&gt; TestTree
</span><span class="hs-identifier hs-var">testGroup</span></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Golden tests&quot;</span></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-380"></span><span>        </span><span class="annot"><span class="annottext">CodecConfig blk -&gt; TestName -&gt; Examples blk -&gt; TestTree
forall blk.
(SerialiseDiskConstraints blk, HasCallStack) =&gt;
CodecConfig blk -&gt; TestName -&gt; Examples blk -&gt; TestTree
</span><a href="Test.Util.Serialisation.Golden.html#goldenTest_SerialiseDisk"><span class="hs-identifier hs-var">goldenTest_SerialiseDisk</span></a></span><span>         </span><span class="annot"><span class="annottext">CodecConfig blk
</span><a href="#local-6989586621679281553"><span class="hs-identifier hs-var">codecConfig</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281552"><span class="hs-identifier hs-var">goldenDir</span></a></span><span> </span><span class="annot"><span class="annottext">Examples blk
</span><a href="#local-6989586621679281551"><span class="hs-identifier hs-var">examples</span></a></span><span>
</span><span id="line-381"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CodecConfig blk -&gt; TestName -&gt; Examples blk -&gt; TestTree
forall blk.
(SerialiseNodeToNodeConstraints blk,
 SupportedNetworkProtocolVersion blk,
 ToGoldenDirectory (BlockNodeToNodeVersion blk), HasCallStack) =&gt;
CodecConfig blk -&gt; TestName -&gt; Examples blk -&gt; TestTree
</span><a href="Test.Util.Serialisation.Golden.html#goldenTest_SerialiseNodeToNode"><span class="hs-identifier hs-var">goldenTest_SerialiseNodeToNode</span></a></span><span>   </span><span class="annot"><span class="annottext">CodecConfig blk
</span><a href="#local-6989586621679281553"><span class="hs-identifier hs-var">codecConfig</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281552"><span class="hs-identifier hs-var">goldenDir</span></a></span><span> </span><span class="annot"><span class="annottext">Examples blk
</span><a href="#local-6989586621679281551"><span class="hs-identifier hs-var">examples</span></a></span><span>
</span><span id="line-382"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CodecConfig blk -&gt; TestName -&gt; Examples blk -&gt; TestTree
forall blk.
(SerialiseNodeToClientConstraints blk,
 SupportedNetworkProtocolVersion blk,
 ToGoldenDirectory (QueryVersion, BlockNodeToClientVersion blk),
 HasCallStack) =&gt;
CodecConfig blk -&gt; TestName -&gt; Examples blk -&gt; TestTree
</span><a href="Test.Util.Serialisation.Golden.html#goldenTest_SerialiseNodeToClient"><span class="hs-identifier hs-var">goldenTest_SerialiseNodeToClient</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig blk
</span><a href="#local-6989586621679281553"><span class="hs-identifier hs-var">codecConfig</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281552"><span class="hs-identifier hs-var">goldenDir</span></a></span><span> </span><span class="annot"><span class="annottext">Examples blk
</span><a href="#local-6989586621679281551"><span class="hs-identifier hs-var">examples</span></a></span><span>
</span><span id="line-383"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-384"></span><span>
</span><span id="line-385"></span><span class="hs-comment">-- TODO how can we ensure that we have a test for each constraint listed in</span><span>
</span><span id="line-386"></span><span class="hs-comment">-- 'SerialiseDiskConstraints'?</span><span>
</span><span id="line-387"></span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#goldenTest_SerialiseDisk"><span class="hs-identifier hs-type">goldenTest_SerialiseDisk</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-388"></span><span>     </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679281761"><span class="annot"><a href="#local-6989586621679281761"><span class="hs-identifier hs-type">blk</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">SerialiseDiskConstraints</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281761"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-389"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">CodecConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281761"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-390"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-391"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Examples"><span class="hs-identifier hs-type">Examples</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281761"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-392"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TestTree</span></span><span>
</span><span id="line-393"></span><span id="goldenTest_SerialiseDisk"><span class="annot"><span class="annottext">goldenTest_SerialiseDisk :: CodecConfig blk -&gt; TestName -&gt; Examples blk -&gt; TestTree
</span><a href="Test.Util.Serialisation.Golden.html#goldenTest_SerialiseDisk"><span class="hs-identifier hs-var hs-var">goldenTest_SerialiseDisk</span></a></span></span><span> </span><span id="local-6989586621679281550"><span class="annot"><span class="annottext">CodecConfig blk
</span><a href="#local-6989586621679281550"><span class="hs-identifier hs-var">codecConfig</span></a></span></span><span> </span><span id="local-6989586621679281549"><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281549"><span class="hs-identifier hs-var">goldenDir</span></a></span></span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Examples"><span class="hs-identifier hs-type">Examples</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679281534"><span id="local-6989586621679281535"><span id="local-6989586621679281536"><span id="local-6989586621679281537"><span id="local-6989586621679281538"><span id="local-6989586621679281539"><span id="local-6989586621679281540"><span id="local-6989586621679281541"><span id="local-6989586621679281542"><span id="local-6989586621679281543"><span id="local-6989586621679281544"><span id="local-6989586621679281545"><span id="local-6989586621679281546"><span id="local-6989586621679281547"><span id="local-6989586621679281548"><span class="annot"><span class="annottext">Labelled blk
Labelled (Serialised blk)
Labelled (ExtLedgerState blk)
Labelled (SerialisedHeader blk)
Labelled (AnnTip blk)
Labelled (GenTx blk)
Labelled (ApplyTxErr blk)
Labelled (GenTxId blk)
Labelled (LedgerState blk)
Labelled (ChainDepState (BlockProtocol blk))
Labelled (Header blk)
Labelled (SomeSecond BlockQuery blk)
Labelled SlotNo
Labelled (HeaderHash blk)
Labelled (SomeResult blk)
exampleSlotNo :: Labelled SlotNo
exampleExtLedgerState :: Labelled (ExtLedgerState blk)
exampleChainDepState :: Labelled (ChainDepState (BlockProtocol blk))
exampleLedgerState :: Labelled (LedgerState blk)
exampleAnnTip :: Labelled (AnnTip blk)
exampleResult :: Labelled (SomeResult blk)
exampleQuery :: Labelled (SomeSecond BlockQuery blk)
exampleApplyTxErr :: Labelled (ApplyTxErr blk)
exampleGenTxId :: Labelled (GenTxId blk)
exampleGenTx :: Labelled (GenTx blk)
exampleHeaderHash :: Labelled (HeaderHash blk)
exampleSerialisedHeader :: Labelled (SerialisedHeader blk)
exampleHeader :: Labelled (Header blk)
exampleSerialisedBlock :: Labelled (Serialised blk)
exampleBlock :: Labelled blk
exampleSlotNo :: forall blk. Examples blk -&gt; Labelled SlotNo
exampleExtLedgerState :: forall blk. Examples blk -&gt; Labelled (ExtLedgerState blk)
exampleChainDepState :: forall blk.
Examples blk -&gt; Labelled (ChainDepState (BlockProtocol blk))
exampleLedgerState :: forall blk. Examples blk -&gt; Labelled (LedgerState blk)
exampleAnnTip :: forall blk. Examples blk -&gt; Labelled (AnnTip blk)
exampleResult :: forall blk. Examples blk -&gt; Labelled (SomeResult blk)
exampleQuery :: forall blk. Examples blk -&gt; Labelled (SomeSecond BlockQuery blk)
exampleApplyTxErr :: forall blk. Examples blk -&gt; Labelled (ApplyTxErr blk)
exampleGenTxId :: forall blk. Examples blk -&gt; Labelled (GenTxId blk)
exampleGenTx :: forall blk. Examples blk -&gt; Labelled (GenTx blk)
exampleHeaderHash :: forall blk. Examples blk -&gt; Labelled (HeaderHash blk)
exampleSerialisedHeader :: forall blk. Examples blk -&gt; Labelled (SerialisedHeader blk)
exampleHeader :: forall blk. Examples blk -&gt; Labelled (Header blk)
exampleSerialisedBlock :: forall blk. Examples blk -&gt; Labelled (Serialised blk)
exampleBlock :: forall blk. Examples blk -&gt; Labelled blk
</span><a href="#local-6989586621679281534"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-394"></span><span>    </span><span class="annot"><span class="annottext">TestName -&gt; [TestTree] -&gt; TestTree
</span><span class="hs-identifier hs-var">testGroup</span></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;SerialiseDisk&quot;</span></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-395"></span><span>        </span><span class="annot"><span class="annottext">TestName -&gt; Labelled blk -&gt; (blk -&gt; Encoding) -&gt; TestTree
forall a. TestName -&gt; Labelled a -&gt; (a -&gt; Encoding) -&gt; TestTree
</span><a href="#local-6989586621679281533"><span class="hs-identifier hs-var">test</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Block&quot;</span></span><span>          </span><span class="annot"><span class="annottext">Labelled blk
</span><a href="#local-6989586621679281548"><span class="hs-identifier hs-var">exampleBlock</span></a></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CodecConfig blk -&gt; blk -&gt; Encoding
forall blk a. EncodeDisk blk a =&gt; CodecConfig blk -&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">encodeDisk</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig blk
</span><a href="#local-6989586621679281550"><span class="hs-identifier hs-var">codecConfig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-396"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestName
-&gt; Labelled (HeaderHash blk)
-&gt; (HeaderHash blk -&gt; Encoding)
-&gt; TestTree
forall a. TestName -&gt; Labelled a -&gt; (a -&gt; Encoding) -&gt; TestTree
</span><a href="#local-6989586621679281533"><span class="hs-identifier hs-var">test</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;HeaderHash&quot;</span></span><span>     </span><span class="annot"><span class="annottext">Labelled (HeaderHash blk)
</span><a href="#local-6989586621679281544"><span class="hs-identifier hs-var">exampleHeaderHash</span></a></span><span>     </span><span class="annot"><span class="annottext">HeaderHash blk -&gt; Encoding
forall a. Serialise a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encode</span></span><span>
</span><span id="line-397"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestName
-&gt; Labelled (LedgerState blk)
-&gt; (LedgerState blk -&gt; Encoding)
-&gt; TestTree
forall a. TestName -&gt; Labelled a -&gt; (a -&gt; Encoding) -&gt; TestTree
</span><a href="#local-6989586621679281533"><span class="hs-identifier hs-var">test</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;LedgerState&quot;</span></span><span>    </span><span class="annot"><span class="annottext">Labelled (LedgerState blk)
</span><a href="#local-6989586621679281537"><span class="hs-identifier hs-var">exampleLedgerState</span></a></span><span>   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CodecConfig blk -&gt; LedgerState blk -&gt; Encoding
forall blk a. EncodeDisk blk a =&gt; CodecConfig blk -&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">encodeDisk</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig blk
</span><a href="#local-6989586621679281550"><span class="hs-identifier hs-var">codecConfig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-398"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestName
-&gt; Labelled (AnnTip blk) -&gt; (AnnTip blk -&gt; Encoding) -&gt; TestTree
forall a. TestName -&gt; Labelled a -&gt; (a -&gt; Encoding) -&gt; TestTree
</span><a href="#local-6989586621679281533"><span class="hs-identifier hs-var">test</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;AnnTip&quot;</span></span><span>         </span><span class="annot"><span class="annottext">Labelled (AnnTip blk)
</span><a href="#local-6989586621679281538"><span class="hs-identifier hs-var">exampleAnnTip</span></a></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CodecConfig blk -&gt; AnnTip blk -&gt; Encoding
forall blk a. EncodeDisk blk a =&gt; CodecConfig blk -&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">encodeDisk</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig blk
</span><a href="#local-6989586621679281550"><span class="hs-identifier hs-var">codecConfig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-399"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestName
-&gt; Labelled (ChainDepState (BlockProtocol blk))
-&gt; (ChainDepState (BlockProtocol blk) -&gt; Encoding)
-&gt; TestTree
forall a. TestName -&gt; Labelled a -&gt; (a -&gt; Encoding) -&gt; TestTree
</span><a href="#local-6989586621679281533"><span class="hs-identifier hs-var">test</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;ChainDepState&quot;</span></span><span>  </span><span class="annot"><span class="annottext">Labelled (ChainDepState (BlockProtocol blk))
</span><a href="#local-6989586621679281536"><span class="hs-identifier hs-var">exampleChainDepState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CodecConfig blk -&gt; ChainDepState (BlockProtocol blk) -&gt; Encoding
forall blk a. EncodeDisk blk a =&gt; CodecConfig blk -&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">encodeDisk</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig blk
</span><a href="#local-6989586621679281550"><span class="hs-identifier hs-var">codecConfig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-400"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestName
-&gt; Labelled (ExtLedgerState blk)
-&gt; (ExtLedgerState blk -&gt; Encoding)
-&gt; TestTree
forall a. TestName -&gt; Labelled a -&gt; (a -&gt; Encoding) -&gt; TestTree
</span><a href="#local-6989586621679281533"><span class="hs-identifier hs-var">test</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;ExtLedgerState&quot;</span></span><span> </span><span class="annot"><span class="annottext">Labelled (ExtLedgerState blk)
</span><a href="#local-6989586621679281535"><span class="hs-identifier hs-var">exampleExtLedgerState</span></a></span><span> </span><span class="annot"><span class="annottext">ExtLedgerState blk -&gt; Encoding
</span><a href="#local-6989586621679281531"><span class="hs-identifier hs-var">encodeExt</span></a></span><span>
</span><span id="line-401"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-402"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-403"></span><span>    </span><span id="local-6989586621679281749"><span class="annot"><a href="#local-6989586621679281533"><span class="hs-identifier hs-type">test</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TestName</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281749"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679281749"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Encoding</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TestTree</span></span></span><span>
</span><span id="line-404"></span><span>    </span><span id="local-6989586621679281533"><span class="annot"><span class="annottext">test :: TestName -&gt; Labelled a -&gt; (a -&gt; Encoding) -&gt; TestTree
</span><a href="#local-6989586621679281533"><span class="hs-identifier hs-var hs-var">test</span></a></span></span><span> </span><span id="local-6989586621679281530"><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281530"><span class="hs-identifier hs-var">testName</span></a></span></span><span> </span><span id="local-6989586621679281529"><span class="annot"><span class="annottext">Labelled a
</span><a href="#local-6989586621679281529"><span class="hs-identifier hs-var">exampleValues</span></a></span></span><span> </span><span id="local-6989586621679281528"><span class="annot"><span class="annottext">a -&gt; Encoding
</span><a href="#local-6989586621679281528"><span class="hs-identifier hs-var">enc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-405"></span><span>        </span><span class="annot"><span class="annottext">TestName -&gt; Labelled a -&gt; (a -&gt; Encoding) -&gt; TestName -&gt; TestTree
forall a.
HasCallStack =&gt;
TestName -&gt; Labelled a -&gt; (a -&gt; Encoding) -&gt; TestName -&gt; TestTree
</span><a href="Test.Util.Serialisation.Golden.html#goldenTests"><span class="hs-identifier hs-var">goldenTests</span></a></span><span>
</span><span id="line-406"></span><span>          </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281530"><span class="hs-identifier hs-var">testName</span></a></span><span>
</span><span id="line-407"></span><span>          </span><span class="annot"><span class="annottext">Labelled a
</span><a href="#local-6989586621679281529"><span class="hs-identifier hs-var">exampleValues</span></a></span><span>
</span><span id="line-408"></span><span>          </span><span class="annot"><span class="annottext">a -&gt; Encoding
</span><a href="#local-6989586621679281528"><span class="hs-identifier hs-var">enc</span></a></span><span>
</span><span id="line-409"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281549"><span class="hs-identifier hs-var">goldenDir</span></a></span><span> </span><span class="annot"><span class="annottext">TestName -&gt; TestName -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/filepath-1.4.2.1/src"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;disk&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-410"></span><span>
</span><span id="line-411"></span><span>    </span><span id="local-6989586621679281531"><span class="annot"><span class="annottext">encodeExt :: ExtLedgerState blk -&gt; Encoding
</span><a href="#local-6989586621679281531"><span class="hs-identifier hs-var hs-var">encodeExt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-412"></span><span>        </span><span class="annot"><span class="annottext">(LedgerState blk -&gt; Encoding)
-&gt; (ChainDepState (BlockProtocol blk) -&gt; Encoding)
-&gt; (AnnTip blk -&gt; Encoding)
-&gt; ExtLedgerState blk
-&gt; Encoding
forall blk.
(LedgerState blk -&gt; Encoding)
-&gt; (ChainDepState (BlockProtocol blk) -&gt; Encoding)
-&gt; (AnnTip blk -&gt; Encoding)
-&gt; ExtLedgerState blk
-&gt; Encoding
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">encodeExtLedgerState</span></a></span><span>
</span><span id="line-413"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CodecConfig blk -&gt; LedgerState blk -&gt; Encoding
forall blk a. EncodeDisk blk a =&gt; CodecConfig blk -&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">encodeDisk</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig blk
</span><a href="#local-6989586621679281550"><span class="hs-identifier hs-var">codecConfig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-414"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CodecConfig blk -&gt; ChainDepState (BlockProtocol blk) -&gt; Encoding
forall blk a. EncodeDisk blk a =&gt; CodecConfig blk -&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">encodeDisk</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig blk
</span><a href="#local-6989586621679281550"><span class="hs-identifier hs-var">codecConfig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-415"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CodecConfig blk -&gt; AnnTip blk -&gt; Encoding
forall blk a. EncodeDisk blk a =&gt; CodecConfig blk -&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">encodeDisk</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig blk
</span><a href="#local-6989586621679281550"><span class="hs-identifier hs-var">codecConfig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-416"></span><span>
</span><span id="line-417"></span><span class="hs-comment">-- TODO how can we ensure that we have a test for each constraint listed in</span><span>
</span><span id="line-418"></span><span class="hs-comment">-- 'SerialiseNodeToNodeConstraints'?</span><span>
</span><span id="line-419"></span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#goldenTest_SerialiseNodeToNode"><span class="hs-identifier hs-type">goldenTest_SerialiseNodeToNode</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-420"></span><span>     </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679281759"><span class="annot"><a href="#local-6989586621679281759"><span class="hs-identifier hs-type">blk</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-421"></span><span>     </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">SerialiseNodeToNodeConstraints</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281759"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-422"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">SupportedNetworkProtocolVersion</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281759"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-423"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#ToGoldenDirectory"><span class="hs-identifier hs-type">ToGoldenDirectory</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">BlockNodeToNodeVersion</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281759"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-424"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span>
</span><span id="line-425"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-426"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">CodecConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281759"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-427"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-428"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Examples"><span class="hs-identifier hs-type">Examples</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281759"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-429"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TestTree</span></span><span>
</span><span id="line-430"></span><span id="goldenTest_SerialiseNodeToNode"><span class="annot"><span class="annottext">goldenTest_SerialiseNodeToNode :: CodecConfig blk -&gt; TestName -&gt; Examples blk -&gt; TestTree
</span><a href="Test.Util.Serialisation.Golden.html#goldenTest_SerialiseNodeToNode"><span class="hs-identifier hs-var hs-var">goldenTest_SerialiseNodeToNode</span></a></span></span><span> </span><span id="local-6989586621679281527"><span class="annot"><span class="annottext">CodecConfig blk
</span><a href="#local-6989586621679281527"><span class="hs-identifier hs-var">codecConfig</span></a></span></span><span> </span><span id="local-6989586621679281526"><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281526"><span class="hs-identifier hs-var">goldenDir</span></a></span></span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Examples"><span class="hs-identifier hs-type">Examples</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679281511"><span id="local-6989586621679281512"><span id="local-6989586621679281513"><span id="local-6989586621679281514"><span id="local-6989586621679281515"><span id="local-6989586621679281516"><span id="local-6989586621679281517"><span id="local-6989586621679281518"><span id="local-6989586621679281519"><span id="local-6989586621679281520"><span id="local-6989586621679281521"><span id="local-6989586621679281522"><span id="local-6989586621679281523"><span id="local-6989586621679281524"><span id="local-6989586621679281525"><span class="annot"><span class="annottext">Labelled blk
Labelled (Serialised blk)
Labelled (ExtLedgerState blk)
Labelled (SerialisedHeader blk)
Labelled (AnnTip blk)
Labelled (GenTx blk)
Labelled (ApplyTxErr blk)
Labelled (GenTxId blk)
Labelled (LedgerState blk)
Labelled (ChainDepState (BlockProtocol blk))
Labelled (Header blk)
Labelled (SomeSecond BlockQuery blk)
Labelled SlotNo
Labelled (HeaderHash blk)
Labelled (SomeResult blk)
exampleSlotNo :: Labelled SlotNo
exampleExtLedgerState :: Labelled (ExtLedgerState blk)
exampleChainDepState :: Labelled (ChainDepState (BlockProtocol blk))
exampleLedgerState :: Labelled (LedgerState blk)
exampleAnnTip :: Labelled (AnnTip blk)
exampleResult :: Labelled (SomeResult blk)
exampleQuery :: Labelled (SomeSecond BlockQuery blk)
exampleApplyTxErr :: Labelled (ApplyTxErr blk)
exampleGenTxId :: Labelled (GenTxId blk)
exampleGenTx :: Labelled (GenTx blk)
exampleHeaderHash :: Labelled (HeaderHash blk)
exampleSerialisedHeader :: Labelled (SerialisedHeader blk)
exampleHeader :: Labelled (Header blk)
exampleSerialisedBlock :: Labelled (Serialised blk)
exampleBlock :: Labelled blk
exampleSlotNo :: forall blk. Examples blk -&gt; Labelled SlotNo
exampleExtLedgerState :: forall blk. Examples blk -&gt; Labelled (ExtLedgerState blk)
exampleChainDepState :: forall blk.
Examples blk -&gt; Labelled (ChainDepState (BlockProtocol blk))
exampleLedgerState :: forall blk. Examples blk -&gt; Labelled (LedgerState blk)
exampleAnnTip :: forall blk. Examples blk -&gt; Labelled (AnnTip blk)
exampleResult :: forall blk. Examples blk -&gt; Labelled (SomeResult blk)
exampleQuery :: forall blk. Examples blk -&gt; Labelled (SomeSecond BlockQuery blk)
exampleApplyTxErr :: forall blk. Examples blk -&gt; Labelled (ApplyTxErr blk)
exampleGenTxId :: forall blk. Examples blk -&gt; Labelled (GenTxId blk)
exampleGenTx :: forall blk. Examples blk -&gt; Labelled (GenTx blk)
exampleHeaderHash :: forall blk. Examples blk -&gt; Labelled (HeaderHash blk)
exampleSerialisedHeader :: forall blk. Examples blk -&gt; Labelled (SerialisedHeader blk)
exampleHeader :: forall blk. Examples blk -&gt; Labelled (Header blk)
exampleSerialisedBlock :: forall blk. Examples blk -&gt; Labelled (Serialised blk)
exampleBlock :: forall blk. Examples blk -&gt; Labelled blk
</span><a href="#local-6989586621679281511"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-431"></span><span>    </span><span class="annot"><span class="annottext">TestName -&gt; [TestTree] -&gt; TestTree
</span><span class="hs-identifier hs-var">testGroup</span></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;SerialiseNodeToNode&quot;</span></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-432"></span><span>        </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion blk -&gt; TestTree
</span><a href="#local-6989586621679281510"><span class="hs-identifier hs-var">testVersion</span></a></span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion blk
</span><a href="#local-6989586621679281509"><span class="hs-identifier hs-var">version</span></a></span><span>
</span><span id="line-433"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679281509"><span class="annot"><span class="annottext">BlockNodeToNodeVersion blk
</span><a href="#local-6989586621679281509"><span class="hs-identifier hs-var">version</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[BlockNodeToNodeVersion blk] -&gt; [BlockNodeToNodeVersion blk]
forall a. Eq a =&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nub</span></a></span><span> </span><span class="annot"><span class="annottext">([BlockNodeToNodeVersion blk] -&gt; [BlockNodeToNodeVersion blk])
-&gt; [BlockNodeToNodeVersion blk] -&gt; [BlockNodeToNodeVersion blk]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
-&gt; [BlockNodeToNodeVersion blk]
forall k a. Map k a -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.elems</span></a></span><span> </span><span class="annot"><span class="annottext">(Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
 -&gt; [BlockNodeToNodeVersion blk])
-&gt; Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
-&gt; [BlockNodeToNodeVersion blk]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy blk -&gt; Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
forall blk.
SupportedNetworkProtocolVersion blk =&gt;
Proxy blk -&gt; Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">supportedNodeToNodeVersions</span></a></span><span> </span><span class="annot"><span class="annottext">(Proxy blk -&gt; Map NodeToNodeVersion (BlockNodeToNodeVersion blk))
-&gt; Proxy blk -&gt; Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy blk
forall k (t :: k). Proxy t
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679281759"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-434"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-435"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-436"></span><span>    </span><span class="annot"><a href="#local-6989586621679281510"><span class="hs-identifier hs-type">testVersion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">BlockNodeToNodeVersion</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281759"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TestTree</span></span><span>
</span><span id="line-437"></span><span>    </span><span id="local-6989586621679281510"><span class="annot"><span class="annottext">testVersion :: BlockNodeToNodeVersion blk -&gt; TestTree
</span><a href="#local-6989586621679281510"><span class="hs-identifier hs-var hs-var">testVersion</span></a></span></span><span> </span><span id="local-6989586621679281505"><span class="annot"><span class="annottext">BlockNodeToNodeVersion blk
</span><a href="#local-6989586621679281505"><span class="hs-identifier hs-var">version</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; [TestTree] -&gt; TestTree
</span><span class="hs-identifier hs-var">testGroup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BlockNodeToNodeVersion blk -&gt; TestName
forall a. ToGoldenDirectory a =&gt; a -&gt; TestName
</span><a href="Test.Util.Serialisation.Golden.html#toGoldenDirectory"><span class="hs-identifier hs-var">toGoldenDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion blk
</span><a href="#local-6989586621679281505"><span class="hs-identifier hs-var">version</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-438"></span><span>          </span><span class="annot"><span class="annottext">TestName -&gt; Labelled blk -&gt; TestTree
forall a.
SerialiseNodeToNode blk a =&gt;
TestName -&gt; Labelled a -&gt; TestTree
</span><a href="#local-6989586621679281504"><span class="hs-identifier hs-var">test</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Block&quot;</span></span><span>            </span><span class="annot"><span class="annottext">Labelled blk
</span><a href="#local-6989586621679281525"><span class="hs-identifier hs-var">exampleBlock</span></a></span><span>
</span><span id="line-439"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; Labelled (Header blk) -&gt; TestTree
forall a.
SerialiseNodeToNode blk a =&gt;
TestName -&gt; Labelled a -&gt; TestTree
</span><a href="#local-6989586621679281504"><span class="hs-identifier hs-var">test</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Header&quot;</span></span><span>           </span><span class="annot"><span class="annottext">Labelled (Header blk)
</span><a href="#local-6989586621679281523"><span class="hs-identifier hs-var">exampleHeader</span></a></span><span>
</span><span id="line-440"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; Labelled (Serialised blk) -&gt; TestTree
forall a.
SerialiseNodeToNode blk a =&gt;
TestName -&gt; Labelled a -&gt; TestTree
</span><a href="#local-6989586621679281504"><span class="hs-identifier hs-var">test</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;SerialisedBlock&quot;</span></span><span>  </span><span class="annot"><span class="annottext">Labelled (Serialised blk)
</span><a href="#local-6989586621679281524"><span class="hs-identifier hs-var">exampleSerialisedBlock</span></a></span><span>
</span><span id="line-441"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; Labelled (SerialisedHeader blk) -&gt; TestTree
forall a.
SerialiseNodeToNode blk a =&gt;
TestName -&gt; Labelled a -&gt; TestTree
</span><a href="#local-6989586621679281504"><span class="hs-identifier hs-var">test</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;SerialisedHeader&quot;</span></span><span> </span><span class="annot"><span class="annottext">Labelled (SerialisedHeader blk)
</span><a href="#local-6989586621679281522"><span class="hs-identifier hs-var">exampleSerialisedHeader</span></a></span><span>
</span><span id="line-442"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; Labelled (GenTx blk) -&gt; TestTree
forall a.
SerialiseNodeToNode blk a =&gt;
TestName -&gt; Labelled a -&gt; TestTree
</span><a href="#local-6989586621679281504"><span class="hs-identifier hs-var">test</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;GenTx&quot;</span></span><span>            </span><span class="annot"><span class="annottext">Labelled (GenTx blk)
</span><a href="#local-6989586621679281520"><span class="hs-identifier hs-var">exampleGenTx</span></a></span><span>
</span><span id="line-443"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; Labelled (GenTxId blk) -&gt; TestTree
forall a.
SerialiseNodeToNode blk a =&gt;
TestName -&gt; Labelled a -&gt; TestTree
</span><a href="#local-6989586621679281504"><span class="hs-identifier hs-var">test</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;GenTxId&quot;</span></span><span>          </span><span class="annot"><span class="annottext">Labelled (GenTxId blk)
</span><a href="#local-6989586621679281519"><span class="hs-identifier hs-var">exampleGenTxId</span></a></span><span>
</span><span id="line-444"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-445"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-446"></span><span>        </span><span id="local-6989586621679281731"><span class="annot"><a href="#local-6989586621679281504"><span class="hs-identifier hs-type">test</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">SerialiseNodeToNode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281759"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281731"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TestName</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281731"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TestTree</span></span></span><span>
</span><span id="line-447"></span><span>        </span><span id="local-6989586621679281504"><span class="annot"><span class="annottext">test :: TestName -&gt; Labelled a -&gt; TestTree
</span><a href="#local-6989586621679281504"><span class="hs-identifier hs-var hs-var">test</span></a></span></span><span> </span><span id="local-6989586621679281503"><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281503"><span class="hs-identifier hs-var">testName</span></a></span></span><span> </span><span id="local-6989586621679281502"><span class="annot"><span class="annottext">Labelled a
</span><a href="#local-6989586621679281502"><span class="hs-identifier hs-var">exampleValues</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-448"></span><span>            </span><span class="annot"><span class="annottext">TestName -&gt; Labelled a -&gt; (a -&gt; Encoding) -&gt; TestName -&gt; TestTree
forall a.
HasCallStack =&gt;
TestName -&gt; Labelled a -&gt; (a -&gt; Encoding) -&gt; TestName -&gt; TestTree
</span><a href="Test.Util.Serialisation.Golden.html#goldenTests"><span class="hs-identifier hs-var">goldenTests</span></a></span><span>
</span><span id="line-449"></span><span>              </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281503"><span class="hs-identifier hs-var">testName</span></a></span><span>
</span><span id="line-450"></span><span>              </span><span class="annot"><span class="annottext">Labelled a
</span><a href="#local-6989586621679281502"><span class="hs-identifier hs-var">exampleValues</span></a></span><span>
</span><span id="line-451"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CodecConfig blk -&gt; BlockNodeToNodeVersion blk -&gt; a -&gt; Encoding
forall blk a.
SerialiseNodeToNode blk a =&gt;
CodecConfig blk -&gt; BlockNodeToNodeVersion blk -&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">encodeNodeToNode</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig blk
</span><a href="#local-6989586621679281527"><span class="hs-identifier hs-var">codecConfig</span></a></span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion blk
</span><a href="#local-6989586621679281505"><span class="hs-identifier hs-var">version</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-452"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281526"><span class="hs-identifier hs-var">goldenDir</span></a></span><span> </span><span class="annot"><span class="annottext">TestName -&gt; TestName -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/filepath-1.4.2.1/src"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion blk -&gt; TestName
forall a. ToGoldenDirectory a =&gt; a -&gt; TestName
</span><a href="Test.Util.Serialisation.Golden.html#toGoldenDirectory"><span class="hs-identifier hs-var">toGoldenDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion blk
</span><a href="#local-6989586621679281505"><span class="hs-identifier hs-var">version</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-453"></span><span>
</span><span id="line-454"></span><span class="hs-comment">-- TODO how can we ensure that we have a test for each constraint listed in</span><span>
</span><span id="line-455"></span><span class="hs-comment">-- 'SerialiseNodeToClientConstraints'?</span><span>
</span><span id="line-456"></span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#goldenTest_SerialiseNodeToClient"><span class="hs-identifier hs-type">goldenTest_SerialiseNodeToClient</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-457"></span><span>     </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679281754"><span class="annot"><a href="#local-6989586621679281754"><span class="hs-identifier hs-type">blk</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-458"></span><span>     </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">SerialiseNodeToClientConstraints</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281754"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-459"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">SupportedNetworkProtocolVersion</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281754"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-460"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#ToGoldenDirectory"><span class="hs-identifier hs-type">ToGoldenDirectory</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">QueryVersion</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">BlockNodeToClientVersion</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281754"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-461"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span>
</span><span id="line-462"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-463"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">CodecConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281754"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-464"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-465"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Examples"><span class="hs-identifier hs-type">Examples</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281754"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-466"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TestTree</span></span><span>
</span><span id="line-467"></span><span id="goldenTest_SerialiseNodeToClient"><span class="annot"><span class="annottext">goldenTest_SerialiseNodeToClient :: CodecConfig blk -&gt; TestName -&gt; Examples blk -&gt; TestTree
</span><a href="Test.Util.Serialisation.Golden.html#goldenTest_SerialiseNodeToClient"><span class="hs-identifier hs-var hs-var">goldenTest_SerialiseNodeToClient</span></a></span></span><span> </span><span id="local-6989586621679281500"><span class="annot"><span class="annottext">CodecConfig blk
</span><a href="#local-6989586621679281500"><span class="hs-identifier hs-var">codecConfig</span></a></span></span><span> </span><span id="local-6989586621679281499"><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281499"><span class="hs-identifier hs-var">goldenDir</span></a></span></span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Examples"><span class="hs-identifier hs-type">Examples</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679281484"><span id="local-6989586621679281485"><span id="local-6989586621679281486"><span id="local-6989586621679281487"><span id="local-6989586621679281488"><span id="local-6989586621679281489"><span id="local-6989586621679281490"><span id="local-6989586621679281491"><span id="local-6989586621679281492"><span id="local-6989586621679281493"><span id="local-6989586621679281494"><span id="local-6989586621679281495"><span id="local-6989586621679281496"><span id="local-6989586621679281497"><span id="local-6989586621679281498"><span class="annot"><span class="annottext">Labelled blk
Labelled (Serialised blk)
Labelled (ExtLedgerState blk)
Labelled (SerialisedHeader blk)
Labelled (AnnTip blk)
Labelled (GenTx blk)
Labelled (ApplyTxErr blk)
Labelled (GenTxId blk)
Labelled (LedgerState blk)
Labelled (ChainDepState (BlockProtocol blk))
Labelled (Header blk)
Labelled (SomeSecond BlockQuery blk)
Labelled SlotNo
Labelled (HeaderHash blk)
Labelled (SomeResult blk)
exampleSlotNo :: Labelled SlotNo
exampleExtLedgerState :: Labelled (ExtLedgerState blk)
exampleChainDepState :: Labelled (ChainDepState (BlockProtocol blk))
exampleLedgerState :: Labelled (LedgerState blk)
exampleAnnTip :: Labelled (AnnTip blk)
exampleResult :: Labelled (SomeResult blk)
exampleQuery :: Labelled (SomeSecond BlockQuery blk)
exampleApplyTxErr :: Labelled (ApplyTxErr blk)
exampleGenTxId :: Labelled (GenTxId blk)
exampleGenTx :: Labelled (GenTx blk)
exampleHeaderHash :: Labelled (HeaderHash blk)
exampleSerialisedHeader :: Labelled (SerialisedHeader blk)
exampleHeader :: Labelled (Header blk)
exampleSerialisedBlock :: Labelled (Serialised blk)
exampleBlock :: Labelled blk
exampleSlotNo :: forall blk. Examples blk -&gt; Labelled SlotNo
exampleExtLedgerState :: forall blk. Examples blk -&gt; Labelled (ExtLedgerState blk)
exampleChainDepState :: forall blk.
Examples blk -&gt; Labelled (ChainDepState (BlockProtocol blk))
exampleLedgerState :: forall blk. Examples blk -&gt; Labelled (LedgerState blk)
exampleAnnTip :: forall blk. Examples blk -&gt; Labelled (AnnTip blk)
exampleResult :: forall blk. Examples blk -&gt; Labelled (SomeResult blk)
exampleQuery :: forall blk. Examples blk -&gt; Labelled (SomeSecond BlockQuery blk)
exampleApplyTxErr :: forall blk. Examples blk -&gt; Labelled (ApplyTxErr blk)
exampleGenTxId :: forall blk. Examples blk -&gt; Labelled (GenTxId blk)
exampleGenTx :: forall blk. Examples blk -&gt; Labelled (GenTx blk)
exampleHeaderHash :: forall blk. Examples blk -&gt; Labelled (HeaderHash blk)
exampleSerialisedHeader :: forall blk. Examples blk -&gt; Labelled (SerialisedHeader blk)
exampleHeader :: forall blk. Examples blk -&gt; Labelled (Header blk)
exampleSerialisedBlock :: forall blk. Examples blk -&gt; Labelled (Serialised blk)
exampleBlock :: forall blk. Examples blk -&gt; Labelled blk
</span><a href="#local-6989586621679281484"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-468"></span><span>    </span><span class="annot"><span class="annottext">TestName -&gt; [TestTree] -&gt; TestTree
</span><span class="hs-identifier hs-var">testGroup</span></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;SerialiseNodeToClient&quot;</span></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-469"></span><span>        </span><span class="annot"><span class="annottext">(QueryVersion, BlockNodeToClientVersion blk) -&gt; TestTree
</span><a href="#local-6989586621679281483"><span class="hs-identifier hs-var">testVersion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NodeToClientVersion -&gt; QueryVersion
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">nodeToClientVersionToQueryVersion</span></a></span><span> </span><span class="annot"><span class="annottext">NodeToClientVersion
</span><a href="#local-6989586621679281482"><span class="hs-identifier hs-var">version</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockNodeToClientVersion blk
</span><a href="#local-6989586621679281481"><span class="hs-identifier hs-var">blockVersion</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-470"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679281482"><span class="annot"><span class="annottext">NodeToClientVersion
</span><a href="#local-6989586621679281482"><span class="hs-identifier hs-var">version</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679281481"><span class="annot"><span class="annottext">BlockNodeToClientVersion blk
</span><a href="#local-6989586621679281481"><span class="hs-identifier hs-var">blockVersion</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(NodeToClientVersion, BlockNodeToClientVersion blk)]
-&gt; [(NodeToClientVersion, BlockNodeToClientVersion blk)]
forall a. Eq a =&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">nub</span></a></span><span> </span><span class="annot"><span class="annottext">([(NodeToClientVersion, BlockNodeToClientVersion blk)]
 -&gt; [(NodeToClientVersion, BlockNodeToClientVersion blk)])
-&gt; [(NodeToClientVersion, BlockNodeToClientVersion blk)]
-&gt; [(NodeToClientVersion, BlockNodeToClientVersion blk)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Map NodeToClientVersion (BlockNodeToClientVersion blk)
-&gt; [(NodeToClientVersion, BlockNodeToClientVersion blk)]
forall k a. Map k a -&gt; [(k, a)]
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.toList</span></a></span><span> </span><span class="annot"><span class="annottext">(Map NodeToClientVersion (BlockNodeToClientVersion blk)
 -&gt; [(NodeToClientVersion, BlockNodeToClientVersion blk)])
-&gt; Map NodeToClientVersion (BlockNodeToClientVersion blk)
-&gt; [(NodeToClientVersion, BlockNodeToClientVersion blk)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy blk -&gt; Map NodeToClientVersion (BlockNodeToClientVersion blk)
forall blk.
SupportedNetworkProtocolVersion blk =&gt;
Proxy blk -&gt; Map NodeToClientVersion (BlockNodeToClientVersion blk)
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">supportedNodeToClientVersions</span></a></span><span> </span><span class="annot"><span class="annottext">(Proxy blk
 -&gt; Map NodeToClientVersion (BlockNodeToClientVersion blk))
-&gt; Proxy blk
-&gt; Map NodeToClientVersion (BlockNodeToClientVersion blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy blk
forall k (t :: k). Proxy t
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679281754"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-471"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-472"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-473"></span><span>    </span><span class="annot"><a href="#local-6989586621679281483"><span class="hs-identifier hs-type">testVersion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">QueryVersion</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">BlockNodeToClientVersion</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281754"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TestTree</span></span><span>
</span><span id="line-474"></span><span>    </span><span id="local-6989586621679281483"><span class="annot"><span class="annottext">testVersion :: (QueryVersion, BlockNodeToClientVersion blk) -&gt; TestTree
</span><a href="#local-6989586621679281483"><span class="hs-identifier hs-var hs-var">testVersion</span></a></span></span><span> </span><span id="local-6989586621679281478"><span class="annot"><span class="annottext">versions :: (QueryVersion, BlockNodeToClientVersion blk)
</span><a href="#local-6989586621679281478"><span class="hs-identifier hs-var">versions</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="annottext">QueryVersion
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679281477"><span class="annot"><span class="annottext">BlockNodeToClientVersion blk
</span><a href="#local-6989586621679281477"><span class="hs-identifier hs-var">blockVersion</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; [TestTree] -&gt; TestTree
</span><span class="hs-identifier hs-var">testGroup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(QueryVersion, BlockNodeToClientVersion blk) -&gt; TestName
forall a. ToGoldenDirectory a =&gt; a -&gt; TestName
</span><a href="Test.Util.Serialisation.Golden.html#toGoldenDirectory"><span class="hs-identifier hs-var">toGoldenDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryVersion, BlockNodeToClientVersion blk)
</span><a href="#local-6989586621679281478"><span class="hs-identifier hs-var">versions</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-475"></span><span>          </span><span class="annot"><span class="annottext">TestName -&gt; Labelled blk -&gt; (blk -&gt; Encoding) -&gt; TestTree
forall a. TestName -&gt; Labelled a -&gt; (a -&gt; Encoding) -&gt; TestTree
</span><a href="#local-6989586621679281476"><span class="hs-identifier hs-var">test</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Block&quot;</span></span><span>           </span><span class="annot"><span class="annottext">Labelled blk
</span><a href="#local-6989586621679281498"><span class="hs-identifier hs-var">exampleBlock</span></a></span><span>           </span><span class="annot"><span class="annottext">blk -&gt; Encoding
forall a. SerialiseNodeToClient blk a =&gt; a -&gt; Encoding
</span><a href="#local-6989586621679281475"><span class="hs-identifier hs-var">enc'</span></a></span><span>
</span><span id="line-476"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestName
-&gt; Labelled (Serialised blk)
-&gt; (Serialised blk -&gt; Encoding)
-&gt; TestTree
forall a. TestName -&gt; Labelled a -&gt; (a -&gt; Encoding) -&gt; TestTree
</span><a href="#local-6989586621679281476"><span class="hs-identifier hs-var">test</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;SerialisedBlock&quot;</span></span><span> </span><span class="annot"><span class="annottext">Labelled (Serialised blk)
</span><a href="#local-6989586621679281497"><span class="hs-identifier hs-var">exampleSerialisedBlock</span></a></span><span> </span><span class="annot"><span class="annottext">Serialised blk -&gt; Encoding
forall a. SerialiseNodeToClient blk a =&gt; a -&gt; Encoding
</span><a href="#local-6989586621679281475"><span class="hs-identifier hs-var">enc'</span></a></span><span>
</span><span id="line-477"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestName
-&gt; Labelled (GenTx blk) -&gt; (GenTx blk -&gt; Encoding) -&gt; TestTree
forall a. TestName -&gt; Labelled a -&gt; (a -&gt; Encoding) -&gt; TestTree
</span><a href="#local-6989586621679281476"><span class="hs-identifier hs-var">test</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;GenTx&quot;</span></span><span>           </span><span class="annot"><span class="annottext">Labelled (GenTx blk)
</span><a href="#local-6989586621679281493"><span class="hs-identifier hs-var">exampleGenTx</span></a></span><span>           </span><span class="annot"><span class="annottext">GenTx blk -&gt; Encoding
forall a. SerialiseNodeToClient blk a =&gt; a -&gt; Encoding
</span><a href="#local-6989586621679281475"><span class="hs-identifier hs-var">enc'</span></a></span><span>
</span><span id="line-478"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestName
-&gt; Labelled (GenTxId blk) -&gt; (GenTxId blk -&gt; Encoding) -&gt; TestTree
forall a. TestName -&gt; Labelled a -&gt; (a -&gt; Encoding) -&gt; TestTree
</span><a href="#local-6989586621679281476"><span class="hs-identifier hs-var">test</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;GenTxId&quot;</span></span><span>         </span><span class="annot"><span class="annottext">Labelled (GenTxId blk)
</span><a href="#local-6989586621679281492"><span class="hs-identifier hs-var">exampleGenTxId</span></a></span><span>         </span><span class="annot"><span class="annottext">GenTxId blk -&gt; Encoding
forall a. SerialiseNodeToClient blk a =&gt; a -&gt; Encoding
</span><a href="#local-6989586621679281475"><span class="hs-identifier hs-var">enc'</span></a></span><span>
</span><span id="line-479"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestName
-&gt; Labelled (ApplyTxErr blk)
-&gt; (ApplyTxErr blk -&gt; Encoding)
-&gt; TestTree
forall a. TestName -&gt; Labelled a -&gt; (a -&gt; Encoding) -&gt; TestTree
</span><a href="#local-6989586621679281476"><span class="hs-identifier hs-var">test</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;ApplyTxErr&quot;</span></span><span>      </span><span class="annot"><span class="annottext">Labelled (ApplyTxErr blk)
</span><a href="#local-6989586621679281491"><span class="hs-identifier hs-var">exampleApplyTxErr</span></a></span><span>      </span><span class="annot"><span class="annottext">ApplyTxErr blk -&gt; Encoding
forall a. SerialiseNodeToClient blk a =&gt; a -&gt; Encoding
</span><a href="#local-6989586621679281475"><span class="hs-identifier hs-var">enc'</span></a></span><span>
</span><span id="line-480"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestName
-&gt; Labelled (SomeSecond BlockQuery blk)
-&gt; (SomeSecond BlockQuery blk -&gt; Encoding)
-&gt; TestTree
forall a. TestName -&gt; Labelled a -&gt; (a -&gt; Encoding) -&gt; TestTree
</span><a href="#local-6989586621679281476"><span class="hs-identifier hs-var">test</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Query&quot;</span></span><span>           </span><span class="annot"><span class="annottext">Labelled (SomeSecond BlockQuery blk)
</span><a href="#local-6989586621679281490"><span class="hs-identifier hs-var">exampleQuery</span></a></span><span>           </span><span class="annot"><span class="annottext">SomeSecond BlockQuery blk -&gt; Encoding
forall a. SerialiseNodeToClient blk a =&gt; a -&gt; Encoding
</span><a href="#local-6989586621679281475"><span class="hs-identifier hs-var">enc'</span></a></span><span>
</span><span id="line-481"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; Labelled SlotNo -&gt; (SlotNo -&gt; Encoding) -&gt; TestTree
forall a. TestName -&gt; Labelled a -&gt; (a -&gt; Encoding) -&gt; TestTree
</span><a href="#local-6989586621679281476"><span class="hs-identifier hs-var">test</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;SlotNo&quot;</span></span><span>          </span><span class="annot"><span class="annottext">Labelled SlotNo
</span><a href="#local-6989586621679281484"><span class="hs-identifier hs-var">exampleSlotNo</span></a></span><span>          </span><span class="annot"><span class="annottext">SlotNo -&gt; Encoding
forall a. SerialiseNodeToClient blk a =&gt; a -&gt; Encoding
</span><a href="#local-6989586621679281475"><span class="hs-identifier hs-var">enc'</span></a></span><span>
</span><span id="line-482"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestName
-&gt; Labelled (SomeResult blk)
-&gt; (SomeResult blk -&gt; Encoding)
-&gt; TestTree
forall a. TestName -&gt; Labelled a -&gt; (a -&gt; Encoding) -&gt; TestTree
</span><a href="#local-6989586621679281476"><span class="hs-identifier hs-var">test</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Result&quot;</span></span><span>          </span><span class="annot"><span class="annottext">Labelled (SomeResult blk)
</span><a href="#local-6989586621679281489"><span class="hs-identifier hs-var">exampleResult</span></a></span><span>          </span><span class="annot"><span class="annottext">SomeResult blk -&gt; Encoding
</span><a href="#local-6989586621679281474"><span class="hs-identifier hs-var">encRes</span></a></span><span>
</span><span id="line-483"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-484"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-485"></span><span>
</span><span id="line-486"></span><span>        </span><span id="local-6989586621679281722"><span class="annot"><a href="#local-6989586621679281475"><span class="hs-identifier hs-type">enc'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">SerialiseNodeToClient</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281754"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281722"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679281722"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Encoding</span></span></span><span>
</span><span id="line-487"></span><span>        </span><span id="local-6989586621679281475"><span class="annot"><span class="annottext">enc' :: a -&gt; Encoding
</span><a href="#local-6989586621679281475"><span class="hs-identifier hs-var hs-var">enc'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CodecConfig blk -&gt; BlockNodeToClientVersion blk -&gt; a -&gt; Encoding
forall blk a.
SerialiseNodeToClient blk a =&gt;
CodecConfig blk -&gt; BlockNodeToClientVersion blk -&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">encodeNodeToClient</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig blk
</span><a href="#local-6989586621679281500"><span class="hs-identifier hs-var">codecConfig</span></a></span><span> </span><span class="annot"><span class="annottext">BlockNodeToClientVersion blk
</span><a href="#local-6989586621679281477"><span class="hs-identifier hs-var">blockVersion</span></a></span><span>
</span><span id="line-488"></span><span>
</span><span id="line-489"></span><span>        </span><span class="annot"><a href="#local-6989586621679281474"><span class="hs-identifier hs-type">encRes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Roundtrip.html#SomeResult"><span class="hs-identifier hs-type">SomeResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281754"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Encoding</span></span><span>
</span><span id="line-490"></span><span>        </span><span id="local-6989586621679281474"><span class="annot"><span class="annottext">encRes :: SomeResult blk -&gt; Encoding
</span><a href="#local-6989586621679281474"><span class="hs-identifier hs-var hs-var">encRes</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Util.Serialisation.Roundtrip.html#SomeResult"><span class="hs-identifier hs-type">SomeResult</span></a></span><span> </span><span id="local-6989586621679281471"><span class="annot"><span class="annottext">BlockQuery blk result
</span><a href="#local-6989586621679281471"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span id="local-6989586621679281470"><span class="annot"><span class="annottext">result
</span><a href="#local-6989586621679281470"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CodecConfig blk
-&gt; BlockNodeToClientVersion blk
-&gt; BlockQuery blk result
-&gt; result
-&gt; Encoding
forall blk (query :: * -&gt; *) result.
SerialiseResult blk query =&gt;
CodecConfig blk
-&gt; BlockNodeToClientVersion blk
-&gt; query result
-&gt; result
-&gt; Encoding
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">encodeResult</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig blk
</span><a href="#local-6989586621679281500"><span class="hs-identifier hs-var">codecConfig</span></a></span><span> </span><span class="annot"><span class="annottext">BlockNodeToClientVersion blk
</span><a href="#local-6989586621679281477"><span class="hs-identifier hs-var">blockVersion</span></a></span><span> </span><span class="annot"><span class="annottext">BlockQuery blk result
</span><a href="#local-6989586621679281471"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">result
</span><a href="#local-6989586621679281470"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-491"></span><span>
</span><span id="line-492"></span><span>        </span><span id="local-6989586621679281468"><span class="annot"><a href="#local-6989586621679281476"><span class="hs-identifier hs-type">test</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TestName</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#Labelled"><span class="hs-identifier hs-type">Labelled</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281468"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679281468"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Encoding</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TestTree</span></span></span><span>
</span><span id="line-493"></span><span>        </span><span id="local-6989586621679281476"><span class="annot"><span class="annottext">test :: TestName -&gt; Labelled a -&gt; (a -&gt; Encoding) -&gt; TestTree
</span><a href="#local-6989586621679281476"><span class="hs-identifier hs-var hs-var">test</span></a></span></span><span> </span><span id="local-6989586621679281467"><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281467"><span class="hs-identifier hs-var">testName</span></a></span></span><span> </span><span id="local-6989586621679281466"><span class="annot"><span class="annottext">Labelled a
</span><a href="#local-6989586621679281466"><span class="hs-identifier hs-var">exampleValues</span></a></span></span><span> </span><span id="local-6989586621679281465"><span class="annot"><span class="annottext">a -&gt; Encoding
</span><a href="#local-6989586621679281465"><span class="hs-identifier hs-var">enc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-494"></span><span>            </span><span class="annot"><span class="annottext">TestName -&gt; Labelled a -&gt; (a -&gt; Encoding) -&gt; TestName -&gt; TestTree
forall a.
HasCallStack =&gt;
TestName -&gt; Labelled a -&gt; (a -&gt; Encoding) -&gt; TestName -&gt; TestTree
</span><a href="Test.Util.Serialisation.Golden.html#goldenTests"><span class="hs-identifier hs-var">goldenTests</span></a></span><span>
</span><span id="line-495"></span><span>              </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281467"><span class="hs-identifier hs-var">testName</span></a></span><span>
</span><span id="line-496"></span><span>              </span><span class="annot"><span class="annottext">Labelled a
</span><a href="#local-6989586621679281466"><span class="hs-identifier hs-var">exampleValues</span></a></span><span>
</span><span id="line-497"></span><span>              </span><span class="annot"><span class="annottext">a -&gt; Encoding
</span><a href="#local-6989586621679281465"><span class="hs-identifier hs-var">enc</span></a></span><span>
</span><span id="line-498"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621679281499"><span class="hs-identifier hs-var">goldenDir</span></a></span><span> </span><span class="annot"><span class="annottext">TestName -&gt; TestName -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/filepath-1.4.2.1/src"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryVersion, BlockNodeToClientVersion blk) -&gt; TestName
forall a. ToGoldenDirectory a =&gt; a -&gt; TestName
</span><a href="Test.Util.Serialisation.Golden.html#toGoldenDirectory"><span class="hs-identifier hs-var">toGoldenDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryVersion, BlockNodeToClientVersion blk)
</span><a href="#local-6989586621679281478"><span class="hs-identifier hs-var">versions</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-499"></span><span>
</span><span id="line-500"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  FlatTerm
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-503"></span><span>
</span><span id="line-504"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.2.0.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">Condense</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">TermToken</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-505"></span><span>  </span><span id="local-6989586621679281462"><span class="annot"><span class="annottext">condense :: TermToken -&gt; TestName
</span><a href="#local-6989586621679281462"><span class="hs-identifier hs-var hs-var hs-var hs-var">condense</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TermToken -&gt; TestName
forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span>
</span><span id="line-506"></span><span>
</span><span id="line-507"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Diffing Cbor
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-510"></span><span>
</span><span id="line-511"></span><span id="local-6989586621679281833"><span class="annot"><a href="Test.Util.Serialisation.Golden.html#diffToExpr"><span class="hs-identifier hs-type">diffToExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToExpr</span></span><span> </span><span class="annot"><a href="#local-6989586621679281833"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679281833"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679281833"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span></span><span>
</span><span id="line-512"></span><span id="diffToExpr"><span class="annot"><span class="annottext">diffToExpr :: a -&gt; a -&gt; TestName
</span><a href="Test.Util.Serialisation.Golden.html#diffToExpr"><span class="hs-identifier hs-var hs-var">diffToExpr</span></a></span></span><span> </span><span id="local-6989586621679281461"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679281461"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679281460"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679281460"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; TestName
forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Edit EditExpr -&gt; Doc
</span><span class="hs-identifier hs-var">ansiWlEditExpr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; a -&gt; Edit EditExpr
forall a. ToExpr a =&gt; a -&gt; a -&gt; Edit EditExpr
</span><span class="hs-identifier hs-var">ediff</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679281461"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679281460"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-513"></span><span>
</span><span id="line-514"></span><span class="hs-keyword">newtype</span><span> </span><span id="CBORBytes"><span class="annot"><a href="Test.Util.Serialisation.Golden.html#CBORBytes"><span class="hs-identifier hs-var">CBORBytes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CBORBytes"><span class="annot"><a href="Test.Util.Serialisation.Golden.html#CBORBytes"><span class="hs-identifier hs-var">CBORBytes</span></a></span></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier hs-type">Strict.ByteString</span></a></span><span>
</span><span id="line-515"></span><span>
</span><span id="line-516"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679281457"><span class="annot"><span class="hs-identifier hs-type">ToExpr</span></span><span> </span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#CBORBytes"><span class="hs-identifier hs-type">CBORBytes</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-517"></span><span>  </span><span id="local-6989586621679281455"><span class="annot"><span class="annottext">toExpr :: CBORBytes -&gt; Expr
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toExpr</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#CBORBytes"><span class="hs-identifier hs-type">CBORBytes</span></a></span><span> </span><span id="local-6989586621679281453"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281453"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-518"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(forall s. Decoder s Term)
-&gt; ByteString -&gt; Either DeserialiseFailure (ByteString, Term)
forall a.
(forall s. Decoder s a)
-&gt; ByteString -&gt; Either DeserialiseFailure (ByteString, a)
</span><span class="hs-identifier hs-var">CBOR.deserialiseFromBytes</span></span><span> </span><span class="annot"><span class="annottext">forall s. Decoder s Term
</span><span class="hs-identifier hs-var">CBOR.decodeTerm</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Either DeserialiseFailure (ByteString, Term))
-&gt; ByteString -&gt; Either DeserialiseFailure (ByteString, Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier hs-var">Lazy.fromStrict</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281453"><span class="hs-identifier hs-var">bytes</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-519"></span><span>        </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679281449"><span class="annot"><span class="annottext">DeserialiseFailure
</span><a href="#local-6989586621679281449"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; Expr
forall a. HasCallStack =&gt; TestName -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">(TestName -&gt; Expr) -&gt; TestName -&gt; Expr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Error decoding CBOR: &quot;</span></span><span> </span><span class="annot"><span class="annottext">TestName -&gt; TestName -&gt; TestName
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">DeserialiseFailure -&gt; TestName
forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">DeserialiseFailure
</span><a href="#local-6989586621679281449"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-520"></span><span>        </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679281448"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281448"><span class="hs-identifier hs-var">bytesLeftOver</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679281447"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621679281447"><span class="hs-identifier hs-var">term</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-521"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier hs-var">Lazy.null</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281448"><span class="hs-identifier hs-var">bytesLeftOver</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Expr
</span><a href="#local-6989586621679281445"><span class="hs-identifier hs-var">termToExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621679281447"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-522"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-523"></span><span>            </span><span class="annot"><span class="annottext">TestName -&gt; Expr
forall a. HasCallStack =&gt; TestName -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">(TestName -&gt; Expr) -&gt; TestName -&gt; Expr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-524"></span><span>            </span><span class="annot"><span class="annottext">[TestName] -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">unlines</span></a></span><span>
</span><span id="line-525"></span><span>              </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Unexpected leftover bytes: &quot;</span></span><span>
</span><span id="line-526"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[TestName] -&gt; TestName
forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">([TestName] -&gt; TestName) -&gt; [TestName] -&gt; TestName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; [TestName]
</span><a href="Test.Util.Serialisation.Golden.html#showHexBytesGrouped"><span class="hs-identifier hs-var">showHexBytesGrouped</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; [TestName]) -&gt; ByteString -&gt; [TestName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier hs-var">Lazy.toStrict</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281448"><span class="hs-identifier hs-var">bytesLeftOver</span></a></span><span>
</span><span id="line-527"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;when decoding&quot;</span></span><span>
</span><span id="line-528"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term -&gt; TestName
forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621679281447"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-529"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-530"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-531"></span><span>      </span><span id="local-6989586621679281442"><span class="annot"><span class="annottext">hexByteString :: ByteString -&gt; [Expr]
</span><a href="#local-6989586621679281442"><span class="hs-identifier hs-var hs-var">hexByteString</span></a></span></span><span> </span><span id="local-6989586621679281441"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281441"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-532"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Expr
forall a. ToExpr a =&gt; a -&gt; Expr
</span><span class="hs-identifier hs-var">toExpr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; Int
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier hs-var">Strict.length</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281441"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-533"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Expr] -&gt; Expr
</span><span class="hs-identifier hs-var">Lst</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TestName -&gt; Expr) -&gt; [TestName] -&gt; [Expr]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">TestName -&gt; Expr
forall a. ToExpr a =&gt; a -&gt; Expr
</span><span class="hs-identifier hs-var">toExpr</span></span><span> </span><span class="annot"><span class="annottext">([TestName] -&gt; [Expr]) -&gt; [TestName] -&gt; [Expr]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; [TestName]
</span><a href="Test.Util.Serialisation.Golden.html#showHexBytesGrouped"><span class="hs-identifier hs-var">showHexBytesGrouped</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281441"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-534"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-535"></span><span>      </span><span id="local-6989586621679281445"><span class="annot"><span class="annottext">termToExpr :: Term -&gt; Expr
</span><a href="#local-6989586621679281445"><span class="hs-identifier hs-var hs-var">termToExpr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-536"></span><span>        </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-537"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">CBOR.TInt</span></span><span> </span><span id="local-6989586621679281437"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679281437"><span class="hs-identifier hs-var">i</span></a></span></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; [Expr] -&gt; Expr
</span><span class="hs-identifier hs-var">App</span></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;TInt&quot;</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int -&gt; Expr
forall a. ToExpr a =&gt; a -&gt; Expr
</span><span class="hs-identifier hs-var">toExpr</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679281437"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-538"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">CBOR.TInteger</span></span><span> </span><span id="local-6989586621679281434"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679281434"><span class="hs-identifier hs-var">i</span></a></span></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; [Expr] -&gt; Expr
</span><span class="hs-identifier hs-var">App</span></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;TInteger&quot;</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Integer -&gt; Expr
forall a. ToExpr a =&gt; a -&gt; Expr
</span><span class="hs-identifier hs-var">toExpr</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679281434"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-539"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">CBOR.TBytes</span></span><span> </span><span id="local-6989586621679281432"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281432"><span class="hs-identifier hs-var">bs</span></a></span></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; [Expr] -&gt; Expr
</span><span class="hs-identifier hs-var">App</span></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;TBytes&quot;</span></span><span> </span><span class="annot"><span class="annottext">([Expr] -&gt; Expr) -&gt; [Expr] -&gt; Expr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; [Expr]
</span><a href="#local-6989586621679281442"><span class="hs-identifier hs-var">hexByteString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281432"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-540"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">CBOR.TBytesI</span></span><span> </span><span id="local-6989586621679281430"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281430"><span class="hs-identifier hs-var">bs</span></a></span></span><span>                 </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-541"></span><span>            </span><span class="annot"><span class="annottext">TestName -&gt; [Expr] -&gt; Expr
</span><span class="hs-identifier hs-var">App</span></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;TBytesI&quot;</span></span><span> </span><span class="annot"><span class="annottext">([Expr] -&gt; Expr) -&gt; [Expr] -&gt; Expr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; [Expr]
</span><a href="#local-6989586621679281442"><span class="hs-identifier hs-var">hexByteString</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; [Expr]) -&gt; ByteString -&gt; [Expr]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier hs-var">Lazy.toStrict</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281430"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-542"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">CBOR.TString</span></span><span> </span><span id="local-6989586621679281428"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679281428"><span class="hs-identifier hs-var">s</span></a></span></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; [Expr] -&gt; Expr
</span><span class="hs-identifier hs-var">App</span></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;TString&quot;</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text -&gt; Expr
forall a. ToExpr a =&gt; a -&gt; Expr
</span><span class="hs-identifier hs-var">toExpr</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679281428"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-543"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">CBOR.TStringI</span></span><span> </span><span id="local-6989586621679281426"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679281426"><span class="hs-identifier hs-var">s</span></a></span></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; [Expr] -&gt; Expr
</span><span class="hs-identifier hs-var">App</span></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;TStringI&quot;</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text -&gt; Expr
forall a. ToExpr a =&gt; a -&gt; Expr
</span><span class="hs-identifier hs-var">toExpr</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679281426"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-544"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">CBOR.TList</span></span><span> </span><span id="local-6989586621679281424"><span class="annot"><span class="annottext">[Term]
</span><a href="#local-6989586621679281424"><span class="hs-identifier hs-var">xs</span></a></span></span><span>                   </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-545"></span><span>            </span><span class="annot"><span class="annottext">TestName -&gt; [Expr] -&gt; Expr
</span><span class="hs-identifier hs-var">App</span></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;TList&quot;</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">[Expr] -&gt; Expr
</span><span class="hs-identifier hs-var">Lst</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Term -&gt; Expr) -&gt; [Term] -&gt; [Expr]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Expr
</span><a href="#local-6989586621679281445"><span class="hs-identifier hs-var">termToExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[Term]
</span><a href="#local-6989586621679281424"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-546"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">CBOR.TListI</span></span><span> </span><span id="local-6989586621679281422"><span class="annot"><span class="annottext">[Term]
</span><a href="#local-6989586621679281422"><span class="hs-identifier hs-var">xs</span></a></span></span><span>                  </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-547"></span><span>            </span><span class="annot"><span class="annottext">TestName -&gt; [Expr] -&gt; Expr
</span><span class="hs-identifier hs-var">App</span></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;TListI&quot;</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">[Expr] -&gt; Expr
</span><span class="hs-identifier hs-var">Lst</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Term -&gt; Expr) -&gt; [Term] -&gt; [Expr]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Expr
</span><a href="#local-6989586621679281445"><span class="hs-identifier hs-var">termToExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[Term]
</span><a href="#local-6989586621679281422"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-548"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">CBOR.TMap</span></span><span> </span><span id="local-6989586621679281420"><span class="annot"><span class="annottext">[(Term, Term)]
</span><a href="#local-6989586621679281420"><span class="hs-identifier hs-var">xs</span></a></span></span><span>                    </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-549"></span><span>            </span><span class="annot"><span class="annottext">TestName -&gt; [Expr] -&gt; Expr
</span><span class="hs-identifier hs-var">App</span></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;TMap&quot;</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">[Expr] -&gt; Expr
</span><span class="hs-identifier hs-var">Lst</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Term, Term) -&gt; Expr) -&gt; [(Term, Term)] -&gt; [Expr]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Expr, Expr) -&gt; Expr
forall a. ToExpr a =&gt; a -&gt; Expr
</span><span class="hs-identifier hs-var">toExpr</span></span><span> </span><span class="annot"><span class="annottext">((Expr, Expr) -&gt; Expr)
-&gt; ((Term, Term) -&gt; (Expr, Expr)) -&gt; (Term, Term) -&gt; Expr
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Expr) -&gt; (Term -&gt; Expr) -&gt; (Term, Term) -&gt; (Expr, Expr)
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">bimap</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Expr
</span><a href="#local-6989586621679281445"><span class="hs-identifier hs-var">termToExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Expr
</span><a href="#local-6989586621679281445"><span class="hs-identifier hs-var">termToExpr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Term, Term)]
</span><a href="#local-6989586621679281420"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-550"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">CBOR.TMapI</span></span><span> </span><span id="local-6989586621679281418"><span class="annot"><span class="annottext">[(Term, Term)]
</span><a href="#local-6989586621679281418"><span class="hs-identifier hs-var">xs</span></a></span></span><span>                   </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-551"></span><span>            </span><span class="annot"><span class="annottext">TestName -&gt; [Expr] -&gt; Expr
</span><span class="hs-identifier hs-var">App</span></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;TMapI&quot;</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">[Expr] -&gt; Expr
</span><span class="hs-identifier hs-var">Lst</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Term, Term) -&gt; Expr) -&gt; [(Term, Term)] -&gt; [Expr]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Expr, Expr) -&gt; Expr
forall a. ToExpr a =&gt; a -&gt; Expr
</span><span class="hs-identifier hs-var">toExpr</span></span><span> </span><span class="annot"><span class="annottext">((Expr, Expr) -&gt; Expr)
-&gt; ((Term, Term) -&gt; (Expr, Expr)) -&gt; (Term, Term) -&gt; Expr
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Expr) -&gt; (Term -&gt; Expr) -&gt; (Term, Term) -&gt; (Expr, Expr)
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">bimap</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Expr
</span><a href="#local-6989586621679281445"><span class="hs-identifier hs-var">termToExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Expr
</span><a href="#local-6989586621679281445"><span class="hs-identifier hs-var">termToExpr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Term, Term)]
</span><a href="#local-6989586621679281418"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-552"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">CBOR.TTagged</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">24</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CBOR.TBytes</span></span><span> </span><span id="local-6989586621679281416"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281416"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-553"></span><span>            </span><span class="annot"><span class="annottext">TestName -&gt; [Expr] -&gt; Expr
</span><span class="hs-identifier hs-var">App</span></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;CBOR-in-CBOR&quot;</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CBORBytes -&gt; Expr
forall a. ToExpr a =&gt; a -&gt; Expr
</span><span class="hs-identifier hs-var">toExpr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; CBORBytes
</span><a href="Test.Util.Serialisation.Golden.html#CBORBytes"><span class="hs-identifier hs-var">CBORBytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281416"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-554"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">CBOR.TTagged</span></span><span> </span><span id="local-6989586621679281415"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679281415"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679281414"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621679281414"><span class="hs-identifier hs-var">x</span></a></span></span><span>                </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-555"></span><span>            </span><span class="annot"><span class="annottext">TestName -&gt; [Expr] -&gt; Expr
</span><span class="hs-identifier hs-var">App</span></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;TTagged&quot;</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Word64 -&gt; Expr
forall a. ToExpr a =&gt; a -&gt; Expr
</span><span class="hs-identifier hs-var">toExpr</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679281415"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Expr
</span><a href="#local-6989586621679281445"><span class="hs-identifier hs-var">termToExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621679281414"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-556"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">CBOR.TBool</span></span><span> </span><span id="local-6989586621679281412"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679281412"><span class="hs-identifier hs-var">x</span></a></span></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; [Expr] -&gt; Expr
</span><span class="hs-identifier hs-var">App</span></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;TBool&quot;</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Bool -&gt; Expr
forall a. ToExpr a =&gt; a -&gt; Expr
</span><span class="hs-identifier hs-var">toExpr</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679281412"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-557"></span><span>          </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier hs-var">CBOR.TNull</span></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; [Expr] -&gt; Expr
</span><span class="hs-identifier hs-var">App</span></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;TNull&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-558"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">CBOR.TSimple</span></span><span> </span><span id="local-6989586621679281409"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679281409"><span class="hs-identifier hs-var">x</span></a></span></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; [Expr] -&gt; Expr
</span><span class="hs-identifier hs-var">App</span></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;TSimple&quot;</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Word8 -&gt; Expr
forall a. ToExpr a =&gt; a -&gt; Expr
</span><span class="hs-identifier hs-var">toExpr</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679281409"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-559"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">CBOR.THalf</span></span><span> </span><span id="local-6989586621679281407"><span class="annot"><span class="annottext">Float
</span><a href="#local-6989586621679281407"><span class="hs-identifier hs-var">x</span></a></span></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; [Expr] -&gt; Expr
</span><span class="hs-identifier hs-var">App</span></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;THalf&quot;</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Float -&gt; Expr
forall a. ToExpr a =&gt; a -&gt; Expr
</span><span class="hs-identifier hs-var">toExpr</span></span><span> </span><span class="annot"><span class="annottext">Float
</span><a href="#local-6989586621679281407"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-560"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">CBOR.TFloat</span></span><span> </span><span id="local-6989586621679281405"><span class="annot"><span class="annottext">Float
</span><a href="#local-6989586621679281405"><span class="hs-identifier hs-var">x</span></a></span></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; [Expr] -&gt; Expr
</span><span class="hs-identifier hs-var">App</span></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;TFloat&quot;</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Float -&gt; Expr
forall a. ToExpr a =&gt; a -&gt; Expr
</span><span class="hs-identifier hs-var">toExpr</span></span><span> </span><span class="annot"><span class="annottext">Float
</span><a href="#local-6989586621679281405"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-561"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">CBOR.TDouble</span></span><span> </span><span id="local-6989586621679281403"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679281403"><span class="hs-identifier hs-var">x</span></a></span></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TestName -&gt; [Expr] -&gt; Expr
</span><span class="hs-identifier hs-var">App</span></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;TDouble&quot;</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Double -&gt; Expr
forall a. ToExpr a =&gt; a -&gt; Expr
</span><span class="hs-identifier hs-var">toExpr</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679281403"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-562"></span><span>
</span><span id="line-563"></span><span class="hs-comment">-- | Show a ByteString as hex groups of 8bytes each. This is a slightly more</span><span>
</span><span id="line-564"></span><span class="hs-comment">-- useful form for debugging, rather than bunch of escaped characters.</span><span>
</span><span id="line-565"></span><span class="annot"><a href="Test.Util.Serialisation.Golden.html#showHexBytesGrouped"><span class="hs-identifier hs-type">showHexBytesGrouped</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier hs-type">Strict.ByteString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-566"></span><span id="showHexBytesGrouped"><span class="annot"><span class="annottext">showHexBytesGrouped :: ByteString -&gt; [TestName]
</span><a href="Test.Util.Serialisation.Golden.html#showHexBytesGrouped"><span class="hs-identifier hs-var hs-var">showHexBytesGrouped</span></a></span></span><span> </span><span id="local-6989586621679281402"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281402"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-567"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;0x&quot;</span></span><span> </span><span class="annot"><span class="annottext">TestName -&gt; TestName -&gt; TestName
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier hs-var">Strict8.unpack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; ByteString -&gt; ByteString
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier hs-var">Strict.take</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">16</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ByteString) -&gt; ByteString -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; ByteString -&gt; ByteString
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier hs-var">Strict.drop</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679281399"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281398"><span class="hs-identifier hs-var">bs16</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-568"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679281399"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679281399"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">16</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Int
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier hs-var">Strict.length</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281398"><span class="hs-identifier hs-var">bs16</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">]</span><span>
</span><span id="line-569"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-570"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-571"></span><span>    </span><span id="local-6989586621679281398"><span class="annot"><span class="annottext">bs16 :: ByteString
</span><a href="#local-6989586621679281398"><span class="hs-identifier hs-var hs-var">bs16</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">Base16.encode</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679281402"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-572"></span></pre></body></html>