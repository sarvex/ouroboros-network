<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- | Test the Praos chain selection rule but with explicit leader schedule</span><span>
</span><span id="line-2"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Ouroboros.Consensus.Mock.Node.PraosRule</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-3"></span><span>    </span><span class="annot"><a href="Ouroboros.Consensus.Mock.Node.PraosRule.html#MockPraosRuleBlock"><span class="hs-identifier">MockPraosRuleBlock</span></a></span><span>
</span><span id="line-4"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Mock.Node.PraosRule.html#protocolInfoPraosRule"><span class="hs-identifier">protocolInfoPraosRule</span></a></span><span>
</span><span id="line-5"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Map</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-9"></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.Crypto.KES</span></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.Crypto.VRF</span></span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.Config</span></a></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.HardFork.History</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HardFork</span></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.HeaderValidation</span></a></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.Ledger.Extended</span></a></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Mock.Ledger.html"><span class="hs-identifier">Ouroboros.Consensus.Mock.Ledger</span></a></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Mock.Node.html"><span class="hs-identifier">Ouroboros.Consensus.Mock.Node</span></a></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Mock.Protocol.LeaderSchedule.html"><span class="hs-identifier">Ouroboros.Consensus.Mock.Protocol.LeaderSchedule</span></a></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Mock.Protocol.Praos.html"><span class="hs-identifier">Ouroboros.Consensus.Mock.Protocol.Praos</span></a></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.Node.ProtocolInfo</span></a></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">Ouroboros.Consensus.NodeId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier">CoreNodeId</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span class="hs-keyword">type</span><span> </span><span id="MockPraosRuleBlock"><span class="annot"><a href="Ouroboros.Consensus.Mock.Node.PraosRule.html#MockPraosRuleBlock"><span class="hs-identifier hs-var">MockPraosRuleBlock</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Mock.Ledger.Block.PraosRule.html#SimplePraosRuleBlock"><span class="hs-identifier hs-type">SimplePraosRuleBlock</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Mock.Ledger.Block.html#SimpleMockCrypto"><span class="hs-identifier hs-type">SimpleMockCrypto</span></a></span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span id="local-6989586621679233973"><span class="annot"><a href="Ouroboros.Consensus.Mock.Node.PraosRule.html#protocolInfoPraosRule"><span class="hs-identifier hs-type">protocolInfoPraosRule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679233973"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-27"></span><span>                      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">NumCoreNodes</span></a></span><span>
</span><span id="line-28"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">CoreNodeId</span></a></span><span>
</span><span id="line-29"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Mock.Protocol.Praos.html#PraosParams"><span class="hs-identifier hs-type">PraosParams</span></a></span><span>
</span><span id="line-30"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">HardFork.EraParams</span></a></span><span>
</span><span id="line-31"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">LeaderSchedule</span></a></span><span>
</span><span id="line-32"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Mock.Protocol.Praos.html#PraosEvolvingStake"><span class="hs-identifier hs-type">PraosEvolvingStake</span></a></span><span>
</span><span id="line-33"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">ProtocolInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679233973"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Mock.Node.PraosRule.html#MockPraosRuleBlock"><span class="hs-identifier hs-type">MockPraosRuleBlock</span></a></span></span><span>
</span><span id="line-34"></span><span id="protocolInfoPraosRule"><span class="annot"><span class="annottext">protocolInfoPraosRule :: NumCoreNodes
-&gt; CoreNodeId
-&gt; PraosParams
-&gt; EraParams
-&gt; LeaderSchedule
-&gt; PraosEvolvingStake
-&gt; ProtocolInfo m MockPraosRuleBlock
</span><a href="Ouroboros.Consensus.Mock.Node.PraosRule.html#protocolInfoPraosRule"><span class="hs-identifier hs-var hs-var">protocolInfoPraosRule</span></a></span></span><span> </span><span id="local-6989586621679233972"><span class="annot"><span class="annottext">NumCoreNodes
</span><a href="#local-6989586621679233972"><span class="hs-identifier hs-var">numCoreNodes</span></a></span></span><span>
</span><span id="line-35"></span><span>                      </span><span id="local-6989586621679233971"><span class="annot"><span class="annottext">CoreNodeId
</span><a href="#local-6989586621679233971"><span class="hs-identifier hs-var">nid</span></a></span></span><span>
</span><span id="line-36"></span><span>                      </span><span id="local-6989586621679233970"><span class="annot"><span class="annottext">PraosParams
</span><a href="#local-6989586621679233970"><span class="hs-identifier hs-var">params</span></a></span></span><span>
</span><span id="line-37"></span><span>                      </span><span id="local-6989586621679233969"><span class="annot"><span class="annottext">EraParams
</span><a href="#local-6989586621679233969"><span class="hs-identifier hs-var">eraParams</span></a></span></span><span>
</span><span id="line-38"></span><span>                      </span><span id="local-6989586621679233968"><span class="annot"><span class="annottext">LeaderSchedule
</span><a href="#local-6989586621679233968"><span class="hs-identifier hs-var">schedule</span></a></span></span><span>
</span><span id="line-39"></span><span>                      </span><span id="local-6989586621679233967"><span class="annot"><span class="annottext">PraosEvolvingStake
</span><a href="#local-6989586621679233967"><span class="hs-identifier hs-var">evolvingStake</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-40"></span><span>    </span><span class="annot"><span class="annottext">ProtocolInfo :: forall (m :: * -&gt; *) b.
TopLevelConfig b
-&gt; ExtLedgerState b -&gt; m [BlockForging m b] -&gt; ProtocolInfo m b
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">ProtocolInfo</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-41"></span><span>      </span><span class="annot"><span class="annottext">pInfoConfig :: TopLevelConfig MockPraosRuleBlock
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">pInfoConfig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TopLevelConfig :: forall blk.
ConsensusConfig (BlockProtocol blk)
-&gt; LedgerConfig blk
-&gt; BlockConfig blk
-&gt; CodecConfig blk
-&gt; StorageConfig blk
-&gt; TopLevelConfig blk
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">TopLevelConfig</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-42"></span><span>          </span><span class="annot"><span class="annottext">topLevelConfigProtocol :: ConsensusConfig (BlockProtocol MockPraosRuleBlock)
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">topLevelConfigProtocol</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WLSConfig :: forall p.
LeaderSchedule
-&gt; ConsensusConfig p
-&gt; CoreNodeId
-&gt; ConsensusConfig (WithLeaderSchedule p)
</span><a href="Ouroboros.Consensus.Mock.Protocol.LeaderSchedule.html#WLSConfig"><span class="hs-identifier hs-type">WLSConfig</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-43"></span><span>              </span><span class="annot"><span class="annottext">wlsConfigSchedule :: LeaderSchedule
</span><a href="Ouroboros.Consensus.Mock.Protocol.LeaderSchedule.html#wlsConfigSchedule"><span class="hs-identifier hs-var">wlsConfigSchedule</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LeaderSchedule
</span><a href="#local-6989586621679233968"><span class="hs-identifier hs-var">schedule</span></a></span><span>
</span><span id="line-44"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wlsConfigP :: ConsensusConfig (Praos PraosCryptoUnused)
</span><a href="Ouroboros.Consensus.Mock.Protocol.LeaderSchedule.html#wlsConfigP"><span class="hs-identifier hs-var">wlsConfigP</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PraosConfig :: forall c.
PraosParams
-&gt; Natural
-&gt; StakeDist
-&gt; PraosEvolvingStake
-&gt; SignKeyVRF (PraosVRF c)
-&gt; Map CoreNodeId (VerKeyKES (PraosKES c), VerKeyVRF (PraosVRF c))
-&gt; ConsensusConfig (Praos c)
</span><a href="Ouroboros.Consensus.Mock.Protocol.Praos.html#PraosConfig"><span class="hs-identifier hs-type">PraosConfig</span></a></span><span>
</span><span id="line-45"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">praosParams :: PraosParams
</span><a href="Ouroboros.Consensus.Mock.Protocol.Praos.html#praosParams"><span class="hs-identifier hs-var">praosParams</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PraosParams
</span><a href="#local-6989586621679233970"><span class="hs-identifier hs-var">params</span></a></span><span>
</span><span id="line-46"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">praosSignKeyVRF :: SignKeyVRF (PraosVRF PraosCryptoUnused)
</span><a href="Ouroboros.Consensus.Mock.Protocol.Praos.html#praosSignKeyVRF"><span class="hs-identifier hs-var">praosSignKeyVRF</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SignKeyVRF (PraosVRF PraosCryptoUnused)
SignKeyVRF NeverVRF
</span><span class="hs-identifier hs-var">NeverUsedSignKeyVRF</span></span><span>
</span><span id="line-47"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">praosInitialEta :: Natural
</span><a href="Ouroboros.Consensus.Mock.Protocol.Praos.html#praosInitialEta"><span class="hs-identifier hs-var">praosInitialEta</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span>
</span><span id="line-48"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">praosInitialStake :: StakeDist
</span><a href="Ouroboros.Consensus.Mock.Protocol.Praos.html#praosInitialStake"><span class="hs-identifier hs-var">praosInitialStake</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AddrDist -&gt; StakeDist
</span><a href="Ouroboros.Consensus.Mock.Ledger.Stake.html#genesisStakeDist"><span class="hs-identifier hs-var">genesisStakeDist</span></a></span><span> </span><span class="annot"><span class="annottext">AddrDist
</span><a href="#local-6989586621679233952"><span class="hs-identifier hs-var">addrDist</span></a></span><span>
</span><span id="line-49"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">praosEvolvingStake :: PraosEvolvingStake
</span><a href="Ouroboros.Consensus.Mock.Protocol.Praos.html#praosEvolvingStake"><span class="hs-identifier hs-var">praosEvolvingStake</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PraosEvolvingStake
</span><a href="#local-6989586621679233967"><span class="hs-identifier hs-var">evolvingStake</span></a></span><span>
</span><span id="line-50"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">praosVerKeys :: Map
  CoreNodeId
  (VerKeyKES (PraosKES PraosCryptoUnused),
   VerKeyVRF (PraosVRF PraosCryptoUnused))
</span><a href="Ouroboros.Consensus.Mock.Protocol.Praos.html#praosVerKeys"><span class="hs-identifier hs-var">praosVerKeys</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map CoreNodeId (VerKeyKES NeverKES, VerKeyVRF NeverVRF)
Map
  CoreNodeId
  (VerKeyKES (PraosKES PraosCryptoUnused),
   VerKeyVRF (PraosVRF PraosCryptoUnused))
</span><a href="#local-6989586621679233949"><span class="hs-identifier hs-var">verKeys</span></a></span><span>
</span><span id="line-51"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-52"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wlsConfigNodeId :: CoreNodeId
</span><a href="Ouroboros.Consensus.Mock.Protocol.LeaderSchedule.html#wlsConfigNodeId"><span class="hs-identifier hs-var">wlsConfigNodeId</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreNodeId
</span><a href="#local-6989586621679233971"><span class="hs-identifier hs-var">nid</span></a></span><span>
</span><span id="line-53"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-54"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">topLevelConfigLedger :: LedgerConfig MockPraosRuleBlock
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">topLevelConfigLedger</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MockLedgerConfig SimpleMockCrypto SimplePraosRuleExt
-&gt; EraParams
-&gt; SimpleLedgerConfig SimpleMockCrypto SimplePraosRuleExt
forall c ext.
MockLedgerConfig c ext -&gt; EraParams -&gt; SimpleLedgerConfig c ext
</span><a href="Ouroboros.Consensus.Mock.Ledger.Block.html#SimpleLedgerConfig"><span class="hs-identifier hs-var">SimpleLedgerConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">EraParams
</span><a href="#local-6989586621679233969"><span class="hs-identifier hs-var">eraParams</span></a></span><span>
</span><span id="line-55"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">topLevelConfigBlock :: BlockConfig MockPraosRuleBlock
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">topLevelConfigBlock</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockConfig MockPraosRuleBlock
forall c ext. BlockConfig (SimpleBlock c ext)
</span><a href="Ouroboros.Consensus.Mock.Ledger.Block.html#SimpleBlockConfig"><span class="hs-identifier hs-var">SimpleBlockConfig</span></a></span><span>
</span><span id="line-56"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">topLevelConfigCodec :: CodecConfig MockPraosRuleBlock
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">topLevelConfigCodec</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CodecConfig MockPraosRuleBlock
forall c ext. CodecConfig (SimpleBlock c ext)
</span><a href="Ouroboros.Consensus.Mock.Ledger.Block.html#SimpleCodecConfig"><span class="hs-identifier hs-var">SimpleCodecConfig</span></a></span><span>
</span><span id="line-57"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">topLevelConfigStorage :: StorageConfig MockPraosRuleBlock
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">topLevelConfigStorage</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SecurityParam -&gt; StorageConfig MockPraosRuleBlock
forall c ext. SecurityParam -&gt; StorageConfig (SimpleBlock c ext)
</span><a href="Ouroboros.Consensus.Mock.Ledger.Block.html#SimpleStorageConfig"><span class="hs-identifier hs-var">SimpleStorageConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PraosParams -&gt; SecurityParam
</span><a href="Ouroboros.Consensus.Mock.Protocol.Praos.html#praosSecurityParam"><span class="hs-identifier hs-var hs-var">praosSecurityParam</span></a></span><span> </span><span class="annot"><span class="annottext">PraosParams
</span><a href="#local-6989586621679233970"><span class="hs-identifier hs-var">params</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-59"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pInfoInitLedger :: ExtLedgerState MockPraosRuleBlock
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">pInfoInitLedger</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExtLedgerState :: forall blk.
LedgerState blk -&gt; HeaderState blk -&gt; ExtLedgerState blk
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">ExtLedgerState</span></a></span><span>
</span><span id="line-60"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ledgerState :: LedgerState MockPraosRuleBlock
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">ledgerState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AddrDist -&gt; LedgerState MockPraosRuleBlock
forall c ext. AddrDist -&gt; LedgerState (SimpleBlock c ext)
</span><a href="Ouroboros.Consensus.Mock.Ledger.Block.html#genesisSimpleLedgerState"><span class="hs-identifier hs-var">genesisSimpleLedgerState</span></a></span><span> </span><span class="annot"><span class="annottext">AddrDist
</span><a href="#local-6989586621679233952"><span class="hs-identifier hs-var">addrDist</span></a></span><span>
</span><span id="line-61"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">headerState :: HeaderState MockPraosRuleBlock
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">headerState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ChainDepState (BlockProtocol MockPraosRuleBlock)
-&gt; HeaderState MockPraosRuleBlock
forall blk. ChainDepState (BlockProtocol blk) -&gt; HeaderState blk
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">genesisHeaderState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-63"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pInfoBlockForging :: m [BlockForging m MockPraosRuleBlock]
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">pInfoBlockForging</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[BlockForging m MockPraosRuleBlock]
-&gt; m [BlockForging m MockPraosRuleBlock]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CanBeLeader (BlockProtocol MockPraosRuleBlock)
-&gt; ForgeExt SimpleMockCrypto SimplePraosRuleExt
-&gt; BlockForging m MockPraosRuleBlock
forall c ext (m :: * -&gt; *).
(RunMockBlock c ext, CannotForge (SimpleBlock c ext) ~ Void,
 ForgeStateInfo (SimpleBlock c ext) ~ (),
 ForgeStateUpdateError (SimpleBlock c ext) ~ Void, Monad m) =&gt;
CanBeLeader (BlockProtocol (SimpleBlock c ext))
-&gt; ForgeExt c ext -&gt; BlockForging m (SimpleBlock c ext)
</span><a href="Ouroboros.Consensus.Mock.Node.html#simpleBlockForging"><span class="hs-identifier hs-var">simpleBlockForging</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ForgeExt SimpleMockCrypto SimplePraosRuleExt
forall c. SimpleCrypto c =&gt; ForgeExt c SimplePraosRuleExt
</span><a href="Ouroboros.Consensus.Mock.Ledger.Block.PraosRule.html#forgePraosRuleExt"><span class="hs-identifier hs-var">forgePraosRuleExt</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-64"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-66"></span><span>    </span><span class="annot"><a href="#local-6989586621679233952"><span class="hs-identifier hs-type">addrDist</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Mock.Ledger.Address.html#AddrDist"><span class="hs-identifier hs-type">AddrDist</span></a></span><span>
</span><span id="line-67"></span><span>    </span><span id="local-6989586621679233952"><span class="annot"><span class="annottext">addrDist :: AddrDist
</span><a href="#local-6989586621679233952"><span class="hs-identifier hs-var hs-var">addrDist</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NumCoreNodes -&gt; AddrDist
</span><a href="Ouroboros.Consensus.Mock.Ledger.Address.html#mkAddrDist"><span class="hs-identifier hs-var">mkAddrDist</span></a></span><span> </span><span class="annot"><span class="annottext">NumCoreNodes
</span><a href="#local-6989586621679233972"><span class="hs-identifier hs-var">numCoreNodes</span></a></span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span>    </span><span class="annot"><a href="#local-6989586621679233949"><span class="hs-identifier hs-type">verKeys</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-type">CoreNodeId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">VerKeyKES</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">NeverKES</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">VerKeyVRF</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">NeverVRF</span></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span>    </span><span id="local-6989586621679233949"><span class="annot"><span class="annottext">verKeys :: Map CoreNodeId (VerKeyKES NeverKES, VerKeyVRF NeverVRF)
</span><a href="#local-6989586621679233949"><span class="hs-identifier hs-var hs-var">verKeys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(CoreNodeId, (VerKeyKES NeverKES, VerKeyVRF NeverVRF))]
-&gt; Map CoreNodeId (VerKeyKES NeverKES, VerKeyVRF NeverVRF)
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.fromList</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreNodeId
</span><a href="#local-6989586621679233927"><span class="hs-identifier hs-var">nid'</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VerKeyKES NeverKES
</span><span class="hs-identifier hs-var">NeverUsedVerKeyKES</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VerKeyVRF NeverVRF
</span><span class="hs-identifier hs-var">NeverUsedVerKeyVRF</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span>                           </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679233927"><span class="annot"><span class="annottext">CoreNodeId
</span><a href="#local-6989586621679233927"><span class="hs-identifier hs-var">nid'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NumCoreNodes -&gt; [CoreNodeId]
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-consensus-0.3.1.0/noopt/doc/html/ouroboros-consensus/src"><span class="hs-identifier hs-var">enumCoreNodes</span></a></span><span> </span><span class="annot"><span class="annottext">NumCoreNodes
</span><a href="#local-6989586621679233972"><span class="hs-identifier hs-var">numCoreNodes</span></a></span><span>
</span><span id="line-72"></span><span>                           </span><span class="hs-special">]</span><span>
</span><span id="line-73"></span></pre></body></html>