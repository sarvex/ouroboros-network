<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DataKinds           #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE EmptyCase           #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts    #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances   #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE GADTs               #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns      #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE PolyKinds           #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes          #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE StandaloneDeriving  #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications    #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies        #-}</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Ouroboros.Network.Protocol.Handshake.Type</span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Handshake Protocol</span></span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#Handshake"><span class="hs-identifier">Handshake</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Message</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ClientHasAgency</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ServerHasAgency</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">NobodyHasAgency</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><span class="hs-comment">-- $simultanous-open</span></span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#RefuseReason"><span class="hs-identifier">RefuseReason</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#HandshakeProtocolError"><span class="hs-identifier">HandshakeProtocolError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Exception</span></a></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Map</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier">Text</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Typeable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Typeable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Network.TypedProtocol.Core</span></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-network-api-0.1.0.0/noopt/doc/html/ouroboros-network-api/src"><span class="hs-identifier">Ouroboros.Network.Util.ShowProxy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-network-api-0.1.0.0/noopt/doc/html/ouroboros-network-api/src"><span class="hs-identifier">ShowProxy</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-36"></span><span class="hs-comment">-- The handshake mini-protocol is used initially to agree the version and</span><span>
</span><span id="line-37"></span><span class="hs-comment">-- associated parameters of the protocol to use for all subsequent</span><span>
</span><span id="line-38"></span><span class="hs-comment">-- communication.</span><span>
</span><span id="line-39"></span><span class="hs-comment">--</span><span>
</span><span id="line-40"></span><span class="hs-keyword">data</span><span> </span><span id="Handshake"><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#Handshake"><span class="hs-identifier hs-var">Handshake</span></a></span></span><span> </span><span id="local-6989586621679252374"><span class="annot"><a href="#local-6989586621679252374"><span class="hs-identifier hs-type">vNumber</span></a></span></span><span> </span><span id="local-6989586621679252373"><span class="annot"><a href="#local-6989586621679252373"><span class="hs-identifier hs-type">vParams</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-41"></span><span>    </span><span id="local-6989586621679252371"><span id="local-6989586621679252372"><span id="StPropose"><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#StPropose"><span class="hs-identifier hs-var">StPropose</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#Handshake"><span class="hs-identifier hs-type">Handshake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252372"><span class="hs-identifier hs-type">vNumber</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252371"><span class="hs-identifier hs-type">vParams</span></a></span></span></span><span>
</span><span id="line-42"></span><span>    </span><span id="local-6989586621679252368"><span id="local-6989586621679252369"><span id="StConfirm"><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#StConfirm"><span class="hs-identifier hs-var">StConfirm</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#Handshake"><span class="hs-identifier hs-type">Handshake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252369"><span class="hs-identifier hs-type">vNumber</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252368"><span class="hs-identifier hs-type">vParams</span></a></span></span></span><span>
</span><span id="line-43"></span><span>    </span><span id="local-6989586621679252365"><span id="local-6989586621679252366"><span id="StDone"><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#StDone"><span class="hs-identifier hs-var">StDone</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#Handshake"><span class="hs-identifier hs-type">Handshake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252366"><span class="hs-identifier hs-type">vNumber</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252365"><span class="hs-identifier hs-type">vParams</span></a></span></span></span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span id="local-6989586621679252362"><span id="local-6989586621679252363"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-network-api-0.1.0.0/noopt/doc/html/ouroboros-network-api/src"><span class="hs-identifier hs-type">ShowProxy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#Handshake"><span class="hs-identifier hs-type">Handshake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252363"><span class="hs-identifier hs-type">vNumber</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252362"><span class="hs-identifier hs-type">vParams</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-46"></span><span>    </span><span id="local-6989586621679252359"><span class="annot"><span class="annottext">showProxy :: Proxy (Handshake vNumber vParams) -&gt; String
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-network-api-0.1.0.0/noopt/doc/html/ouroboros-network-api/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">showProxy</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy (Handshake vNumber vParams)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Handshake&quot;</span></span></span></span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-49"></span><span class="hs-comment">-- Reasons by which a server can refuse proposed version.</span><span>
</span><span id="line-50"></span><span class="hs-comment">--</span><span>
</span><span id="line-51"></span><span class="hs-keyword">data</span><span> </span><span id="RefuseReason"><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#RefuseReason"><span class="hs-identifier hs-var">RefuseReason</span></a></span></span><span> </span><span id="local-6989586621679252357"><span class="annot"><a href="#local-6989586621679252357"><span class="hs-identifier hs-type">vNumber</span></a></span></span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-comment">-- | All of the prosed versions where not known to the server.</span><span>
</span><span id="line-53"></span><span>  </span><span class="hs-comment">-- Since the server sends all versions that it can knows about, some of them</span><span>
</span><span id="line-54"></span><span>  </span><span class="hs-comment">-- we might not be able to decode, so we include raw tags @[Int]@.</span><span>
</span><span id="line-55"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="VersionMismatch"><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#VersionMismatch"><span class="hs-identifier hs-var">VersionMismatch</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679252357"><span class="hs-identifier hs-type">vNumber</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span>  </span><span class="hs-comment">-- | The server failed to decode version parameters.</span><span>
</span><span id="line-59"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-60"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="HandshakeDecodeError"><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#HandshakeDecodeError"><span class="hs-identifier hs-var">HandshakeDecodeError</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679252357"><span class="hs-identifier hs-type">vNumber</span></a></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-comment">-- | The server refused to run the proposed version parameters</span><span>
</span><span id="line-63"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-64"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Refused"><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#Refused"><span class="hs-identifier hs-var">Refused</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679252357"><span class="hs-identifier hs-type">vNumber</span></a></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679252350"><span id="local-6989586621679252352"><span class="annot"><span class="annottext">RefuseReason vNumber -&gt; RefuseReason vNumber -&gt; Bool
(RefuseReason vNumber -&gt; RefuseReason vNumber -&gt; Bool)
-&gt; (RefuseReason vNumber -&gt; RefuseReason vNumber -&gt; Bool)
-&gt; Eq (RefuseReason vNumber)
forall vNumber.
Eq vNumber =&gt;
RefuseReason vNumber -&gt; RefuseReason vNumber -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: RefuseReason vNumber -&gt; RefuseReason vNumber -&gt; Bool
$c/= :: forall vNumber.
Eq vNumber =&gt;
RefuseReason vNumber -&gt; RefuseReason vNumber -&gt; Bool
== :: RefuseReason vNumber -&gt; RefuseReason vNumber -&gt; Bool
$c== :: forall vNumber.
Eq vNumber =&gt;
RefuseReason vNumber -&gt; RefuseReason vNumber -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679252343"><span id="local-6989586621679252345"><span id="local-6989586621679252347"><span class="annot"><span class="annottext">Int -&gt; RefuseReason vNumber -&gt; ShowS
[RefuseReason vNumber] -&gt; ShowS
RefuseReason vNumber -&gt; String
(Int -&gt; RefuseReason vNumber -&gt; ShowS)
-&gt; (RefuseReason vNumber -&gt; String)
-&gt; ([RefuseReason vNumber] -&gt; ShowS)
-&gt; Show (RefuseReason vNumber)
forall vNumber.
Show vNumber =&gt;
Int -&gt; RefuseReason vNumber -&gt; ShowS
forall vNumber. Show vNumber =&gt; [RefuseReason vNumber] -&gt; ShowS
forall vNumber. Show vNumber =&gt; RefuseReason vNumber -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [RefuseReason vNumber] -&gt; ShowS
$cshowList :: forall vNumber. Show vNumber =&gt; [RefuseReason vNumber] -&gt; ShowS
show :: RefuseReason vNumber -&gt; String
$cshow :: forall vNumber. Show vNumber =&gt; RefuseReason vNumber -&gt; String
showsPrec :: Int -&gt; RefuseReason vNumber -&gt; ShowS
$cshowsPrec :: forall vNumber.
Show vNumber =&gt;
Int -&gt; RefuseReason vNumber -&gt; ShowS
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span id="local-6989586621679252341"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679252333"><span id="local-6989586621679252335"><span id="local-6989586621679252337"><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252341"><span class="hs-identifier hs-type">vNumber</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252341"><span class="hs-identifier hs-type">vNumber</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Exception</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#RefuseReason"><span class="hs-identifier hs-type">RefuseReason</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252341"><span class="hs-identifier hs-type">vNumber</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span id="local-6989586621679252330"><span id="local-6989586621679252331"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Protocol</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#Handshake"><span class="hs-identifier hs-type">Handshake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252331"><span class="hs-identifier hs-type">vNumber</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252330"><span class="hs-identifier hs-type">vParams</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span>    </span><span class="hs-keyword">data</span><span> </span><span id="Message"><span class="annot"><span class="hs-identifier hs-var">Message</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#Handshake"><span class="hs-identifier hs-type">Handshake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252331"><span class="hs-identifier hs-type">vNumber</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252330"><span class="hs-identifier hs-type">vParams</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679252325"><span class="annot"><a href="#local-6989586621679252325"><span class="hs-identifier hs-type hs-type">from</span></a></span></span><span> </span><span id="local-6989586621679252324"><span class="annot"><a href="#local-6989586621679252324"><span class="hs-identifier hs-type hs-type">to</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span>      </span><span class="hs-comment">-- |</span><span>
</span><span id="line-75"></span><span>      </span><span class="hs-comment">-- Propose versions together with version parameters.  It must be</span><span>
</span><span id="line-76"></span><span>      </span><span class="hs-comment">-- encoded to a sorted list.</span><span>
</span><span id="line-77"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-78"></span><span>      </span><span id="local-6989586621679252322"><span id="local-6989586621679252323"><span id="MsgProposeVersions"><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#MsgProposeVersions"><span class="hs-identifier hs-var">MsgProposeVersions</span></a></span></span><span>
</span><span id="line-79"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252323"><span class="hs-identifier hs-type">vNumber</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252322"><span class="hs-identifier hs-type">vParams</span></a></span><span>
</span><span id="line-80"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Message</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#Handshake"><span class="hs-identifier hs-type">Handshake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252323"><span class="hs-identifier hs-type">vNumber</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252322"><span class="hs-identifier hs-type">vParams</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#StPropose"><span class="hs-identifier hs-type">StPropose</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#StConfirm"><span class="hs-identifier hs-type">StConfirm</span></a></span></span></span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span>      </span><span class="hs-comment">-- |</span><span>
</span><span id="line-83"></span><span>      </span><span class="hs-comment">-- `MsgReplyVersions` received as a response to 'MsgProposeVersions'.  It</span><span>
</span><span id="line-84"></span><span>      </span><span class="hs-comment">-- is not supported to explicitly send this message. It can only be</span><span>
</span><span id="line-85"></span><span>      </span><span class="hs-comment">-- received as a copy of 'MsgProposeVersions' in a simultaneous open</span><span>
</span><span id="line-86"></span><span>      </span><span class="hs-comment">-- scenario.</span><span>
</span><span id="line-87"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-88"></span><span>      </span><span id="local-6989586621679252319"><span id="local-6989586621679252320"><span id="MsgReplyVersions"><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#MsgReplyVersions"><span class="hs-identifier hs-var">MsgReplyVersions</span></a></span></span><span>
</span><span id="line-89"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252320"><span class="hs-identifier hs-type">vNumber</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252319"><span class="hs-identifier hs-type">vParams</span></a></span><span>
</span><span id="line-90"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Message</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#Handshake"><span class="hs-identifier hs-type">Handshake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252320"><span class="hs-identifier hs-type">vNumber</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252319"><span class="hs-identifier hs-type">vParams</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#StConfirm"><span class="hs-identifier hs-type">StConfirm</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#StDone"><span class="hs-identifier hs-type">StDone</span></a></span></span></span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span>      </span><span class="hs-comment">-- |</span><span>
</span><span id="line-93"></span><span>      </span><span class="hs-comment">-- The remote end decides which version to use and sends chosen version.</span><span>
</span><span id="line-94"></span><span>      </span><span class="hs-comment">-- The server is allowed to modify version parameters.</span><span>
</span><span id="line-95"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-96"></span><span>      </span><span id="local-6989586621679252316"><span id="local-6989586621679252317"><span id="MsgAcceptVersion"><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#MsgAcceptVersion"><span class="hs-identifier hs-var">MsgAcceptVersion</span></a></span></span><span>
</span><span id="line-97"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679252317"><span class="hs-identifier hs-type">vNumber</span></a></span><span>
</span><span id="line-98"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679252316"><span class="hs-identifier hs-type">vParams</span></a></span><span>
</span><span id="line-99"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Message</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#Handshake"><span class="hs-identifier hs-type">Handshake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252317"><span class="hs-identifier hs-type">vNumber</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252316"><span class="hs-identifier hs-type">vParams</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#StConfirm"><span class="hs-identifier hs-type">StConfirm</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#StDone"><span class="hs-identifier hs-type">StDone</span></a></span></span></span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span>      </span><span class="hs-comment">-- |</span><span>
</span><span id="line-102"></span><span>      </span><span class="hs-comment">-- or it refuses to run any version,</span><span>
</span><span id="line-103"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-104"></span><span>      </span><span id="local-6989586621679252313"><span id="local-6989586621679252314"><span id="MsgRefuse"><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#MsgRefuse"><span class="hs-identifier hs-var">MsgRefuse</span></a></span></span><span>
</span><span id="line-105"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#RefuseReason"><span class="hs-identifier hs-type">RefuseReason</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252314"><span class="hs-identifier hs-type">vNumber</span></a></span><span>
</span><span id="line-106"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Message</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#Handshake"><span class="hs-identifier hs-type">Handshake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252314"><span class="hs-identifier hs-type">vNumber</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252313"><span class="hs-identifier hs-type">vParams</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#StConfirm"><span class="hs-identifier hs-type">StConfirm</span></a></span><span> </span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#StDone"><span class="hs-identifier hs-type">StDone</span></a></span></span></span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span>    </span><span class="hs-keyword">data</span><span> </span><span id="ClientHasAgency"><span class="annot"><span class="hs-identifier hs-var">ClientHasAgency</span></span></span><span> </span><span id="local-6989586621679252311"><span class="annot"><a href="#local-6989586621679252311"><span class="hs-identifier hs-type hs-type">st</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-109"></span><span>      </span><span id="TokPropose"><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#TokPropose"><span class="hs-identifier hs-var">TokPropose</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ClientHasAgency</span></span><span> </span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#StPropose"><span class="hs-identifier hs-type">StPropose</span></a></span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span>    </span><span class="hs-keyword">data</span><span> </span><span id="ServerHasAgency"><span class="annot"><span class="hs-identifier hs-var">ServerHasAgency</span></span></span><span> </span><span id="local-6989586621679252309"><span class="annot"><a href="#local-6989586621679252309"><span class="hs-identifier hs-type hs-type">st</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-112"></span><span>      </span><span id="TokConfirm"><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#TokConfirm"><span class="hs-identifier hs-var">TokConfirm</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerHasAgency</span></span><span> </span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#StConfirm"><span class="hs-identifier hs-type">StConfirm</span></a></span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span>    </span><span class="hs-keyword">data</span><span> </span><span id="NobodyHasAgency"><span class="annot"><span class="hs-identifier hs-var">NobodyHasAgency</span></span></span><span> </span><span id="local-6989586621679252307"><span class="annot"><a href="#local-6989586621679252307"><span class="hs-identifier hs-type hs-type">st</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-115"></span><span>      </span><span id="TokDone"><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#TokDone"><span class="hs-identifier hs-var">TokDone</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NobodyHasAgency</span></span><span> </span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#StDone"><span class="hs-identifier hs-type">StDone</span></a></span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span>    </span><span id="local-6989586621679252305"><span class="annot"><span class="annottext">exclusionLemma_ClientAndServerHaveAgency :: ClientHasAgency st -&gt; ServerHasAgency st -&gt; Void
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">exclusionLemma_ClientAndServerHaveAgency</span></span></span><span> </span><span class="annot"><span class="annottext">ClientHasAgency st
</span><a href="Ouroboros.Network.Protocol.Handshake.Type.html#TokPropose"><span class="hs-identifier hs-var">TokPropose</span></a></span><span> </span><span id="local-6989586621679252303"><span class="annot"><span class="annottext">ServerHasAgency st
</span><a href="#local-6989586621679252303"><span class="hs-identifier hs-var">tok</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ServerHasAgency st
</span><a href="#local-6989586621679252303"><span class="hs-identifier hs-var">tok</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>
</span><span id="line-118"></span><span>    </span><span id="local-6989586621679252302"><span class="annot"><span class="annottext">exclusionLemma_NobodyAndClientHaveAgency :: NobodyHasAgency st -&gt; ClientHasAgency st -&gt; Void
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">exclusionLemma_NobodyAndClientHaveAgency</span></span></span><span> </span><span class="annot"><span class="annottext">NobodyHasAgency st
</span><a href="Ouroboros.Network.Protocol.Handshake.Type.html#TokDone"><span class="hs-identifier hs-var">TokDone</span></a></span><span>    </span><span id="local-6989586621679252300"><span class="annot"><span class="annottext">ClientHasAgency st
</span><a href="#local-6989586621679252300"><span class="hs-identifier hs-var">tok</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ClientHasAgency st
</span><a href="#local-6989586621679252300"><span class="hs-identifier hs-var">tok</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>
</span><span id="line-119"></span><span>    </span><span id="local-6989586621679252299"><span class="annot"><span class="annottext">exclusionLemma_NobodyAndServerHaveAgency :: NobodyHasAgency st -&gt; ServerHasAgency st -&gt; Void
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">exclusionLemma_NobodyAndServerHaveAgency</span></span></span><span> </span><span class="annot"><span class="annottext">NobodyHasAgency st
</span><a href="Ouroboros.Network.Protocol.Handshake.Type.html#TokDone"><span class="hs-identifier hs-var">TokDone</span></a></span><span>    </span><span id="local-6989586621679252297"><span class="annot"><span class="annottext">ServerHasAgency st
</span><a href="#local-6989586621679252297"><span class="hs-identifier hs-var">tok</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ServerHasAgency st
</span><a href="#local-6989586621679252297"><span class="hs-identifier hs-var">tok</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span></span></span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span class="hs-comment">-- $simultanous-open</span><span>
</span><span id="line-122"></span><span class="hs-comment">--</span><span>
</span><span id="line-123"></span><span class="hs-comment">-- On simultaneous open both sides will send `MsgProposeVersions`, which will be</span><span>
</span><span id="line-124"></span><span class="hs-comment">-- decoded as `MsgReplyVersions`.  It is a terminal message of the protocol.  It</span><span>
</span><span id="line-125"></span><span class="hs-comment">-- is important to stress that in this case both sides will make the choice</span><span>
</span><span id="line-126"></span><span class="hs-comment">-- which version and parameters to pick.  Our algorithm for picking version is</span><span>
</span><span id="line-127"></span><span class="hs-comment">-- symmetric, which ensures that both sides will end up with the same choice.</span><span>
</span><span id="line-128"></span><span class="hs-comment">-- If one side decides to refuse the version it will close the connection,</span><span>
</span><span id="line-129"></span><span class="hs-comment">-- without sending the reason to the other side.</span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span id="local-6989586621679252287"><span id="local-6989586621679252289"><span id="local-6989586621679252291"><span id="local-6989586621679252293"><span id="local-6989586621679252294"><span id="local-6989586621679252295"><span id="local-6989586621679252296"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252296"><span class="hs-identifier hs-type">vNumber</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252295"><span class="hs-identifier hs-type">vParams</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Message</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#Handshake"><span class="hs-identifier hs-type">Handshake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252296"><span class="hs-identifier hs-type">vNumber</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252295"><span class="hs-identifier hs-type">vParams</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679252294"><span class="hs-identifier hs-type">from</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252293"><span class="hs-identifier hs-type">to</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span id="local-6989586621679252284"><span id="local-6989586621679252285"><span id="local-6989586621679252286"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679252279"><span id="local-6989586621679252282"><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ClientHasAgency</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679252286"><span class="hs-identifier hs-type">st</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#Handshake"><span class="hs-identifier hs-type">Handshake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252285"><span class="hs-identifier hs-type">vNumber</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252284"><span class="hs-identifier hs-type">vParams</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-135"></span><span>    </span><span id="local-6989586621679252278"><span class="annot"><span class="annottext">show :: ClientHasAgency st -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="annot"><span class="annottext">ClientHasAgency st
</span><a href="Ouroboros.Network.Protocol.Handshake.Type.html#TokPropose"><span class="hs-identifier hs-var">TokPropose</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TokPropose&quot;</span></span></span></span></span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span id="local-6989586621679252274"><span id="local-6989586621679252275"><span id="local-6989586621679252276"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679252269"><span id="local-6989586621679252272"><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ServerHasAgency</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679252276"><span class="hs-identifier hs-type">st</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#Handshake"><span class="hs-identifier hs-type">Handshake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252275"><span class="hs-identifier hs-type">vNumber</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252274"><span class="hs-identifier hs-type">vParams</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-138"></span><span>    </span><span id="local-6989586621679252268"><span class="annot"><span class="annottext">show :: ServerHasAgency st -&gt; String
</span><a href="#local-6989586621679252268"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="annot"><span class="annottext">ServerHasAgency st
</span><a href="Ouroboros.Network.Protocol.Handshake.Type.html#TokConfirm"><span class="hs-identifier hs-var">TokConfirm</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TokConfirm&quot;</span></span></span></span></span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span class="hs-comment">-- | Extends handshake error @'RefuseReason'@ type, by client specific errors.</span><span>
</span><span id="line-141"></span><span class="hs-comment">--</span><span>
</span><span id="line-142"></span><span class="hs-keyword">data</span><span> </span><span id="HandshakeProtocolError"><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#HandshakeProtocolError"><span class="hs-identifier hs-var">HandshakeProtocolError</span></a></span></span><span> </span><span id="local-6989586621679252267"><span class="annot"><a href="#local-6989586621679252267"><span class="hs-identifier hs-type">vNumber</span></a></span></span><span>
</span><span id="line-143"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="HandshakeError"><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#HandshakeError"><span class="hs-identifier hs-var">HandshakeError</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#RefuseReason"><span class="hs-identifier hs-type">RefuseReason</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252267"><span class="hs-identifier hs-type">vNumber</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NotRecognisedVersion"><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#NotRecognisedVersion"><span class="hs-identifier hs-var">NotRecognisedVersion</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679252267"><span class="hs-identifier hs-type">vNumber</span></a></span><span>
</span><span id="line-145"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="InvalidServerSelection"><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#InvalidServerSelection"><span class="hs-identifier hs-var">InvalidServerSelection</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679252267"><span class="hs-identifier hs-type">vNumber</span></a></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-146"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679252260"><span id="local-6989586621679252262"><span class="annot"><span class="annottext">HandshakeProtocolError vNumber
-&gt; HandshakeProtocolError vNumber -&gt; Bool
(HandshakeProtocolError vNumber
 -&gt; HandshakeProtocolError vNumber -&gt; Bool)
-&gt; (HandshakeProtocolError vNumber
    -&gt; HandshakeProtocolError vNumber -&gt; Bool)
-&gt; Eq (HandshakeProtocolError vNumber)
forall vNumber.
Eq vNumber =&gt;
HandshakeProtocolError vNumber
-&gt; HandshakeProtocolError vNumber -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: HandshakeProtocolError vNumber
-&gt; HandshakeProtocolError vNumber -&gt; Bool
$c/= :: forall vNumber.
Eq vNumber =&gt;
HandshakeProtocolError vNumber
-&gt; HandshakeProtocolError vNumber -&gt; Bool
== :: HandshakeProtocolError vNumber
-&gt; HandshakeProtocolError vNumber -&gt; Bool
$c== :: forall vNumber.
Eq vNumber =&gt;
HandshakeProtocolError vNumber
-&gt; HandshakeProtocolError vNumber -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679252254"><span id="local-6989586621679252256"><span id="local-6989586621679252258"><span class="annot"><span class="annottext">Int -&gt; HandshakeProtocolError vNumber -&gt; ShowS
[HandshakeProtocolError vNumber] -&gt; ShowS
HandshakeProtocolError vNumber -&gt; String
(Int -&gt; HandshakeProtocolError vNumber -&gt; ShowS)
-&gt; (HandshakeProtocolError vNumber -&gt; String)
-&gt; ([HandshakeProtocolError vNumber] -&gt; ShowS)
-&gt; Show (HandshakeProtocolError vNumber)
forall vNumber.
Show vNumber =&gt;
Int -&gt; HandshakeProtocolError vNumber -&gt; ShowS
forall vNumber.
Show vNumber =&gt;
[HandshakeProtocolError vNumber] -&gt; ShowS
forall vNumber.
Show vNumber =&gt;
HandshakeProtocolError vNumber -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [HandshakeProtocolError vNumber] -&gt; ShowS
$cshowList :: forall vNumber.
Show vNumber =&gt;
[HandshakeProtocolError vNumber] -&gt; ShowS
show :: HandshakeProtocolError vNumber -&gt; String
$cshow :: forall vNumber.
Show vNumber =&gt;
HandshakeProtocolError vNumber -&gt; String
showsPrec :: Int -&gt; HandshakeProtocolError vNumber -&gt; ShowS
$cshowsPrec :: forall vNumber.
Show vNumber =&gt;
Int -&gt; HandshakeProtocolError vNumber -&gt; ShowS
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span id="local-6989586621679252253"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679252245"><span id="local-6989586621679252247"><span id="local-6989586621679252249"><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252253"><span class="hs-identifier hs-type">vNumber</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252253"><span class="hs-identifier hs-type">vNumber</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Exception</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Network.Protocol.Handshake.Type.html#HandshakeProtocolError"><span class="hs-identifier hs-type">HandshakeProtocolError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679252253"><span class="hs-identifier hs-type">vNumber</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-150"></span></pre></body></html>