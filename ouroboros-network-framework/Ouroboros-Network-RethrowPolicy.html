<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Ouroboros.Network.RethrowPolicy</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ouroboros-network-framework-0.3.0.0: Ouroboros network framework</span><ul class="links" id="page-menu"><li><a href="src/Ouroboros.Network.RethrowPolicy.html">Source</a></li><li><a href="&quot;../index.html&quot;">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Ouroboros.Network.RethrowPolicy</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Example policies</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Rethrow policy for <code>MuxConnectionHandler</code>.</p><p>Connection manager has a centralised way of handling exceptions.
 <code><a href="Ouroboros-Network-RethrowPolicy.html#t:RethrowPolicy" title="Ouroboros.Network.RethrowPolicy">RethrowPolicy</a></code> is a way to decided whether it is enough to shutdown
 connection or the node should shut down itself.  Theis mechanism is affected
 by the design choices in the mutliplexer.</p><p>Whenever a mini-protocol throws an exception, the bearer is closed.  There is
 no way to recover a bidirectional connection if one side failed, in such way
 that the other end could still re-use it, e.g.  if the initiator throws, we
 cannot just restart it on the same bearer, since there might be unconsumed
 bytes on the other end.</p><p><code><a href="Ouroboros-Network-RethrowPolicy.html#t:RethrowPolicy" title="Ouroboros.Network.RethrowPolicy">RethrowPolicy</a></code> is supplied to <code>makeMuxConnectionHandler</code> which creates both
 the action that runs on each connection and error handler.  Error handler is
 attached by the connection manager (see
 <code><a href="Ouroboros-Network-ConnectionManager.html#v:Core" title="Ouroboros.Network.ConnectionManager">Core</a></code>).  This error handler is using
 <code><a href="Ouroboros-Network-RethrowPolicy.html#t:RethrowPolicy" title="Ouroboros.Network.RethrowPolicy">RethrowPolicy</a></code>.</p><p>This mechanism is enough for both:</p><ul><li>the server implemented in <code><a href="Ouroboros-Network-ConnectionManager.html#v:Server" title="Ouroboros.Network.ConnectionManager">Server</a></code>,</li><li><code>PeerStateActions</code> used by peer-to-peer governor.</li></ul><p>Since both start mini-protocols with <code>runMiniProtocol</code> they can also have
 access to the result / exception thrown of a mini-protocol.
 <code>PeerStateActions</code> are only using this to inform the governor that the
 peer transitioned to <code>PeerCold</code> or to deactivate the peer.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">newtype</span> <a href="#t:RethrowPolicy">RethrowPolicy</a> = <a href="#v:RethrowPolicy">RethrowPolicy</a> {<ul class="subs"><li><a href="#v:runRethrowPolicy">runRethrowPolicy</a> &#8759; RethrowPolicy_</li></ul>}</li><li class="src short"><a href="#v:mkRethrowPolicy">mkRethrowPolicy</a> &#8759; &#8704; e. <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> e &#8658; (<a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorContext" title="Ouroboros.Network.RethrowPolicy">ErrorContext</a> &#8594; e &#8594; <a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorCommand" title="Ouroboros.Network.RethrowPolicy">ErrorCommand</a>) &#8594; <a href="Ouroboros-Network-RethrowPolicy.html#t:RethrowPolicy" title="Ouroboros.Network.RethrowPolicy">RethrowPolicy</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:ErrorCommand">ErrorCommand</a><ul class="subs"><li>= <a href="#v:ShutdownNode">ShutdownNode</a></li><li>| <a href="#v:ShutdownPeer">ShutdownPeer</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:ErrorContext">ErrorContext</a><ul class="subs"><li>= <a href="#v:OutboundError">OutboundError</a></li><li>| <a href="#v:InboundError">InboundError</a></li></ul></li><li class="src short"><a href="#v:muxErrorRethrowPolicy">muxErrorRethrowPolicy</a> &#8759; <a href="Ouroboros-Network-RethrowPolicy.html#t:RethrowPolicy" title="Ouroboros.Network.RethrowPolicy">RethrowPolicy</a></li><li class="src short"><a href="#v:ioErrorRethrowPolicy">ioErrorRethrowPolicy</a> &#8759; <a href="Ouroboros-Network-RethrowPolicy.html#t:RethrowPolicy" title="Ouroboros.Network.RethrowPolicy">RethrowPolicy</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:RethrowPolicy" class="def">RethrowPolicy</a> <a href="src/Ouroboros.Network.RethrowPolicy.html#RethrowPolicy" class="link">Source</a> <a href="#t:RethrowPolicy" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:RethrowPolicy" class="def">RethrowPolicy</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:runRethrowPolicy" class="def">runRethrowPolicy</a> &#8759; RethrowPolicy_</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:RethrowPolicy">Instances</h4><details id="i:RethrowPolicy" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RethrowPolicy:Semigroup:1"></span> <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> <a href="Ouroboros-Network-RethrowPolicy.html#t:RethrowPolicy" title="Ouroboros.Network.RethrowPolicy">RethrowPolicy</a></span> <a href="src/Ouroboros.Network.RethrowPolicy.html#line-91" class="link">Source</a> <a href="#t:RethrowPolicy" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RethrowPolicy:Semigroup:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-RethrowPolicy.html">Ouroboros.Network.RethrowPolicy</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> &#8759; <a href="Ouroboros-Network-RethrowPolicy.html#t:RethrowPolicy" title="Ouroboros.Network.RethrowPolicy">RethrowPolicy</a> &#8594; <a href="Ouroboros-Network-RethrowPolicy.html#t:RethrowPolicy" title="Ouroboros.Network.RethrowPolicy">RethrowPolicy</a> &#8594; <a href="Ouroboros-Network-RethrowPolicy.html#t:RethrowPolicy" title="Ouroboros.Network.RethrowPolicy">RethrowPolicy</a> <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> &#8759; <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="Ouroboros-Network-RethrowPolicy.html#t:RethrowPolicy" title="Ouroboros.Network.RethrowPolicy">RethrowPolicy</a> &#8594; <a href="Ouroboros-Network-RethrowPolicy.html#t:RethrowPolicy" title="Ouroboros.Network.RethrowPolicy">RethrowPolicy</a> <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> &#8759; <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Prelude.html#t:Integral" title="Prelude">Integral</a> b &#8658; b &#8594; <a href="Ouroboros-Network-RethrowPolicy.html#t:RethrowPolicy" title="Ouroboros.Network.RethrowPolicy">RethrowPolicy</a> &#8594; <a href="Ouroboros-Network-RethrowPolicy.html#t:RethrowPolicy" title="Ouroboros.Network.RethrowPolicy">RethrowPolicy</a> <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RethrowPolicy:Monoid:2"></span> <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> <a href="Ouroboros-Network-RethrowPolicy.html#t:RethrowPolicy" title="Ouroboros.Network.RethrowPolicy">RethrowPolicy</a></span> <a href="src/Ouroboros.Network.RethrowPolicy.html#line-92" class="link">Source</a> <a href="#t:RethrowPolicy" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RethrowPolicy:Monoid:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-RethrowPolicy.html">Ouroboros.Network.RethrowPolicy</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> &#8759; <a href="Ouroboros-Network-RethrowPolicy.html#t:RethrowPolicy" title="Ouroboros.Network.RethrowPolicy">RethrowPolicy</a> <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:mempty" class="selflink">#</a></p><p class="src"><a href="#v:mappend">mappend</a> &#8759; <a href="Ouroboros-Network-RethrowPolicy.html#t:RethrowPolicy" title="Ouroboros.Network.RethrowPolicy">RethrowPolicy</a> &#8594; <a href="Ouroboros-Network-RethrowPolicy.html#t:RethrowPolicy" title="Ouroboros.Network.RethrowPolicy">RethrowPolicy</a> &#8594; <a href="Ouroboros-Network-RethrowPolicy.html#t:RethrowPolicy" title="Ouroboros.Network.RethrowPolicy">RethrowPolicy</a> <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:mappend" class="selflink">#</a></p><p class="src"><a href="#v:mconcat">mconcat</a> &#8759; [<a href="Ouroboros-Network-RethrowPolicy.html#t:RethrowPolicy" title="Ouroboros.Network.RethrowPolicy">RethrowPolicy</a>] &#8594; <a href="Ouroboros-Network-RethrowPolicy.html#t:RethrowPolicy" title="Ouroboros.Network.RethrowPolicy">RethrowPolicy</a> <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:mconcat" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:mkRethrowPolicy" class="def">mkRethrowPolicy</a> &#8759; &#8704; e. <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> e &#8658; (<a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorContext" title="Ouroboros.Network.RethrowPolicy">ErrorContext</a> &#8594; e &#8594; <a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorCommand" title="Ouroboros.Network.RethrowPolicy">ErrorCommand</a>) &#8594; <a href="Ouroboros-Network-RethrowPolicy.html#t:RethrowPolicy" title="Ouroboros.Network.RethrowPolicy">RethrowPolicy</a> <a href="src/Ouroboros.Network.RethrowPolicy.html#mkRethrowPolicy" class="link">Source</a> <a href="#v:mkRethrowPolicy" class="selflink">#</a></p><div class="doc"><p>Smart constructor for <code><a href="Ouroboros-Network-RethrowPolicy.html#t:RethrowPolicy" title="Ouroboros.Network.RethrowPolicy">RethrowPolicy</a></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ErrorCommand" class="def">ErrorCommand</a> <a href="src/Ouroboros.Network.RethrowPolicy.html#ErrorCommand" class="link">Source</a> <a href="#t:ErrorCommand" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ShutdownNode" class="def">ShutdownNode</a></td><td class="doc"><p>Shutdown node.</p></td></tr><tr><td class="src"><a id="v:ShutdownPeer" class="def">ShutdownPeer</a></td><td class="doc"><p>Shutdown connection with the peer.</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:ErrorCommand">Instances</h4><details id="i:ErrorCommand" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ErrorCommand:Show:1"></span> <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorCommand" title="Ouroboros.Network.RethrowPolicy">ErrorCommand</a></span> <a href="src/Ouroboros.Network.RethrowPolicy.html#line-59" class="link">Source</a> <a href="#t:ErrorCommand" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ErrorCommand:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-RethrowPolicy.html">Ouroboros.Network.RethrowPolicy</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> &#8759; <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> &#8594; <a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorCommand" title="Ouroboros.Network.RethrowPolicy">ErrorCommand</a> &#8594; <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> &#8759; <a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorCommand" title="Ouroboros.Network.RethrowPolicy">ErrorCommand</a> &#8594; <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> &#8759; [<a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorCommand" title="Ouroboros.Network.RethrowPolicy">ErrorCommand</a>] &#8594; <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ErrorCommand:Semigroup:2"></span> <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> <a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorCommand" title="Ouroboros.Network.RethrowPolicy">ErrorCommand</a></span> <a href="src/Ouroboros.Network.RethrowPolicy.html#line-64" class="link">Source</a> <a href="#t:ErrorCommand" class="selflink">#</a></td><td class="doc"><p><code><a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorCommand" title="Ouroboros.Network.RethrowPolicy">ErrorCommand</a></code> is a commutative semigroup with <code><a href="Ouroboros-Network-RethrowPolicy.html#v:ShutdownNode" title="Ouroboros.Network.RethrowPolicy">ShutdownNode</a></code> being an
 absorbing element, and <code><a href="Ouroboros-Network-RethrowPolicy.html#v:ShutdownPeer" title="Ouroboros.Network.RethrowPolicy">ShutdownPeer</a></code> is the unit element.</p></td></tr><tr><td colspan="2"><details id="i:id:ErrorCommand:Semigroup:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-RethrowPolicy.html">Ouroboros.Network.RethrowPolicy</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> &#8759; <a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorCommand" title="Ouroboros.Network.RethrowPolicy">ErrorCommand</a> &#8594; <a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorCommand" title="Ouroboros.Network.RethrowPolicy">ErrorCommand</a> &#8594; <a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorCommand" title="Ouroboros.Network.RethrowPolicy">ErrorCommand</a> <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> &#8759; <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorCommand" title="Ouroboros.Network.RethrowPolicy">ErrorCommand</a> &#8594; <a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorCommand" title="Ouroboros.Network.RethrowPolicy">ErrorCommand</a> <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> &#8759; <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Prelude.html#t:Integral" title="Prelude">Integral</a> b &#8658; b &#8594; <a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorCommand" title="Ouroboros.Network.RethrowPolicy">ErrorCommand</a> &#8594; <a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorCommand" title="Ouroboros.Network.RethrowPolicy">ErrorCommand</a> <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ErrorCommand:Monoid:3"></span> <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> <a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorCommand" title="Ouroboros.Network.RethrowPolicy">ErrorCommand</a></span> <a href="src/Ouroboros.Network.RethrowPolicy.html#line-69" class="link">Source</a> <a href="#t:ErrorCommand" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ErrorCommand:Monoid:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-RethrowPolicy.html">Ouroboros.Network.RethrowPolicy</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> &#8759; <a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorCommand" title="Ouroboros.Network.RethrowPolicy">ErrorCommand</a> <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:mempty" class="selflink">#</a></p><p class="src"><a href="#v:mappend">mappend</a> &#8759; <a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorCommand" title="Ouroboros.Network.RethrowPolicy">ErrorCommand</a> &#8594; <a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorCommand" title="Ouroboros.Network.RethrowPolicy">ErrorCommand</a> &#8594; <a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorCommand" title="Ouroboros.Network.RethrowPolicy">ErrorCommand</a> <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:mappend" class="selflink">#</a></p><p class="src"><a href="#v:mconcat">mconcat</a> &#8759; [<a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorCommand" title="Ouroboros.Network.RethrowPolicy">ErrorCommand</a>] &#8594; <a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorCommand" title="Ouroboros.Network.RethrowPolicy">ErrorCommand</a> <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:mconcat" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ErrorContext" class="def">ErrorContext</a> <a href="src/Ouroboros.Network.RethrowPolicy.html#ErrorContext" class="link">Source</a> <a href="#t:ErrorContext" class="selflink">#</a></p><div class="doc"><p>Whether an exception happened on outbound or inbound connection.</p><p>TODO: It would be more useful to have access to whether the exception
 happened on initiator or responder. The easiest way to fix this is make mux
 throw the exception together with context.  This allows to keep error
 handling be done only by the connection manager (rather than by server and
 <code>PeerStateActions</code>).</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:OutboundError" class="def">OutboundError</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:InboundError" class="def">InboundError</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:ErrorContext">Instances</h4><details id="i:ErrorContext" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ErrorContext:Show:1"></span> <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorContext" title="Ouroboros.Network.RethrowPolicy">ErrorContext</a></span> <a href="src/Ouroboros.Network.RethrowPolicy.html#line-83" class="link">Source</a> <a href="#t:ErrorContext" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ErrorContext:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Ouroboros-Network-RethrowPolicy.html">Ouroboros.Network.RethrowPolicy</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> &#8759; <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> &#8594; <a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorContext" title="Ouroboros.Network.RethrowPolicy">ErrorContext</a> &#8594; <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> &#8759; <a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorContext" title="Ouroboros.Network.RethrowPolicy">ErrorContext</a> &#8594; <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> &#8759; [<a href="Ouroboros-Network-RethrowPolicy.html#t:ErrorContext" title="Ouroboros.Network.RethrowPolicy">ErrorContext</a>] &#8594; <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:1" id="g:1"><h1>Example policies</h1></a><div class="top"><p class="src"><a id="v:muxErrorRethrowPolicy" class="def">muxErrorRethrowPolicy</a> &#8759; <a href="Ouroboros-Network-RethrowPolicy.html#t:RethrowPolicy" title="Ouroboros.Network.RethrowPolicy">RethrowPolicy</a> <a href="src/Ouroboros.Network.RethrowPolicy.html#muxErrorRethrowPolicy" class="link">Source</a> <a href="#v:muxErrorRethrowPolicy" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:ioErrorRethrowPolicy" class="def">ioErrorRethrowPolicy</a> &#8759; <a href="Ouroboros-Network-RethrowPolicy.html#t:RethrowPolicy" title="Ouroboros.Network.RethrowPolicy">RethrowPolicy</a> <a href="src/Ouroboros.Network.RethrowPolicy.html#ioErrorRethrowPolicy" class="link">Source</a> <a href="#v:ioErrorRethrowPolicy" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>