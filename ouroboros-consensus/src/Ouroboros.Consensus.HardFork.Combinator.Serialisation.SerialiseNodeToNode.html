<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DataKinds             #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts      #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances     #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE GADTs                 #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE QuantifiedConstraints #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes            #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards       #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables   #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications      #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators         #-}</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-orphans #-}</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Codec.CBOR.Decoding</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Decoder</span></span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Codec.CBOR.Encoding</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Encoding</span></span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Codec.Serialise</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Serialise</span></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Exception</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">throw</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Proxy</span></a></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Data.SOP.Strict.html"><span class="hs-identifier">Data.SOP.Strict</span></a></span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-network-api-0.1.0.0/noopt/doc/html/ouroboros-network-api/src"><span class="hs-identifier">Ouroboros.Network.Block</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-network-api-0.1.0.0/noopt/doc/html/ouroboros-network-api/src"><span class="hs-identifier">Serialised</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-network-api-0.1.0.0/noopt/doc/html/ouroboros-network-api/src"><span class="hs-identifier">unwrapCBORinCBOR</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>                     </span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-network-api-0.1.0.0/noopt/doc/html/ouroboros-network-api/src"><span class="hs-identifier">wrapCBORinCBOR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Block.html"><span class="hs-identifier">Ouroboros.Consensus.Block</span></a></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Ledger.SupportsMempool.html"><span class="hs-identifier">Ouroboros.Consensus.Ledger.SupportsMempool</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Node.NetworkProtocolVersion.html"><span class="hs-identifier">Ouroboros.Consensus.Node.NetworkProtocolVersion</span></a></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Node.Run.html"><span class="hs-identifier">Ouroboros.Consensus.Node.Run</span></a></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Node.Serialisation.html"><span class="hs-identifier">Ouroboros.Consensus.Node.Serialisation</span></a></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Storage.Serialisation.html"><span class="hs-identifier">Ouroboros.Consensus.Storage.Serialisation</span></a></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Util.html"><span class="hs-identifier">Ouroboros.Consensus.Util</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Util.html#.%3A"><span class="hs-operator">(.:)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.Util.SOP.html"><span class="hs-identifier">Ouroboros.Consensus.Util.SOP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Util.SOP.html#ProofNonEmpty"><span class="hs-identifier">ProofNonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Util.SOP.html#isNonEmpty"><span class="hs-identifier">isNonEmpty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Abstract.SingleEraBlock.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.Abstract.SingleEraBlock</span></a></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.AcrossEras.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.AcrossEras</span></a></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.Basics</span></a></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Block.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.Block</span></a></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Mempool.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.Mempool</span></a></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common</span></a></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseDisk.html"><span class="hs-identifier">Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseDisk</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span id="local-6989586621680060144"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#SerialiseHFC"><span class="hs-identifier hs-type">SerialiseHFC</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060144"><span class="hs-identifier hs-type">xs</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.Run.html#SerialiseNodeToNodeConstraints"><span class="hs-identifier hs-type">SerialiseNodeToNodeConstraints</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060144"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-45"></span><span>  </span><span id="local-6989586621680060134"><span class="annot"><span class="annottext">estimateBlockSize :: Header (HardForkBlock xs) -&gt; SizeInBytes
</span><a href="Ouroboros.Consensus.Node.Run.html#estimateBlockSize"><span class="hs-identifier hs-var hs-var hs-var hs-var">estimateBlockSize</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Header (HardForkBlock xs) -&gt; SizeInBytes
forall (xs :: [*]).
SerialiseHFC xs =&gt;
Header (HardForkBlock xs) -&gt; SizeInBytes
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#estimateHfcBlockSize"><span class="hs-identifier hs-var">estimateHfcBlockSize</span></a></span></span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Dispatch to first era or HFC
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#dispatchEncoder"><span class="hs-identifier hs-type">dispatchEncoder</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680060190"><span class="annot"><a href="#local-6989586621680060190"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621680060192"><span class="annot"><a href="#local-6989586621680060192"><span class="hs-identifier hs-type">xs</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-52"></span><span>                     </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#SerialiseHFC"><span class="hs-identifier hs-type">SerialiseHFC</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060192"><span class="hs-identifier hs-type">xs</span></a></span><span>
</span><span id="line-53"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680060191"><span class="annot"><a href="#local-6989586621680060191"><span class="hs-identifier hs-type">blk</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.Run.html#SerialiseNodeToNodeConstraints"><span class="hs-identifier hs-type">SerialiseNodeToNodeConstraints</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060191"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-54"></span><span>                              </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.Serialisation.html#SerialiseNodeToNode"><span class="hs-identifier hs-type">SerialiseNodeToNode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060191"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680060190"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060191"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span>                   </span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span>                </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Block.Abstract.html#CodecConfig"><span class="hs-identifier hs-type">CodecConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060192"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.NetworkProtocolVersion.html#BlockNodeToNodeVersion"><span class="hs-identifier hs-type">BlockNodeToNodeVersion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060192"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SOP.Strict.html#NS"><span class="hs-identifier hs-type">NS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060190"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060192"><span class="hs-identifier hs-type">xs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Encoding</span></span><span>
</span><span id="line-59"></span><span id="dispatchEncoder"><span class="annot"><span class="annottext">dispatchEncoder :: CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs) -&gt; NS f xs -&gt; Encoding
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#dispatchEncoder"><span class="hs-identifier hs-var hs-var">dispatchEncoder</span></a></span></span><span> </span><span id="local-6989586621680060130"><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
</span><a href="#local-6989586621680060130"><span class="hs-identifier hs-var">ccfg</span></a></span></span><span> </span><span id="local-6989586621680060129"><span class="annot"><span class="annottext">BlockNodeToNodeVersion (HardForkBlock xs)
</span><a href="#local-6989586621680060129"><span class="hs-identifier hs-var">version</span></a></span></span><span> </span><span id="local-6989586621680060128"><span class="annot"><span class="annottext">NS f xs
</span><a href="#local-6989586621680060128"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-60"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proxy xs -&gt; ProofNonEmpty xs
forall a (xs :: [a]) (proxy :: [a] -&gt; *).
IsNonEmpty xs =&gt;
proxy xs -&gt; ProofNonEmpty xs
</span><a href="Ouroboros.Consensus.Util.SOP.html#isNonEmpty"><span class="hs-identifier hs-var">isNonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy xs
forall k (t :: k). Proxy t
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680060192"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-61"></span><span>      </span><span class="annot"><a href="Ouroboros.Consensus.Util.SOP.html#ProofNonEmpty"><span class="hs-identifier hs-type">ProofNonEmpty</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-62"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NP CodecConfig xs
</span><a href="#local-6989586621680060125"><span class="hs-identifier hs-var">ccfgs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion (HardForkBlock xs)
HardForkNodeToNodeVersion xs
</span><a href="#local-6989586621680060129"><span class="hs-identifier hs-var">version</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NS f xs
</span><a href="#local-6989586621680060128"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-63"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621680060124"><span class="annot"><span class="annottext">CodecConfig x
</span><a href="#local-6989586621680060124"><span class="hs-identifier hs-var">c0</span></a></span></span><span> </span><span class="annot"><a href="Data.SOP.Strict.html#%3A%2A"><span class="hs-operator hs-type">:*</span></a></span><span> </span><span class="annot"><span class="annottext">NP CodecConfig xs
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#HardForkNodeToNodeDisabled"><span class="hs-identifier hs-type">HardForkNodeToNodeDisabled</span></a></span><span> </span><span id="local-6989586621680060121"><span class="annot"><a href="#local-6989586621680060121"><span class="hs-identifier hs-var">v0</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SOP.Strict.html#Z"><span class="hs-identifier hs-type">Z</span></a></span><span> </span><span id="local-6989586621680060119"><span class="annot"><span class="annottext">f x
</span><a href="#local-6989586621680060119"><span class="hs-identifier hs-var">x0</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-64"></span><span>            </span><span class="annot"><span class="annottext">CodecConfig x -&gt; BlockNodeToNodeVersion x -&gt; f x -&gt; Encoding
forall blk a.
SerialiseNodeToNode blk a =&gt;
CodecConfig blk -&gt; BlockNodeToNodeVersion blk -&gt; a -&gt; Encoding
</span><a href="Ouroboros.Consensus.Node.Serialisation.html#encodeNodeToNode"><span class="hs-identifier hs-var">encodeNodeToNode</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig x
</span><a href="#local-6989586621680060124"><span class="hs-identifier hs-var">c0</span></a></span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion x
BlockNodeToNodeVersion x
</span><a href="#local-6989586621680060121"><span class="hs-identifier hs-var">v0</span></a></span><span> </span><span class="annot"><span class="annottext">f x
</span><a href="#local-6989586621680060119"><span class="hs-identifier hs-var">x0</span></a></span><span>
</span><span id="line-65"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NP CodecConfig xs
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#HardForkNodeToNodeDisabled"><span class="hs-identifier hs-type">HardForkNodeToNodeDisabled</span></a></span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion x
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SOP.Strict.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span id="local-6989586621680060116"><span class="annot"><span class="annottext">NS f xs
</span><a href="#local-6989586621680060116"><span class="hs-identifier hs-var">later</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-66"></span><span>            </span><span class="annot"><span class="annottext">HardForkEncoderException -&gt; Encoding
forall a e. Exception e =&gt; e -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">throw</span></a></span><span> </span><span class="annot"><span class="annottext">(HardForkEncoderException -&gt; Encoding)
-&gt; HardForkEncoderException -&gt; Encoding
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NS SingleEraInfo xs -&gt; HardForkEncoderException
forall (xs :: [*]).
SListI xs =&gt;
NS SingleEraInfo xs -&gt; HardForkEncoderException
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#futureEraException"><span class="hs-identifier hs-var">futureEraException</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NS f xs -&gt; NS SingleEraInfo xs
forall (xs :: [*]) (f :: * -&gt; *).
All SingleEraBlock xs =&gt;
NS f xs -&gt; NS SingleEraInfo xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#notFirstEra"><span class="hs-identifier hs-var">notFirstEra</span></a></span><span> </span><span class="annot"><span class="annottext">NS f xs
</span><a href="#local-6989586621680060116"><span class="hs-identifier hs-var">later</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NP CodecConfig xs
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#HardForkNodeToNodeEnabled"><span class="hs-identifier hs-type">HardForkNodeToNodeEnabled</span></a></span><span> </span><span class="annot"><span class="annottext">HardForkSpecificNodeToNodeVersion
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680060112"><span class="annot"><span class="annottext">NP EraNodeToNodeVersion xs
</span><a href="#local-6989586621680060112"><span class="hs-identifier hs-var">versions</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NS f xs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-68"></span><span>            </span><span class="annot"><span class="annottext">NP (f -.-&gt; K Encoding) xs -&gt; NS f xs -&gt; Encoding
forall (xs :: [*]) (f :: * -&gt; *).
SListI xs =&gt;
NP (f -.-&gt; K Encoding) xs -&gt; NS f xs -&gt; Encoding
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#encodeNS"><span class="hs-identifier hs-var">encodeNS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy SerialiseConstraintsHFC
-&gt; (forall a.
    SerialiseConstraintsHFC a =&gt;
    CodecConfig a -&gt; EraNodeToNodeVersion a -&gt; (-.-&gt;) f (K Encoding) a)
-&gt; Prod NP CodecConfig xs
-&gt; NP EraNodeToNodeVersion xs
-&gt; NP (f -.-&gt; K Encoding) xs
forall k l (h :: (k -&gt; *) -&gt; l -&gt; *) (c :: k -&gt; Constraint)
       (xs :: l) (proxy :: (k -&gt; Constraint) -&gt; *) (f :: k -&gt; *)
       (f' :: k -&gt; *) (f'' :: k -&gt; *).
(AllN (Prod h) c xs, HAp h, HAp (Prod h)) =&gt;
proxy c
-&gt; (forall (a :: k). c a =&gt; f a -&gt; f' a -&gt; f'' a)
-&gt; Prod h f xs
-&gt; h f' xs
-&gt; h f'' xs
</span><span class="hs-identifier hs-var">hczipWith</span></span><span> </span><span class="annot"><span class="annottext">Proxy SerialiseConstraintsHFC
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#pSHFC"><span class="hs-identifier hs-var">pSHFC</span></a></span><span> </span><span class="annot"><span class="annottext">forall blk.
(SingleEraBlock blk, SerialiseNodeToNodeConstraints blk) =&gt;
CodecConfig blk
-&gt; EraNodeToNodeVersion blk -&gt; (-.-&gt;) f (K Encoding) blk
forall a.
SerialiseConstraintsHFC a =&gt;
CodecConfig a -&gt; EraNodeToNodeVersion a -&gt; (-.-&gt;) f (K Encoding) a
</span><a href="#local-6989586621680060108"><span class="hs-identifier hs-var">aux</span></a></span><span> </span><span class="annot"><span class="annottext">Prod NP CodecConfig xs
NP CodecConfig xs
</span><a href="#local-6989586621680060125"><span class="hs-identifier hs-var">ccfgs</span></a></span><span> </span><span class="annot"><span class="annottext">NP EraNodeToNodeVersion xs
</span><a href="#local-6989586621680060112"><span class="hs-identifier hs-var">versions</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NS f xs
</span><a href="#local-6989586621680060128"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-69"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-70"></span><span>    </span><span id="local-6989586621680060125"><span class="annot"><span class="annottext">ccfgs :: NP CodecConfig xs
</span><a href="#local-6989586621680060125"><span class="hs-identifier hs-var hs-var">ccfgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PerEraCodecConfig xs -&gt; NP CodecConfig xs
forall (xs :: [*]). PerEraCodecConfig xs -&gt; NP CodecConfig xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.AcrossEras.html#getPerEraCodecConfig"><span class="hs-identifier hs-var hs-var">getPerEraCodecConfig</span></a></span><span> </span><span class="annot"><span class="annottext">(PerEraCodecConfig xs -&gt; NP CodecConfig xs)
-&gt; PerEraCodecConfig xs -&gt; NP CodecConfig xs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs) -&gt; PerEraCodecConfig xs
forall (xs :: [*]).
CodecConfig (HardForkBlock xs) -&gt; PerEraCodecConfig xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#hardForkCodecConfigPerEra"><span class="hs-identifier hs-var hs-var">hardForkCodecConfigPerEra</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
</span><a href="#local-6989586621680060130"><span class="hs-identifier hs-var">ccfg</span></a></span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span>    </span><span class="annot"><a href="#local-6989586621680060108"><span class="hs-identifier hs-type">aux</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680060259"><span class="annot"><a href="#local-6989586621680060259"><span class="hs-identifier hs-type">blk</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Abstract.SingleEraBlock.html#SingleEraBlock"><span class="hs-identifier hs-type">SingleEraBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060259"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.Run.html#SerialiseNodeToNodeConstraints"><span class="hs-identifier hs-type">SerialiseNodeToNodeConstraints</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060259"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span>        </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Block.Abstract.html#CodecConfig"><span class="hs-identifier hs-type">CodecConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060259"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-74"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#EraNodeToNodeVersion"><span class="hs-identifier hs-type">EraNodeToNodeVersion</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060259"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-75"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680060190"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">-.-&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">K</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Encoding</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680060259"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-76"></span><span>    </span><span id="local-6989586621680060108"><span class="annot"><span class="annottext">aux :: CodecConfig blk
-&gt; EraNodeToNodeVersion blk -&gt; (-.-&gt;) f (K Encoding) blk
</span><a href="#local-6989586621680060108"><span class="hs-identifier hs-var hs-var">aux</span></a></span></span><span> </span><span id="local-6989586621680060105"><span class="annot"><span class="annottext">CodecConfig blk
</span><a href="#local-6989586621680060105"><span class="hs-identifier hs-var">ccfg'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#EraNodeToNodeEnabled"><span class="hs-identifier hs-type">EraNodeToNodeEnabled</span></a></span><span> </span><span id="local-6989586621680060103"><span class="annot"><span class="annottext">BlockNodeToNodeVersion blk
</span><a href="#local-6989586621680060103"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(f blk -&gt; K Encoding blk) -&gt; (-.-&gt;) f (K Encoding) blk
forall k (f :: k -&gt; *) (g :: k -&gt; *) (a :: k).
(f a -&gt; g a) -&gt; (-.-&gt;) f g a
</span><span class="hs-identifier hs-var">Fn</span></span><span> </span><span class="annot"><span class="annottext">((f blk -&gt; K Encoding blk) -&gt; (-.-&gt;) f (K Encoding) blk)
-&gt; (f blk -&gt; K Encoding blk) -&gt; (-.-&gt;) f (K Encoding) blk
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; K Encoding blk
forall k a (b :: k). a -&gt; K a b
</span><span class="hs-identifier hs-var">K</span></span><span> </span><span class="annot"><span class="annottext">(Encoding -&gt; K Encoding blk)
-&gt; (f blk -&gt; Encoding) -&gt; f blk -&gt; K Encoding blk
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig blk -&gt; BlockNodeToNodeVersion blk -&gt; f blk -&gt; Encoding
forall blk a.
SerialiseNodeToNode blk a =&gt;
CodecConfig blk -&gt; BlockNodeToNodeVersion blk -&gt; a -&gt; Encoding
</span><a href="Ouroboros.Consensus.Node.Serialisation.html#encodeNodeToNode"><span class="hs-identifier hs-var">encodeNodeToNode</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig blk
</span><a href="#local-6989586621680060105"><span class="hs-identifier hs-var">ccfg'</span></a></span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion blk
</span><a href="#local-6989586621680060103"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-77"></span><span>    </span><span class="annot"><a href="#local-6989586621680060108"><span class="hs-identifier hs-var">aux</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig blk
</span><span class="hs-identifier">_</span></span><span>      </span><span class="annot"><span class="annottext">EraNodeToNodeVersion blk
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#EraNodeToNodeDisabled"><span class="hs-identifier hs-var">EraNodeToNodeDisabled</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(f blk -&gt; K Encoding blk) -&gt; (-.-&gt;) f (K Encoding) blk
forall k (f :: k -&gt; *) (g :: k -&gt; *) (a :: k).
(f a -&gt; g a) -&gt; (-.-&gt;) f g a
</span><span class="hs-identifier hs-var">Fn</span></span><span> </span><span class="annot"><span class="annottext">((f blk -&gt; K Encoding blk) -&gt; (-.-&gt;) f (K Encoding) blk)
-&gt; (f blk -&gt; K Encoding blk) -&gt; (-.-&gt;) f (K Encoding) blk
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">f blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-78"></span><span>        </span><span class="annot"><span class="annottext">HardForkEncoderException -&gt; K Encoding blk
forall a e. Exception e =&gt; e -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">throw</span></a></span><span> </span><span class="annot"><span class="annottext">(HardForkEncoderException -&gt; K Encoding blk)
-&gt; HardForkEncoderException -&gt; K Encoding blk
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy blk -&gt; HardForkEncoderException
forall blk.
SingleEraBlock blk =&gt;
Proxy blk -&gt; HardForkEncoderException
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#disabledEraException"><span class="hs-identifier hs-var">disabledEraException</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy blk
forall k (t :: k). Proxy t
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680060259"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#dispatchDecoder"><span class="hs-identifier hs-type">dispatchDecoder</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680060171"><span class="annot"><a href="#local-6989586621680060171"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621680060173"><span class="annot"><a href="#local-6989586621680060173"><span class="hs-identifier hs-type">xs</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-81"></span><span>                     </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#SerialiseHFC"><span class="hs-identifier hs-type">SerialiseHFC</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060173"><span class="hs-identifier hs-type">xs</span></a></span><span>
</span><span id="line-82"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680060172"><span class="annot"><a href="#local-6989586621680060172"><span class="hs-identifier hs-type">blk</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.Run.html#SerialiseNodeToNodeConstraints"><span class="hs-identifier hs-type">SerialiseNodeToNodeConstraints</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060172"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-83"></span><span>                              </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.Serialisation.html#SerialiseNodeToNode"><span class="hs-identifier hs-type">SerialiseNodeToNode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060172"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680060171"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060172"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span>                   </span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span>                </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Block.Abstract.html#CodecConfig"><span class="hs-identifier hs-type">CodecConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060173"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.NetworkProtocolVersion.html#BlockNodeToNodeVersion"><span class="hs-identifier hs-type">BlockNodeToNodeVersion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060173"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680060242"><span class="annot"><a href="#local-6989586621680060242"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621680060242"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.SOP.Strict.html#NS"><span class="hs-identifier hs-type">NS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060171"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060173"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span id="dispatchDecoder"><span class="annot"><span class="annottext">dispatchDecoder :: CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; forall s. Decoder s (NS f xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#dispatchDecoder"><span class="hs-identifier hs-var hs-var">dispatchDecoder</span></a></span></span><span> </span><span id="local-6989586621680060096"><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
</span><a href="#local-6989586621680060096"><span class="hs-identifier hs-var">ccfg</span></a></span></span><span> </span><span id="local-6989586621680060095"><span class="annot"><span class="annottext">BlockNodeToNodeVersion (HardForkBlock xs)
</span><a href="#local-6989586621680060095"><span class="hs-identifier hs-var">version</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-89"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proxy xs -&gt; ProofNonEmpty xs
forall a (xs :: [a]) (proxy :: [a] -&gt; *).
IsNonEmpty xs =&gt;
proxy xs -&gt; ProofNonEmpty xs
</span><a href="Ouroboros.Consensus.Util.SOP.html#isNonEmpty"><span class="hs-identifier hs-var">isNonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy xs
forall k (t :: k). Proxy t
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680060173"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-90"></span><span>      </span><span class="annot"><a href="Ouroboros.Consensus.Util.SOP.html#ProofNonEmpty"><span class="hs-identifier hs-type">ProofNonEmpty</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-91"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NP CodecConfig xs
</span><a href="#local-6989586621680060094"><span class="hs-identifier hs-var">ccfgs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion (HardForkBlock xs)
HardForkNodeToNodeVersion xs
</span><a href="#local-6989586621680060095"><span class="hs-identifier hs-var">version</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-92"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621680060093"><span class="annot"><span class="annottext">CodecConfig x
</span><a href="#local-6989586621680060093"><span class="hs-identifier hs-var">c0</span></a></span></span><span> </span><span class="annot"><a href="Data.SOP.Strict.html#%3A%2A"><span class="hs-operator hs-type">:*</span></a></span><span> </span><span class="annot"><span class="annottext">NP CodecConfig xs
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#HardForkNodeToNodeDisabled"><span class="hs-identifier hs-type">HardForkNodeToNodeDisabled</span></a></span><span> </span><span id="local-6989586621680060092"><span class="annot"><a href="#local-6989586621680060092"><span class="hs-identifier hs-var">v0</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-93"></span><span>            </span><span class="annot"><span class="annottext">f x -&gt; NS f (x : xs)
forall a (f :: a -&gt; *) (x :: a) (xs :: [a]). f x -&gt; NS f (x : xs)
</span><a href="Data.SOP.Strict.html#Z"><span class="hs-identifier hs-var">Z</span></a></span><span> </span><span class="annot"><span class="annottext">(f x -&gt; NS f (x : xs))
-&gt; Decoder s (f x) -&gt; Decoder s (NS f (x : xs))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig x
-&gt; BlockNodeToNodeVersion x -&gt; forall s. Decoder s (f x)
forall blk a.
SerialiseNodeToNode blk a =&gt;
CodecConfig blk
-&gt; BlockNodeToNodeVersion blk -&gt; forall s. Decoder s a
</span><a href="Ouroboros.Consensus.Node.Serialisation.html#decodeNodeToNode"><span class="hs-identifier hs-var">decodeNodeToNode</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig x
</span><a href="#local-6989586621680060093"><span class="hs-identifier hs-var">c0</span></a></span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion x
BlockNodeToNodeVersion x
</span><a href="#local-6989586621680060092"><span class="hs-identifier hs-var">v0</span></a></span><span>
</span><span id="line-94"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NP CodecConfig xs
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#HardForkNodeToNodeEnabled"><span class="hs-identifier hs-type">HardForkNodeToNodeEnabled</span></a></span><span> </span><span class="annot"><span class="annottext">HardForkSpecificNodeToNodeVersion
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680060089"><span class="annot"><span class="annottext">NP EraNodeToNodeVersion xs
</span><a href="#local-6989586621680060089"><span class="hs-identifier hs-var">versions</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-95"></span><span>            </span><span class="annot"><span class="annottext">NP (Decoder s :.: f) xs -&gt; Decoder s (NS f xs)
forall (xs :: [*]) s (f :: * -&gt; *).
SListI xs =&gt;
NP (Decoder s :.: f) xs -&gt; Decoder s (NS f xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#decodeNS"><span class="hs-identifier hs-var">decodeNS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy SerialiseConstraintsHFC
-&gt; (forall a.
    SerialiseConstraintsHFC a =&gt;
    CodecConfig a -&gt; EraNodeToNodeVersion a -&gt; (:.:) (Decoder s) f a)
-&gt; Prod NP CodecConfig xs
-&gt; NP EraNodeToNodeVersion xs
-&gt; NP (Decoder s :.: f) xs
forall k l (h :: (k -&gt; *) -&gt; l -&gt; *) (c :: k -&gt; Constraint)
       (xs :: l) (proxy :: (k -&gt; Constraint) -&gt; *) (f :: k -&gt; *)
       (f' :: k -&gt; *) (f'' :: k -&gt; *).
(AllN (Prod h) c xs, HAp h, HAp (Prod h)) =&gt;
proxy c
-&gt; (forall (a :: k). c a =&gt; f a -&gt; f' a -&gt; f'' a)
-&gt; Prod h f xs
-&gt; h f' xs
-&gt; h f'' xs
</span><span class="hs-identifier hs-var">hczipWith</span></span><span> </span><span class="annot"><span class="annottext">Proxy SerialiseConstraintsHFC
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#pSHFC"><span class="hs-identifier hs-var">pSHFC</span></a></span><span> </span><span class="annot"><span class="annottext">forall blk.
(SingleEraBlock blk, SerialiseNodeToNodeConstraints blk) =&gt;
CodecConfig blk
-&gt; EraNodeToNodeVersion blk -&gt; forall s. (:.:) (Decoder s) f blk
forall a.
SerialiseConstraintsHFC a =&gt;
CodecConfig a -&gt; EraNodeToNodeVersion a -&gt; (:.:) (Decoder s) f a
</span><a href="#local-6989586621680060087"><span class="hs-identifier hs-var">aux</span></a></span><span> </span><span class="annot"><span class="annottext">Prod NP CodecConfig xs
NP CodecConfig xs
</span><a href="#local-6989586621680060094"><span class="hs-identifier hs-var">ccfgs</span></a></span><span> </span><span class="annot"><span class="annottext">NP EraNodeToNodeVersion xs
</span><a href="#local-6989586621680060089"><span class="hs-identifier hs-var">versions</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-97"></span><span>    </span><span id="local-6989586621680060094"><span class="annot"><span class="annottext">ccfgs :: NP CodecConfig xs
</span><a href="#local-6989586621680060094"><span class="hs-identifier hs-var hs-var">ccfgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PerEraCodecConfig xs -&gt; NP CodecConfig xs
forall (xs :: [*]). PerEraCodecConfig xs -&gt; NP CodecConfig xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.AcrossEras.html#getPerEraCodecConfig"><span class="hs-identifier hs-var hs-var">getPerEraCodecConfig</span></a></span><span> </span><span class="annot"><span class="annottext">(PerEraCodecConfig xs -&gt; NP CodecConfig xs)
-&gt; PerEraCodecConfig xs -&gt; NP CodecConfig xs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs) -&gt; PerEraCodecConfig xs
forall (xs :: [*]).
CodecConfig (HardForkBlock xs) -&gt; PerEraCodecConfig xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#hardForkCodecConfigPerEra"><span class="hs-identifier hs-var hs-var">hardForkCodecConfigPerEra</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
</span><a href="#local-6989586621680060096"><span class="hs-identifier hs-var">ccfg</span></a></span><span>
</span><span id="line-98"></span><span>
</span><span id="line-99"></span><span>    </span><span class="annot"><a href="#local-6989586621680060087"><span class="hs-identifier hs-type">aux</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680060221"><span class="annot"><a href="#local-6989586621680060221"><span class="hs-identifier hs-type">blk</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Abstract.SingleEraBlock.html#SingleEraBlock"><span class="hs-identifier hs-type">SingleEraBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060221"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.Run.html#SerialiseNodeToNodeConstraints"><span class="hs-identifier hs-type">SerialiseNodeToNodeConstraints</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060221"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span>        </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Block.Abstract.html#CodecConfig"><span class="hs-identifier hs-type">CodecConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060221"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-101"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#EraNodeToNodeVersion"><span class="hs-identifier hs-type">EraNodeToNodeVersion</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060221"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-102"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680060220"><span class="annot"><a href="#local-6989586621680060220"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Decoder</span></span><span> </span><span class="annot"><a href="#local-6989586621680060220"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:.:</span></span><span> </span><span class="annot"><a href="#local-6989586621680060171"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680060221"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-103"></span><span>    </span><span id="local-6989586621680060087"><span class="annot"><span class="annottext">aux :: CodecConfig blk
-&gt; EraNodeToNodeVersion blk -&gt; forall s. (:.:) (Decoder s) f blk
</span><a href="#local-6989586621680060087"><span class="hs-identifier hs-var hs-var">aux</span></a></span></span><span> </span><span id="local-6989586621680060086"><span class="annot"><span class="annottext">CodecConfig blk
</span><a href="#local-6989586621680060086"><span class="hs-identifier hs-var">ccfg'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#EraNodeToNodeEnabled"><span class="hs-identifier hs-type">EraNodeToNodeEnabled</span></a></span><span> </span><span id="local-6989586621680060085"><span class="annot"><span class="annottext">BlockNodeToNodeVersion blk
</span><a href="#local-6989586621680060085"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decoder s (f blk) -&gt; (:.:) (Decoder s) f blk
forall l k (f :: l -&gt; *) (g :: k -&gt; l) (p :: k).
f (g p) -&gt; (:.:) f g p
</span><span class="hs-identifier hs-var">Comp</span></span><span> </span><span class="annot"><span class="annottext">(Decoder s (f blk) -&gt; (:.:) (Decoder s) f blk)
-&gt; Decoder s (f blk) -&gt; (:.:) (Decoder s) f blk
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig blk
-&gt; BlockNodeToNodeVersion blk -&gt; forall s. Decoder s (f blk)
forall blk a.
SerialiseNodeToNode blk a =&gt;
CodecConfig blk
-&gt; BlockNodeToNodeVersion blk -&gt; forall s. Decoder s a
</span><a href="Ouroboros.Consensus.Node.Serialisation.html#decodeNodeToNode"><span class="hs-identifier hs-var">decodeNodeToNode</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig blk
</span><a href="#local-6989586621680060086"><span class="hs-identifier hs-var">ccfg'</span></a></span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion blk
</span><a href="#local-6989586621680060085"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-104"></span><span>    </span><span class="annot"><a href="#local-6989586621680060087"><span class="hs-identifier hs-var">aux</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig blk
</span><span class="hs-identifier">_</span></span><span>      </span><span class="annot"><span class="annottext">EraNodeToNodeVersion blk
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#EraNodeToNodeDisabled"><span class="hs-identifier hs-var">EraNodeToNodeDisabled</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decoder s (f blk) -&gt; (:.:) (Decoder s) f blk
forall l k (f :: l -&gt; *) (g :: k -&gt; l) (p :: k).
f (g p) -&gt; (:.:) f g p
</span><span class="hs-identifier hs-var">Comp</span></span><span> </span><span class="annot"><span class="annottext">(Decoder s (f blk) -&gt; (:.:) (Decoder s) f blk)
-&gt; Decoder s (f blk) -&gt; (:.:) (Decoder s) f blk
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-105"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; Decoder s (f blk)
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Decoder s (f blk))
-&gt; (HardForkEncoderException -&gt; String)
-&gt; HardForkEncoderException
-&gt; Decoder s (f blk)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">HardForkEncoderException -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">(HardForkEncoderException -&gt; Decoder s (f blk))
-&gt; HardForkEncoderException -&gt; Decoder s (f blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy blk -&gt; HardForkEncoderException
forall blk.
SingleEraBlock blk =&gt;
Proxy blk -&gt; HardForkEncoderException
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#disabledEraException"><span class="hs-identifier hs-var">disabledEraException</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy blk
forall k (t :: k). Proxy t
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680060221"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-106"></span><span>
</span><span id="line-107"></span><span id="local-6989586621680060185"><span id="local-6989586621680060186"><span id="local-6989586621680060187"><span id="local-6989586621680060188"><span id="local-6989586621680060189"><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#after"><span class="hs-identifier hs-type">after</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680060189"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680060188"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680060187"><span class="hs-identifier hs-type">d</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680060186"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680060185"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680060187"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680060189"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680060188"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680060185"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680060186"><span class="hs-identifier hs-type">e</span></a></span></span></span></span></span></span><span>
</span><span id="line-108"></span><span id="after"><span class="annot"><span class="annottext">after :: (a -&gt; b -&gt; d -&gt; e) -&gt; (c -&gt; d) -&gt; a -&gt; b -&gt; c -&gt; e
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#after"><span class="hs-identifier hs-var hs-var">after</span></a></span></span><span> </span><span id="local-6989586621680060081"><span class="annot"><span class="annottext">a -&gt; b -&gt; d -&gt; e
</span><a href="#local-6989586621680060081"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680060080"><span class="annot"><span class="annottext">c -&gt; d
</span><a href="#local-6989586621680060080"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621680060079"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680060079"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680060078"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680060078"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span id="local-6989586621680060077"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621680060077"><span class="hs-identifier hs-var">z</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; b -&gt; d -&gt; e
</span><a href="#local-6989586621680060081"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680060079"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680060078"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">c -&gt; d
</span><a href="#local-6989586621680060080"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621680060077"><span class="hs-identifier hs-var">z</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Blocks/headers
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span id="local-6989586621680060076"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#SerialiseHFC"><span class="hs-identifier hs-type">SerialiseHFC</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060076"><span class="hs-identifier hs-type">xs</span></a></span><span>
</span><span id="line-115"></span><span>      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.Serialisation.html#SerialiseNodeToNode"><span class="hs-identifier hs-type">SerialiseNodeToNode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060076"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060076"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-116"></span><span>  </span><span id="local-6989586621680060072"><span class="annot"><span class="annottext">encodeNodeToNode :: CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; HardForkBlock xs
-&gt; Encoding
</span><a href="#local-6989586621680060072"><span class="hs-identifier hs-var hs-var hs-var hs-var">encodeNodeToNode</span></a></span></span><span> </span><span id="local-6989586621680060071"><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
</span><a href="#local-6989586621680060071"><span class="hs-identifier hs-var">ccfg</span></a></span></span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion (HardForkBlock xs)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HardForkBlock xs -&gt; Encoding) -&gt; HardForkBlock xs -&gt; Encoding
forall a. (a -&gt; Encoding) -&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-network-api-0.1.0.0/noopt/doc/html/ouroboros-network-api/src"><span class="hs-identifier hs-var">wrapCBORinCBOR</span></a></span><span>   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs) -&gt; HardForkBlock xs -&gt; Encoding
forall (xs :: [*]).
SerialiseHFC xs =&gt;
CodecConfig (HardForkBlock xs) -&gt; HardForkBlock xs -&gt; Encoding
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#encodeDiskHfcBlock"><span class="hs-identifier hs-var">encodeDiskHfcBlock</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
</span><a href="#local-6989586621680060071"><span class="hs-identifier hs-var">ccfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span>  </span><span id="local-6989586621680060069"><span class="annot"><span class="annottext">decodeNodeToNode :: CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; forall s. Decoder s (HardForkBlock xs)
</span><a href="#local-6989586621680060069"><span class="hs-identifier hs-var hs-var hs-var hs-var">decodeNodeToNode</span></a></span></span><span> </span><span id="local-6989586621680060068"><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
</span><a href="#local-6989586621680060068"><span class="hs-identifier hs-var">ccfg</span></a></span></span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion (HardForkBlock xs)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall s. Decoder s (ByteString -&gt; HardForkBlock xs))
-&gt; forall s. Decoder s (HardForkBlock xs)
forall a.
(forall s. Decoder s (ByteString -&gt; a)) -&gt; forall s. Decoder s a
</span><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-network-api-0.1.0.0/noopt/doc/html/ouroboros-network-api/src"><span class="hs-identifier hs-var">unwrapCBORinCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
-&gt; forall s. Decoder s (ByteString -&gt; HardForkBlock xs)
forall (xs :: [*]).
SerialiseHFC xs =&gt;
CodecConfig (HardForkBlock xs)
-&gt; forall s. Decoder s (ByteString -&gt; HardForkBlock xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#decodeDiskHfcBlock"><span class="hs-identifier hs-var">decodeDiskHfcBlock</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
</span><a href="#local-6989586621680060068"><span class="hs-identifier hs-var">ccfg</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span id="local-6989586621680060066"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#SerialiseHFC"><span class="hs-identifier hs-type">SerialiseHFC</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060066"><span class="hs-identifier hs-type">xs</span></a></span><span>
</span><span id="line-120"></span><span>      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.Serialisation.html#SerialiseNodeToNode"><span class="hs-identifier hs-type">SerialiseNodeToNode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060066"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Block.Abstract.html#Header"><span class="hs-identifier hs-type">Header</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060066"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-121"></span><span>  </span><span id="local-6989586621680060063"><span class="annot"><span class="annottext">encodeNodeToNode :: CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; Header (HardForkBlock xs)
-&gt; Encoding
</span><a href="#local-6989586621680060063"><span class="hs-identifier hs-var hs-var hs-var hs-var">encodeNodeToNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs -&gt; NS Header xs -&gt; Encoding
forall (f :: * -&gt; *) (xs :: [*]).
(SerialiseHFC xs,
 forall blk.
 SerialiseNodeToNodeConstraints blk =&gt;
 SerialiseNodeToNode blk (f blk)) =&gt;
CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs) -&gt; NS f xs -&gt; Encoding
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#dispatchEncoder"><span class="hs-identifier hs-var">dispatchEncoder</span></a></span><span> </span><span class="annot"><span class="annottext">(CodecConfig (HardForkBlock xs)
 -&gt; HardForkNodeToNodeVersion xs -&gt; NS Header xs -&gt; Encoding)
-&gt; (Header (HardForkBlock xs) -&gt; NS Header xs)
-&gt; CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs
-&gt; Header (HardForkBlock xs)
-&gt; Encoding
forall a b d e c.
(a -&gt; b -&gt; d -&gt; e) -&gt; (c -&gt; d) -&gt; a -&gt; b -&gt; c -&gt; e
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#after"><span class="hs-operator hs-var">`after`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OneEraHeader xs -&gt; NS Header xs
forall (xs :: [*]). OneEraHeader xs -&gt; NS Header xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.AcrossEras.html#getOneEraHeader"><span class="hs-identifier hs-var hs-var">getOneEraHeader</span></a></span><span> </span><span class="annot"><span class="annottext">(OneEraHeader xs -&gt; NS Header xs)
-&gt; (Header (HardForkBlock xs) -&gt; OneEraHeader xs)
-&gt; Header (HardForkBlock xs)
-&gt; NS Header xs
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Header (HardForkBlock xs) -&gt; OneEraHeader xs
forall (xs :: [*]). Header (HardForkBlock xs) -&gt; OneEraHeader xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Block.html#getHardForkHeader"><span class="hs-identifier hs-var hs-var">getHardForkHeader</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span>  </span><span id="local-6989586621680060060"><span class="annot"><span class="annottext">decodeNodeToNode :: CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; forall s. Decoder s (Header (HardForkBlock xs))
</span><a href="#local-6989586621680060060"><span class="hs-identifier hs-var hs-var hs-var hs-var">decodeNodeToNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NS Header xs -&gt; Header (HardForkBlock xs))
-&gt; Decoder s (NS Header xs)
-&gt; Decoder s (Header (HardForkBlock xs))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OneEraHeader xs -&gt; Header (HardForkBlock xs)
forall (xs :: [*]). OneEraHeader xs -&gt; Header (HardForkBlock xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Block.html#HardForkHeader"><span class="hs-identifier hs-var">HardForkHeader</span></a></span><span> </span><span class="annot"><span class="annottext">(OneEraHeader xs -&gt; Header (HardForkBlock xs))
-&gt; (NS Header xs -&gt; OneEraHeader xs)
-&gt; NS Header xs
-&gt; Header (HardForkBlock xs)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">NS Header xs -&gt; OneEraHeader xs
forall (xs :: [*]). NS Header xs -&gt; OneEraHeader xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.AcrossEras.html#OneEraHeader"><span class="hs-identifier hs-var">OneEraHeader</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Decoder s (NS Header xs) -&gt; Decoder s (Header (HardForkBlock xs)))
-&gt; (CodecConfig (HardForkBlock xs)
    -&gt; HardForkNodeToNodeVersion xs -&gt; Decoder s (NS Header xs))
-&gt; CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs
-&gt; Decoder s (Header (HardForkBlock xs))
forall y z x0 x1. (y -&gt; z) -&gt; (x0 -&gt; x1 -&gt; y) -&gt; x0 -&gt; x1 -&gt; z
</span><a href="Ouroboros.Consensus.Util.html#.%3A"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs -&gt; Decoder s (NS Header xs)
forall (f :: * -&gt; *) (xs :: [*]).
(SerialiseHFC xs,
 forall blk.
 SerialiseNodeToNodeConstraints blk =&gt;
 SerialiseNodeToNode blk (f blk)) =&gt;
CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; forall s. Decoder s (NS f xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#dispatchDecoder"><span class="hs-identifier hs-var">dispatchDecoder</span></a></span></span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Serialised blocks/headers
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span id="local-6989586621680060057"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#SerialiseHFC"><span class="hs-identifier hs-type">SerialiseHFC</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060057"><span class="hs-identifier hs-type">xs</span></a></span><span>
</span><span id="line-129"></span><span>      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.Serialisation.html#SerialiseNodeToNode"><span class="hs-identifier hs-type">SerialiseNodeToNode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060057"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/ouroboros-network/ouroboros-network/dist-newstyle/build/x86_64-linux/ghc-8.10.7/ouroboros-network-api-0.1.0.0/noopt/doc/html/ouroboros-network-api/src"><span class="hs-identifier hs-type">Serialised</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060057"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-130"></span><span>  </span><span id="local-6989586621680060054"><span class="annot"><span class="annottext">encodeNodeToNode :: CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; Serialised (HardForkBlock xs)
-&gt; Encoding
</span><a href="#local-6989586621680060054"><span class="hs-identifier hs-var hs-var hs-var hs-var">encodeNodeToNode</span></a></span></span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion (HardForkBlock xs)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Serialised (HardForkBlock xs) -&gt; Encoding
forall a. Serialise a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">Serialise.encode</span></span><span>
</span><span id="line-131"></span><span>  </span><span id="local-6989586621680060052"><span class="annot"><span class="annottext">decodeNodeToNode :: CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; forall s. Decoder s (Serialised (HardForkBlock xs))
</span><a href="#local-6989586621680060052"><span class="hs-identifier hs-var hs-var hs-var hs-var">decodeNodeToNode</span></a></span></span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">BlockNodeToNodeVersion (HardForkBlock xs)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decoder s (Serialised (HardForkBlock xs))
forall a s. Serialise a =&gt; Decoder s a
</span><span class="hs-identifier hs-var">Serialise.decode</span></span></span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span id="local-6989586621680060050"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#SerialiseHFC"><span class="hs-identifier hs-type">SerialiseHFC</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060050"><span class="hs-identifier hs-type">xs</span></a></span><span>
</span><span id="line-134"></span><span>      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.Serialisation.html#SerialiseNodeToNode"><span class="hs-identifier hs-type">SerialiseNodeToNode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060050"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Storage.Serialisation.html#SerialisedHeader"><span class="hs-identifier hs-type">SerialisedHeader</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060050"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-135"></span><span>  </span><span id="local-6989586621680060047"><span class="annot"><span class="annottext">encodeNodeToNode :: CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; SerialisedHeader (HardForkBlock xs)
-&gt; Encoding
</span><a href="#local-6989586621680060047"><span class="hs-identifier hs-var hs-var hs-var hs-var">encodeNodeToNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs
-&gt; NS SerialisedHeader xs
-&gt; Encoding
forall (f :: * -&gt; *) (xs :: [*]).
(SerialiseHFC xs,
 forall blk.
 SerialiseNodeToNodeConstraints blk =&gt;
 SerialiseNodeToNode blk (f blk)) =&gt;
CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs) -&gt; NS f xs -&gt; Encoding
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#dispatchEncoder"><span class="hs-identifier hs-var">dispatchEncoder</span></a></span><span> </span><span class="annot"><span class="annottext">(CodecConfig (HardForkBlock xs)
 -&gt; HardForkNodeToNodeVersion xs
 -&gt; NS SerialisedHeader xs
 -&gt; Encoding)
-&gt; (SerialisedHeader (HardForkBlock xs) -&gt; NS SerialisedHeader xs)
-&gt; CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs
-&gt; SerialisedHeader (HardForkBlock xs)
-&gt; Encoding
forall a b d e c.
(a -&gt; b -&gt; d -&gt; e) -&gt; (c -&gt; d) -&gt; a -&gt; b -&gt; c -&gt; e
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#after"><span class="hs-operator hs-var">`after`</span></a></span><span> </span><span class="annot"><span class="annottext">SerialisedHeader (HardForkBlock xs) -&gt; NS SerialisedHeader xs
forall (xs :: [*]).
SerialisedHeader (HardForkBlock xs) -&gt; NS SerialisedHeader xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#distribSerialisedHeader"><span class="hs-identifier hs-var">distribSerialisedHeader</span></a></span><span>
</span><span id="line-136"></span><span>  </span><span id="local-6989586621680060045"><span class="annot"><span class="annottext">decodeNodeToNode :: CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; forall s. Decoder s (SerialisedHeader (HardForkBlock xs))
</span><a href="#local-6989586621680060045"><span class="hs-identifier hs-var hs-var hs-var hs-var">decodeNodeToNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NS SerialisedHeader xs -&gt; SerialisedHeader (HardForkBlock xs))
-&gt; Decoder s (NS SerialisedHeader xs)
-&gt; Decoder s (SerialisedHeader (HardForkBlock xs))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">NS SerialisedHeader xs -&gt; SerialisedHeader (HardForkBlock xs)
forall (xs :: [*]).
NS SerialisedHeader xs -&gt; SerialisedHeader (HardForkBlock xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#undistribSerialisedHeader"><span class="hs-identifier hs-var">undistribSerialisedHeader</span></a></span><span> </span><span class="annot"><span class="annottext">(Decoder s (NS SerialisedHeader xs)
 -&gt; Decoder s (SerialisedHeader (HardForkBlock xs)))
-&gt; (CodecConfig (HardForkBlock xs)
    -&gt; HardForkNodeToNodeVersion xs
    -&gt; Decoder s (NS SerialisedHeader xs))
-&gt; CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs
-&gt; Decoder s (SerialisedHeader (HardForkBlock xs))
forall y z x0 x1. (y -&gt; z) -&gt; (x0 -&gt; x1 -&gt; y) -&gt; x0 -&gt; x1 -&gt; z
</span><a href="Ouroboros.Consensus.Util.html#.%3A"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs
-&gt; Decoder s (NS SerialisedHeader xs)
forall (f :: * -&gt; *) (xs :: [*]).
(SerialiseHFC xs,
 forall blk.
 SerialiseNodeToNodeConstraints blk =&gt;
 SerialiseNodeToNode blk (f blk)) =&gt;
CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; forall s. Decoder s (NS f xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#dispatchDecoder"><span class="hs-identifier hs-var">dispatchDecoder</span></a></span></span><span>
</span><span id="line-137"></span><span>
</span><span id="line-138"></span><span class="hs-comment">{-------------------------------------------------------------------------------
  Transactions
-------------------------------------------------------------------------------}</span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span id="local-6989586621680060043"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#SerialiseHFC"><span class="hs-identifier hs-type">SerialiseHFC</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060043"><span class="hs-identifier hs-type">xs</span></a></span><span>
</span><span id="line-143"></span><span>      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.Serialisation.html#SerialiseNodeToNode"><span class="hs-identifier hs-type">SerialiseNodeToNode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060043"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Ledger.SupportsMempool.html#GenTx"><span class="hs-identifier hs-type">GenTx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060043"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-144"></span><span>  </span><span id="local-6989586621680060040"><span class="annot"><span class="annottext">encodeNodeToNode :: CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; GenTx (HardForkBlock xs)
-&gt; Encoding
</span><a href="#local-6989586621680060040"><span class="hs-identifier hs-var hs-var hs-var hs-var">encodeNodeToNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs -&gt; NS GenTx xs -&gt; Encoding
forall (f :: * -&gt; *) (xs :: [*]).
(SerialiseHFC xs,
 forall blk.
 SerialiseNodeToNodeConstraints blk =&gt;
 SerialiseNodeToNode blk (f blk)) =&gt;
CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs) -&gt; NS f xs -&gt; Encoding
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#dispatchEncoder"><span class="hs-identifier hs-var">dispatchEncoder</span></a></span><span> </span><span class="annot"><span class="annottext">(CodecConfig (HardForkBlock xs)
 -&gt; HardForkNodeToNodeVersion xs -&gt; NS GenTx xs -&gt; Encoding)
-&gt; (GenTx (HardForkBlock xs) -&gt; NS GenTx xs)
-&gt; CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs
-&gt; GenTx (HardForkBlock xs)
-&gt; Encoding
forall a b d e c.
(a -&gt; b -&gt; d -&gt; e) -&gt; (c -&gt; d) -&gt; a -&gt; b -&gt; c -&gt; e
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#after"><span class="hs-operator hs-var">`after`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OneEraGenTx xs -&gt; NS GenTx xs
forall (xs :: [*]). OneEraGenTx xs -&gt; NS GenTx xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.AcrossEras.html#getOneEraGenTx"><span class="hs-identifier hs-var hs-var">getOneEraGenTx</span></a></span><span> </span><span class="annot"><span class="annottext">(OneEraGenTx xs -&gt; NS GenTx xs)
-&gt; (GenTx (HardForkBlock xs) -&gt; OneEraGenTx xs)
-&gt; GenTx (HardForkBlock xs)
-&gt; NS GenTx xs
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">GenTx (HardForkBlock xs) -&gt; OneEraGenTx xs
forall (xs :: [*]). GenTx (HardForkBlock xs) -&gt; OneEraGenTx xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Mempool.html#getHardForkGenTx"><span class="hs-identifier hs-var hs-var">getHardForkGenTx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span>  </span><span id="local-6989586621680060037"><span class="annot"><span class="annottext">decodeNodeToNode :: CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; forall s. Decoder s (GenTx (HardForkBlock xs))
</span><a href="#local-6989586621680060037"><span class="hs-identifier hs-var hs-var hs-var hs-var">decodeNodeToNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NS GenTx xs -&gt; GenTx (HardForkBlock xs))
-&gt; Decoder s (NS GenTx xs) -&gt; Decoder s (GenTx (HardForkBlock xs))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OneEraGenTx xs -&gt; GenTx (HardForkBlock xs)
forall (xs :: [*]). OneEraGenTx xs -&gt; GenTx (HardForkBlock xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Mempool.html#HardForkGenTx"><span class="hs-identifier hs-var">HardForkGenTx</span></a></span><span> </span><span class="annot"><span class="annottext">(OneEraGenTx xs -&gt; GenTx (HardForkBlock xs))
-&gt; (NS GenTx xs -&gt; OneEraGenTx xs)
-&gt; NS GenTx xs
-&gt; GenTx (HardForkBlock xs)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">NS GenTx xs -&gt; OneEraGenTx xs
forall (xs :: [*]). NS GenTx xs -&gt; OneEraGenTx xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.AcrossEras.html#OneEraGenTx"><span class="hs-identifier hs-var">OneEraGenTx</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Decoder s (NS GenTx xs) -&gt; Decoder s (GenTx (HardForkBlock xs)))
-&gt; (CodecConfig (HardForkBlock xs)
    -&gt; HardForkNodeToNodeVersion xs -&gt; Decoder s (NS GenTx xs))
-&gt; CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs
-&gt; Decoder s (GenTx (HardForkBlock xs))
forall y z x0 x1. (y -&gt; z) -&gt; (x0 -&gt; x1 -&gt; y) -&gt; x0 -&gt; x1 -&gt; z
</span><a href="Ouroboros.Consensus.Util.html#.%3A"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs -&gt; Decoder s (NS GenTx xs)
forall (f :: * -&gt; *) (xs :: [*]).
(SerialiseHFC xs,
 forall blk.
 SerialiseNodeToNodeConstraints blk =&gt;
 SerialiseNodeToNode blk (f blk)) =&gt;
CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; forall s. Decoder s (NS f xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#dispatchDecoder"><span class="hs-identifier hs-var">dispatchDecoder</span></a></span></span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span id="local-6989586621680060034"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.Common.html#SerialiseHFC"><span class="hs-identifier hs-type">SerialiseHFC</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060034"><span class="hs-identifier hs-type">xs</span></a></span><span>
</span><span id="line-148"></span><span>      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Ouroboros.Consensus.Node.Serialisation.html#SerialiseNodeToNode"><span class="hs-identifier hs-type">SerialiseNodeToNode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060034"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.Ledger.SupportsMempool.html#GenTxId"><span class="hs-identifier hs-type">GenTxId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ouroboros.Consensus.HardFork.Combinator.Basics.html#HardForkBlock"><span class="hs-identifier hs-type">HardForkBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680060034"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-149"></span><span>  </span><span id="local-6989586621680060031"><span class="annot"><span class="annottext">encodeNodeToNode :: CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; GenTxId (HardForkBlock xs)
-&gt; Encoding
</span><a href="#local-6989586621680060031"><span class="hs-identifier hs-var hs-var hs-var hs-var">encodeNodeToNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs -&gt; NS WrapGenTxId xs -&gt; Encoding
forall (f :: * -&gt; *) (xs :: [*]).
(SerialiseHFC xs,
 forall blk.
 SerialiseNodeToNodeConstraints blk =&gt;
 SerialiseNodeToNode blk (f blk)) =&gt;
CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs) -&gt; NS f xs -&gt; Encoding
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#dispatchEncoder"><span class="hs-identifier hs-var">dispatchEncoder</span></a></span><span> </span><span class="annot"><span class="annottext">(CodecConfig (HardForkBlock xs)
 -&gt; HardForkNodeToNodeVersion xs -&gt; NS WrapGenTxId xs -&gt; Encoding)
-&gt; (GenTxId (HardForkBlock xs) -&gt; NS WrapGenTxId xs)
-&gt; CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs
-&gt; GenTxId (HardForkBlock xs)
-&gt; Encoding
forall a b d e c.
(a -&gt; b -&gt; d -&gt; e) -&gt; (c -&gt; d) -&gt; a -&gt; b -&gt; c -&gt; e
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#after"><span class="hs-operator hs-var">`after`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OneEraGenTxId xs -&gt; NS WrapGenTxId xs
forall (xs :: [*]). OneEraGenTxId xs -&gt; NS WrapGenTxId xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.AcrossEras.html#getOneEraGenTxId"><span class="hs-identifier hs-var hs-var">getOneEraGenTxId</span></a></span><span> </span><span class="annot"><span class="annottext">(OneEraGenTxId xs -&gt; NS WrapGenTxId xs)
-&gt; (GenTxId (HardForkBlock xs) -&gt; OneEraGenTxId xs)
-&gt; GenTxId (HardForkBlock xs)
-&gt; NS WrapGenTxId xs
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">GenTxId (HardForkBlock xs) -&gt; OneEraGenTxId xs
forall (xs :: [*]).
TxId (GenTx (HardForkBlock xs)) -&gt; OneEraGenTxId xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Mempool.html#getHardForkGenTxId"><span class="hs-identifier hs-var hs-var">getHardForkGenTxId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span>  </span><span id="local-6989586621680060028"><span class="annot"><span class="annottext">decodeNodeToNode :: CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; forall s. Decoder s (GenTxId (HardForkBlock xs))
</span><a href="#local-6989586621680060028"><span class="hs-identifier hs-var hs-var hs-var hs-var">decodeNodeToNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NS WrapGenTxId xs -&gt; GenTxId (HardForkBlock xs))
-&gt; Decoder s (NS WrapGenTxId xs)
-&gt; Decoder s (GenTxId (HardForkBlock xs))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OneEraGenTxId xs -&gt; GenTxId (HardForkBlock xs)
forall (xs :: [*]).
OneEraGenTxId xs -&gt; TxId (GenTx (HardForkBlock xs))
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Mempool.html#HardForkGenTxId"><span class="hs-identifier hs-var">HardForkGenTxId</span></a></span><span> </span><span class="annot"><span class="annottext">(OneEraGenTxId xs -&gt; GenTxId (HardForkBlock xs))
-&gt; (NS WrapGenTxId xs -&gt; OneEraGenTxId xs)
-&gt; NS WrapGenTxId xs
-&gt; GenTxId (HardForkBlock xs)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">NS WrapGenTxId xs -&gt; OneEraGenTxId xs
forall (xs :: [*]). NS WrapGenTxId xs -&gt; OneEraGenTxId xs
</span><a href="Ouroboros.Consensus.HardFork.Combinator.AcrossEras.html#OneEraGenTxId"><span class="hs-identifier hs-var">OneEraGenTxId</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Decoder s (NS WrapGenTxId xs)
 -&gt; Decoder s (GenTxId (HardForkBlock xs)))
-&gt; (CodecConfig (HardForkBlock xs)
    -&gt; HardForkNodeToNodeVersion xs -&gt; Decoder s (NS WrapGenTxId xs))
-&gt; CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs
-&gt; Decoder s (GenTxId (HardForkBlock xs))
forall y z x0 x1. (y -&gt; z) -&gt; (x0 -&gt; x1 -&gt; y) -&gt; x0 -&gt; x1 -&gt; z
</span><a href="Ouroboros.Consensus.Util.html#.%3A"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig (HardForkBlock xs)
-&gt; HardForkNodeToNodeVersion xs -&gt; Decoder s (NS WrapGenTxId xs)
forall (f :: * -&gt; *) (xs :: [*]).
(SerialiseHFC xs,
 forall blk.
 SerialiseNodeToNodeConstraints blk =&gt;
 SerialiseNodeToNode blk (f blk)) =&gt;
CodecConfig (HardForkBlock xs)
-&gt; BlockNodeToNodeVersion (HardForkBlock xs)
-&gt; forall s. Decoder s (NS f xs)
</span><a href="Ouroboros.Consensus.HardFork.Combinator.Serialisation.SerialiseNodeToNode.html#dispatchDecoder"><span class="hs-identifier hs-var">dispatchDecoder</span></a></span></span><span>
</span><span id="line-151"></span></pre></body></html>